{"version":3,"file":"json-editor.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/json-editor/src/lib/abstract-subscriber/abstract-subscriber.component.ts","../../../projects/json-editor/src/lib/shared/services/app-globals.service.ts","../../../projects/json-editor/src/lib/shared/services/path-util.service.ts","../../../projects/json-editor/src/lib/shared/services/remote-autocompletion.service.ts","../../../projects/json-editor/src/lib/shared/services/component-type.service.ts","../../../projects/json-editor/src/lib/shared/services/tabs-util.service.ts","../../../projects/json-editor/src/lib/shared/services/list-page-changer.service.ts","../../../projects/json-editor/src/lib/shared/services/dom-util.service.ts","../../../projects/json-editor/src/lib/shared/services/empty-value.service.ts","../../../projects/json-editor/src/lib/shared/services/find-replace-all.service.ts","../../../projects/json-editor/src/lib/shared/classes/sized-stack.ts","../../../projects/json-editor/src/lib/shared/services/json-schema.service.ts","../../../projects/json-editor/src/lib/shared/services/compare-keys-by-schema.service.ts","../../../projects/json-editor/src/lib/shared/services/keys-store.service.ts","../../../projects/json-editor/src/lib/shared/services/json-store.service.ts","../../../projects/json-editor/src/lib/shared/services/json-util.service.ts","../../../projects/json-editor/src/lib/shared/services/modal.service.ts","../../../projects/json-editor/src/lib/shared/services/record-fixer.service.ts","../../../projects/json-editor/src/lib/shared/services/schema-fixer.service.ts","../../../projects/json-editor/src/lib/shared/services/schema-validation.service.ts","../../../projects/json-editor/src/lib/shared/services/shortcut-action.service.ts","../../../projects/json-editor/src/lib/shared/services/window-href.service.ts","../../../projects/json-editor/src/lib/shared/services/problems.service.ts","../../../projects/json-editor/src/lib/shared/services/katex.service.ts","../../../projects/json-editor/src/lib/shared/services/text-diff.service.ts","../../../projects/json-editor/src/lib/shared/services/index.ts","../../../projects/json-editor/src/lib/shared/directives/shortcuts.directive.ts","../../../projects/json-editor/src/lib/modal-view/modal-view.component.html","../../../projects/json-editor/src/lib/modal-view/modal-view.component.ts","../../../projects/json-editor/src/lib/shared/pipes/sort-alphabetically.pipe.ts","../../../projects/json-editor/src/lib/shared/pipes/filter-by-expression.pipe.ts","../../../projects/json-editor/src/lib/add-field-dropdown/add-field-dropdown.component.ts","../../../projects/json-editor/src/lib/add-field-dropdown/add-field-dropdown.component.html","../../../projects/json-editor/src/lib/bottom-console-badges/bottom-console-badges.component.html","../../../projects/json-editor/src/lib/bottom-console-badges/bottom-console-badges.component.ts","../../../projects/json-editor/src/lib/shared/pipes/add-always-show-fields.pipe.ts","../../../projects/json-editor/src/lib/shared/pipes/filter-hidden-fields.pipe.ts","../../../projects/json-editor/src/lib/tree-menu/tree-menu-item.component.ts","../../../projects/json-editor/src/lib/tree-menu/tree-menu-item.component.html","../../../projects/json-editor/src/lib/tree-menu/tree-menu.component.ts","../../../projects/json-editor/src/lib/tree-menu/tree-menu.component.html","../../../projects/json-editor/src/lib/title-dropdown/title-dropdown.component.ts","../../../projects/json-editor/src/lib/title-dropdown/title-dropdown.component.html","../../../projects/json-editor/src/lib/find-replace/find-replace.component.ts","../../../projects/json-editor/src/lib/find-replace/find-replace.component.html","../../../projects/json-editor/src/lib/abstract-field/abstract-field.component.ts","../../../projects/json-editor/src/lib/abstract-list-field/abstract-list-field.component.ts","../../../projects/json-editor/src/lib/table-item-field/table-item-field.component.html","../../../projects/json-editor/src/lib/table-item-field/table-item-field.component.ts","../../../projects/json-editor/src/lib/list-action-group/list-action-group.component.ts","../../../projects/json-editor/src/lib/list-action-group/list-action-group.component.html","../../../projects/json-editor/src/lib/patch-actions/patch-actions.component.ts","../../../projects/json-editor/src/lib/patch-actions/patch-actions.component.html","../../../projects/json-editor/src/lib/shared/pipes/type-of.pipe.ts","../../../projects/json-editor/src/lib/shared/pipes/sort-keys-by-schema.pipe.ts","../../../projects/json-editor/src/lib/shared/pipes/keys-pipe.ts","../../../projects/json-editor/src/lib/add-or-replace-patch/add-or-replace-patch.component.ts","../../../projects/json-editor/src/lib/add-or-replace-patch/add-or-replace-patch.component.html","../../../projects/json-editor/src/lib/shared/pipes/underscore-to-space.pipe.ts","../../../projects/json-editor/src/lib/table-list-field/table-list-field.component.html","../../../projects/json-editor/src/lib/table-list-field/table-list-field.component.ts","../../../projects/json-editor/src/lib/object-field/object-field.component.html","../../../projects/json-editor/src/lib/object-field/object-field.component.ts","../../../projects/json-editor/src/lib/complex-list-field/complex-list-field.component.html","../../../projects/json-editor/src/lib/complex-list-field/complex-list-field.component.ts","../../../projects/json-editor/src/lib/primitive-list-field/primitive-list-field.component.html","../../../projects/json-editor/src/lib/primitive-list-field/primitive-list-field.component.ts","../../../projects/json-editor/src/lib/shared/directives/content-model.directive.ts","../../../projects/json-editor/src/lib/string-input/string-input.component.ts","../../../projects/json-editor/src/lib/string-input/string-input.component.html","../../../projects/json-editor/src/lib/searchable-dropdown/searchable-dropdown.component.ts","../../../projects/json-editor/src/lib/searchable-dropdown/searchable-dropdown.component.html","../../../projects/json-editor/src/lib/autocomplete-input/autocomplete-input.component.ts","../../../projects/json-editor/src/lib/autocomplete-input/autocomplete-input.component.html","../../../projects/json-editor/src/lib/text-diff/text-diff.component.ts","../../../projects/json-editor/src/lib/text-diff/text-diff.component.html","../../../projects/json-editor/src/lib/primitive-field/primitive-field.component.html","../../../projects/json-editor/src/lib/primitive-field/primitive-field.component.ts","../../../projects/json-editor/src/lib/ref-field/ref-field.component.ts","../../../projects/json-editor/src/lib/ref-field/ref-field.component.html","../../../projects/json-editor/src/lib/any-type-field/any-type-field.component.ts","../../../projects/json-editor/src/lib/any-type-field/any-type-field.component.html","../../../projects/json-editor/src/lib/add-new-element-button/add-new-element-button.component.ts","../../../projects/json-editor/src/lib/add-new-element-button/add-new-element-button.component.html","../../../projects/json-editor/src/lib/shared/pipes/self-or-empty.pipe.ts","../../../projects/json-editor/src/lib/shared/pipes/set-first-element-path.pipe.ts","../../../projects/json-editor/src/lib/sub-record/sub-record.component.ts","../../../projects/json-editor/src/lib/sub-record/sub-record.component.html","../../../projects/json-editor/src/lib/shared/pipes/sanitize-url.pipe.ts","../../../projects/json-editor/src/lib/html-view/html-view.component.ts","../../../projects/json-editor/src/lib/html-view/html-view.component.html","../../../projects/json-editor/src/lib/editor-previewer/editor-previewer.component.ts","../../../projects/json-editor/src/lib/editor-previewer/editor-previewer.component.html","../../../projects/json-editor/src/lib/bottom-console/problems-console-tab/problems-console-tab.component.html","../../../projects/json-editor/src/lib/bottom-console/problems-console-tab/problems-console-tab.component.ts","../../../projects/json-editor/src/lib/bottom-console/patches-console-tab/patches-console-tab.component.html","../../../projects/json-editor/src/lib/bottom-console/patches-console-tab/patches-console-tab.component.ts","../../../projects/json-editor/src/lib/bottom-console/bottom-console.component.ts","../../../projects/json-editor/src/lib/bottom-console/bottom-console.component.html","../../../projects/json-editor/src/lib/json-editor.component.html","../../../projects/json-editor/src/lib/json-editor.component.ts","../../../projects/json-editor/src/lib/rxjs-operators.ts","../../../projects/json-editor/src/lib/shared/pipes/last-path-element.pipe.ts","../../../projects/json-editor/src/lib/add-field-dropdown/add-nested-field-dropdown.component.html","../../../projects/json-editor/src/lib/add-field-dropdown/add-nested-field-dropdown.component.ts","../../../projects/json-editor/src/lib/shared/pipes/different-keys.pipe.ts","../../../projects/json-editor/src/lib/shared/pipes/index.ts","../../../projects/json-editor/src/lib/shared/directives/index.ts","../../../projects/json-editor/src/lib/json-editor.module.ts","../../../projects/json-editor/src/public-api.ts","../../../projects/json-editor/src/json-editor.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { OnDestroy, Component } from '@angular/core';\nimport { Subject } from 'rxjs';\n@Component({\n  template: ''\n})\nexport abstract class AbstractSubscriberComponent implements OnDestroy {\n  protected isDestroyed = new Subject<void>();\n\n  ngOnDestroy() {\n    this.isDestroyed.next();\n    this.isDestroyed.complete();\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable, TemplateRef } from '@angular/core';\nimport { ReplaySubject } from 'rxjs/ReplaySubject';\n\nimport { CategorizedValidationProblems, SchemaValidationProblems, ValidationProblem, JsonEditorConfig } from '../interfaces';\n\n@Injectable()\nexport class AppGlobalsService {\n\n  readonly adminMode$ = new ReplaySubject<boolean>(1);\n  activeTabName = '';\n  tabNameToFirstTopLevelElement: { [tabName: string]: string } = {};\n  templates: {\n    [templateName: string]: TemplateRef<any>,\n    patchesHeaderTemplate?: TemplateRef<any>,\n  } = {};\n  config: JsonEditorConfig;\n  private _adminMode = false;\n\n  set adminMode(adminMode: boolean) {\n    this._adminMode = adminMode;\n    this.adminMode$.next(this._adminMode);\n  }\n\n  get adminMode() {\n    return this._adminMode;\n  }\n\n  get firstElementPathForCurrentTab() {\n    return this.tabNameToFirstTopLevelElement[this.activeTabName];\n  }\n\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport { Injectable } from '@angular/core';\n\n\n@Injectable()\nexport class PathUtilService {\n\n  readonly separator = '/';\n\n  /**\n   *\n   * @param path - Element's path\n   * @param root - Find nearest or root parent array. True for root and false for nearest array parent\n   * @returns - Returns the path to the array parent\n   */\n  getNearestOrRootArrayParentInPath(path: Array<any>, root: boolean): Array<any> {\n    let _path = [];\n    const pathLength = path.length;\n    for (let index = 0; index < pathLength; index++) {\n      _path = root ? path.slice(0, index + 1) : path.slice(0, path.length - index);\n      if (typeof _path[_path.length - 1] === 'number') {\n        // transform ['arrayParent',0] => ['arrayParent']\n        _path.pop();\n        break;\n      }\n    }\n    return _path;\n  }\n\n  getElementIndexInForwardOrReversePath(path: Array<any>, directPathSearch: boolean): number {\n    return this.findIndexFromPath(path.slice(), directPathSearch);\n  }\n\n  /**\n   *\n   * @param path - The path of an element\n   * @param directPathSearch - Flag for define direct or reverse searching in path. Set to true for searching in direct\n   * or false for searching in reverse path\n   * @returns - Returns found index in path or -1 if not found\n   */\n  findIndexFromPath(path: Array<any>, directPathSearch: boolean): number {\n    path = directPathSearch ? path : path.reverse();\n    for (const index in path) {\n      if (!isNaN(path[index])) {\n        return path[index];\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Converts path array `/` separated path string.\n   * Example: from ['foo', 'bar', 0] to '/foo/bar/0'\n   */\n  toPathString(path: Array<any>): string {\n    if (path.length === 0) {\n      return '';\n    } else {\n      return `${this.separator}${path.join(this.separator)}`;\n    }\n\n  }\n\n  /**\n   * Converts `/` separated path string to path array.\n   * Example from '/foo/bar/0' to ['foo', 'bar', 0]\n   */\n  toPathArray(pathString: string): Array<any> {\n    return pathString.split(this.separator)\n      .slice(1) // remove the empty\n      .map((key) => isNaN(parseInt(key, 10)) ? key : parseInt(key, 10));\n  }\n}\n\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { AutocompletionConfig } from '../interfaces';\nimport { PathUtilService } from './path-util.service';\n\n@Injectable()\nexport class RemoteAutocompletionService {\n\n  constructor(private http: HttpClient,\n    private pathUtilService: PathUtilService) { }\n\n  getAutocompletionResults(options: AutocompletionConfig,\n    token: string): Observable<Array<object>> {\n    return this.http.get(`${options.url}${token}`)\n      .pipe(map(res => this.mapResponseToResults(res, options.path)));\n  }\n\n  private mapResponseToResults(response: any, resultsPath: string): Array<object> {\n    const pathElements = this.pathUtilService.toPathArray(resultsPath);\n    let results = response.json();\n    pathElements.forEach(pathElement => {\n      results = results[pathElement];\n    });\n    return results;\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\n\nimport { JSONSchema } from '../interfaces';\n\n@Injectable()\nexport class ComponentTypeService {\n\n  /**\n   * It returns the editor specific type of given schema\n   * In other words, which component to use for given schema.\n   *\n   * Possible values:\n   *  - string, number, boolean, object, enum\n   *  - primitive-list, table-list, complex-list\n   *  - disabled, autocomplete\n   *\n   * @param {Object} schema\n   * @return {string}\n   */\n  getComponentType(schema: JSONSchema): string {\n    if (!schema) {\n      throw new Error('schema is undefined');\n    }\n\n    const schemaType = schema.type;\n    if (!schemaType) {\n      if (Object.keys(schema).length === 0) { // if shema === {} (empty object)\n        return 'raw';\n      }\n    } else if (schemaType === 'string') {\n      if (schema.autocompletionConfig) {\n        return 'autocomplete';\n      } else if (schema.enum) {\n        return 'enum';\n      }\n    } else if (schemaType === 'object') {\n      if (schema.properties['$ref']) {\n        return 'ref';\n      }\n    } else if (schemaType === 'array') {\n      const itemSchema = schema.items;\n      if (itemSchema.type === 'object' && !itemSchema.properties['$ref']) {\n        // complex-array: if it's an object array\n        // if its elements have at least a property with object (not ref-field)\n        // or a non-primitive array.\n        const isComplexArray = Object.keys(itemSchema.properties)\n          .some(prop => {\n            const propSchema = itemSchema.properties[prop];\n            return (propSchema.type === 'object' && !propSchema.properties['$ref']) ||\n              (propSchema.type === 'array' && (propSchema.items.type === 'object' || propSchema.items.type === 'array'));\n          });\n        if (isComplexArray) {\n          return 'complex-list';\n        } else {\n          return 'table-list';\n        }\n      } else {\n        // if schema.items.type is not object!\n        return 'primitive-list';\n      }\n    }\n    // execution reaches here if schemaType is either\n    // 'number', 'integer', 'string' or something else which is currently not supported\n    return schemaType;\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\nimport * as _ from 'lodash';\nimport { Set } from 'immutable';\n\nimport { TabsConfig, JSONSchema } from '../interfaces';\nimport { PathUtilService } from './path-util.service';\n\n@Injectable()\nexport class TabsUtilService {\n\n  private schemaKeyToTabName: { [key: string]: string };\n  readonly activeTabName$: ReplaySubject<string> = new ReplaySubject<string>(1);\n\n  constructor(public pathUtilService: PathUtilService) { }\n\n  getTabNames(tabsConfig: TabsConfig): Array<string> {\n    const tabNames = tabsConfig.tabs.map(tab => tab.name);\n    // insert default tab name at the beginning\n    return [tabsConfig.defaultTabName]\n      .concat(tabNames);\n  }\n\n  getSchemaKeyToTabName(tabsConfig: TabsConfig, schema: JSONSchema): { [key: string]: string } {\n    if (!this.schemaKeyToTabName) {\n      // set tab.name for configured keys\n      const keyToTabName = tabsConfig.tabs\n        .map(tab => {\n          const keysWithTabName = {};\n          tab.properties.forEach(key => {\n            keysWithTabName[key] = tab.name;\n          });\n          return keysWithTabName;\n        }).reduce((pre, cur) => Object.assign(pre, cur));\n      // set defaultTabName for all other keys in the schema\n      Object.keys(schema.properties)\n        .filter(key => !keyToTabName[key])\n        .forEach(key => {\n          keyToTabName[key] = tabsConfig.defaultTabName;\n        });\n      this.schemaKeyToTabName = keyToTabName;\n    }\n    return this.schemaKeyToTabName;\n  }\n\n  // TODO: maybe this could be a decorator\n  selectTabIfNeeded(path: string) {\n    if (this.schemaKeyToTabName && path !== '') {\n      const tabName = this.schemaKeyToTabName[this.pathUtilService.toPathArray(path)[0]];\n      this.activeTabName$.next(tabName);\n    }\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\n\nimport { PathUtilService } from './path-util.service';\n\n@Injectable()\nexport class ListPageChangerService {\n\n  private pageChange$Map: { [path: string]: ReplaySubject<number> } = {};\n  private itemsPerPageMap: { [path: string]: number } = {};\n\n  constructor(private pathUtilService: PathUtilService) { }\n\n  /**\n   * Changes the page of the list so that requested item is visible on UI\n   * It doesn't do anything if given path's parent is not paginated list.\n   *\n   * @param itemPath path to a list item\n   */\n  changePage(fieldPath: string) {\n    const fieldPathArray = this.pathUtilService.toPathArray(fieldPath);\n    const listPathArray = this.pathUtilService.getNearestOrRootArrayParentInPath(fieldPathArray, true);\n\n    const listPath = this.pathUtilService.toPathString(listPathArray);\n    if (this.pageChange$Map[listPath]) {\n      const itemIndex = fieldPathArray[listPathArray.length];\n      const itemsPerPage = this.itemsPerPageMap[listPath];\n      const page = Math.floor((itemIndex / itemsPerPage) + 1);\n      this.pageChange$Map[listPath].next(page);\n    }\n  }\n\n  registerPaginatedList(listPath: string, itemsPerPage: number): ReplaySubject<number> {\n    this.itemsPerPageMap[listPath] = itemsPerPage;\n    this.pageChange$Map[listPath] = new ReplaySubject<number>(1);\n    return this.pageChange$Map[listPath];\n  }\n\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\n\nimport { TabsUtilService } from './tabs-util.service';\nimport { ListPageChangerService } from './list-page-changer.service';\n\nimport { JsonPatch } from '../interfaces';\n\n@Injectable()\nexport class DomUtilService {\n\n  private readonly editableSelector = '.value-container input, span[contenteditable=true], .switch-input, searchable-dropdown span.value';\n  // highlight class is defined in json-editor.component.scss\n  private readonly highlightClass = 'highlight';\n  private highlightedElement: HTMLElement;\n\n  constructor(private tabsUtilService: TabsUtilService,\n    private listPageChangerService: ListPageChangerService) { }\n\n  focusAndSelectFirstEditableChildById(id: string, highlight = false) {\n    this.tabsUtilService.selectTabIfNeeded(id);\n    this.listPageChangerService.changePage(id);\n    setTimeout(() => {\n      const el = document.getElementById(id);\n      if (el) {\n        const firstEditable = el.querySelector(this.editableSelector) as HTMLElement;\n        if (firstEditable) {\n          if (firstEditable.classList.contains('hidden')) {\n            // has latex preview, click to disable to preview\n            (firstEditable.nextElementSibling as HTMLElement).click();\n            setTimeout(() => {\n              this.focusAndSelectContent(firstEditable, highlight);\n            });\n          } else {\n            this.focusAndSelectContent(firstEditable, highlight);\n          }\n        } else {\n          // if element doesn't have any input, open add-field-dropdown if it exists.\n          this.openDropdown(el);\n        }\n      }\n    });\n  }\n\n  private focusAndSelectContent(el: HTMLElement, highlight: boolean) {\n    el.focus();\n    this.selectAllContent(el);\n    if (highlight) {\n      el.classList.add(this.highlightClass);\n      this.highlightedElement = el;\n    }\n  }\n\n  focusFirstInputChildByElement(el: HTMLElement) {\n    const firstInput = el.querySelector('input') as HTMLElement;\n    if (firstInput) {\n      firstInput.focus();\n    }\n  }\n\n  focusRightOrLeftParentCell(id: string, direction: number) {\n    const el = document.getElementById(id);\n    if (el && el.tabIndex) {\n      let elementParentCell = el.parentElement;\n      while (elementParentCell.nodeName !== 'TD') {\n        elementParentCell = elementParentCell.parentElement;\n      }\n      let nextSibling = direction > 0 ? elementParentCell.nextElementSibling : elementParentCell.previousElementSibling;\n      while (nextSibling && nextSibling.nodeName === 'TD') {\n        const inputElement = nextSibling.querySelector(`input[tabindex='1'], span[contenteditable=true][tabindex='1']`) as HTMLElement;\n        if (inputElement) {\n          inputElement.focus();\n          this.selectAllContent(inputElement);\n          break;\n        }\n        nextSibling = direction > 0 ? nextSibling.nextElementSibling : nextSibling.previousElementSibling;\n      }\n    }\n  }\n\n  blurFirstEditableChildById(id: string) {\n    const el = document.getElementById(id);\n    const firstEditable = el.querySelector(this.editableSelector) as HTMLElement;\n    if (firstEditable) {\n      firstEditable.blur();\n    }\n  }\n\n  clearHighlight() {\n    if (this.highlightedElement) {\n      this.highlightedElement.classList.remove(this.highlightClass);\n      this.highlightedElement = undefined;\n    }\n  }\n\n  focusPatch(patch: JsonPatch) {\n    this.tabsUtilService.selectTabIfNeeded(patch.path);\n    this.listPageChangerService.changePage(patch.path);\n    setTimeout(() => {\n      const el = document.getElementById(patch.path);\n      const mergeButton = el.querySelector('.btn-merge') as HTMLButtonElement;\n      if (mergeButton) {\n        mergeButton.focus();\n        mergeButton.click();\n      } else {\n        const patchActionsContainer = el.querySelector(`.${patch.op}.patch-actions-container`) as HTMLElement;\n        if (patchActionsContainer) {\n          patchActionsContainer.focus();\n        }\n      }\n    });\n  }\n\n  private selectAllContent(el: HTMLElement) {\n    if (el instanceof HTMLInputElement) {\n      el.select();\n    } else {\n      // select all content for contenteditable element.\n      const range = document.createRange();\n      range.selectNodeContents(el);\n      const sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n  }\n\n  private openDropdown(el: HTMLElement) {\n    const dropdown = el.querySelector('div.btn-group');\n    if (dropdown) {\n      const dropDownButton = dropdown.querySelector('button') as HTMLButtonElement;\n      if (dropDownButton) {\n        dropDownButton.click();\n      }\n    }\n  }\n\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\nimport { fromJS } from 'immutable';\n\nimport { JSONSchema } from '../interfaces';\n\n@Injectable()\nexport class EmptyValueService {\n\n  private static defaultValueLookup = {\n    'string': '',\n    'boolean': false\n  };\n\n  generateEmptyValue(schema: JSONSchema): any {\n    const emptyValue = this.generateEmptyValueRecursively(schema);\n    if (typeof emptyValue === 'object') {\n      return fromJS(emptyValue);\n    } else {\n      return emptyValue;\n    }\n  }\n\n  private generateEmptyValueRecursively(schema: JSONSchema): any {\n    if (schema.default) {\n      return schema.default;\n    }\n\n    if (schema.type === 'object') {\n      const emptyObject = {};\n      Object.keys(schema.properties)\n        .filter(prop => {\n          const required = schema.required || [];\n          const alwaysShow = schema.alwaysShow || [];\n          return required.indexOf(prop) > -1 || alwaysShow.indexOf(prop) > -1;\n        }).forEach(prop => {\n          const propSchema = schema.properties[prop];\n          emptyObject[prop] = this.generateEmptyValueRecursively(propSchema);\n        });\n      return emptyObject;\n    }\n\n    if (schema.type === 'array') {\n      const emptyArray = [];\n      const arrayElementSchema = schema.items;\n      if (schema.componentType !== 'complex-list') {\n        emptyArray.push(this.generateEmptyValueRecursively(arrayElementSchema));\n      }\n      return emptyArray;\n    }\n\n    return EmptyValueService.defaultValueLookup[schema.type];\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { List, Map } from 'immutable';\n\nimport { JSONSchema } from '../interfaces';\n\n@Injectable()\nexport class FindReplaceAllService {\n\n  // TODO: fix compiler errors when type of immutable `List<any> | Map<string, any>`\n  /**\n   * Does deep replace when it finds the occurance in an immutable List and Map\n   * uses schema to skip disabled properties\n   *\n   * @param {List<any> | Map<string, any} immutable\n   * @param {Object} schema\n   * @param {string} find\n   * @param {replace} replace\n   * @param {boolean} matchWhole - looks for whole match to a string property of immutable\n   * @param {Array<any> | Object} diffHtml - TODO: describe\n   */\n  findReplaceInImmutable(immutable: any, schema: JSONSchema, find: string, replace: string, exact = false, diffHtml?: Array<any> | Object):\n    { replaced: any, diffHtml: Array<any> | Object } {\n    const immutableAsMutable = immutable.asMutable();\n    const isList = List.isList(immutable);\n    // create empty array or object for the immutable to store diff\n    diffHtml = isList ? [] : {};\n    immutableAsMutable.forEach((value, key) => {\n      const innerSchema = isList ? schema.items : schema.properties[key];\n      // ignore disabled and ref fields\n      if (innerSchema.disabled || innerSchema.hidden || key === '$ref') {\n        return;\n        // TODO: is `schema.type === 'string'` better?\n      } else if (typeof value === 'string') {\n        // assign value to diff as initial, if nothing has changed it will remain same\n        let diff = value;\n        // create html diff for each possible change\n        const singleDiffHtml = `<strong style='color: green;'>${replace}</strong><del><em style='color: red;'>${find}</em></del>`;\n        if (!exact) {\n          const regExp = new RegExp(find, 'g');\n          const replaced = value.replace(regExp, replace);\n          immutableAsMutable.set(key, replaced);\n          // create diff for multiple changes in value\n          diff = diff.replace(regExp, singleDiffHtml);\n        } else if (value === find) {\n          immutableAsMutable.set(key, replace);\n          diff = singleDiffHtml;\n        }\n        diffHtml[key] = diff;\n      // TODO: is `schema.type === 'object' || schema.type === 'array'` better?\n      } else if (List.isList(value) || Map.isMap(value)) {\n        // create empty array or object for the value in diffHtml\n        const result = this.\n          findReplaceInImmutable(immutableAsMutable.get(key), innerSchema, find, replace, exact, diffHtml[key]);\n        diffHtml[key] = result.diffHtml;\n        immutableAsMutable.set(key, result.replaced);\n      }\n    });\n    return { replaced: immutableAsMutable.asImmutable(), diffHtml };\n  }\n\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nexport class SizedStack<T> {\n  private values = new Array<T>();\n  private size: number;\n\n  constructor(size: number) {\n    this.size = size;\n  }\n\n  push(value: T) {\n    this.values.push(value);\n    if (this.values.length > this.size) {\n      this.values.shift();\n    }\n  }\n\n  pop(): T {\n    return this.values.pop();\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport { Injectable } from '@angular/core';\n\nimport { JSONSchema } from '../interfaces';\nimport { PathUtilService } from './path-util.service';\n\n@Injectable()\nexport class JsonSchemaService {\n\n  private schema: JSONSchema;\n\n  constructor(private pathUtilService: PathUtilService) { }\n\n  setSchema(schema: JSONSchema) {\n    this.schema = schema;\n  }\n\n  /**\n   * Returns the schema extracted from this path\n   */\n  forPathArray(path: Array<any>): JSONSchema {\n    return path\n      .reduce<JSONSchema>((schema, pathEl) => {\n        if (isNaN(pathEl) && pathEl !== '-') {\n          return schema.properties[pathEl];\n        } else {\n          return schema.items;\n        }\n      }, this.schema);\n  }\n\n  /**\n   * Returns the schema extracted from the json-pointer string\n   */\n  forPathString(path: string): JSONSchema {\n    const pathArray = this.pathUtilService.toPathArray(path);\n    return this.forPathArray(pathArray);\n  }\n\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2018 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\n\nimport { JSONSchema } from '../interfaces';\n\n@Injectable()\nexport class CompareKeysBySchemaService {\n\n  /**\n   * @param key1 the first key\n   * @param key2 the second key\n   * @param schema schema of the parent object\n   */\n  compare(key1: string, key2: string, schema: JSONSchema): number {\n    // Sort by priority, larger is the first.\n    const priorty1 = schema.properties[key1].priority || 0;\n    const priority2 = schema.properties[key2].priority || 0;\n\n    if (priorty1 > priority2) { return -1; }\n    if (priorty1 < priority2) { return 1; }\n\n    // Sort alphabetically.\n    if (key1 < key2) { return -1; }\n    if (key1 > key2) { return 1; }\n    return 0;\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\nimport { Map, List, OrderedSet, Set, Seq } from 'immutable';\nimport { ReplaySubject } from 'rxjs';\nimport { Subject } from 'rxjs';\n\nimport { JSONSchema } from '../interfaces';\nimport { PathUtilService } from './path-util.service';\nimport { JsonSchemaService } from './json-schema.service';\nimport { AppGlobalsService } from './app-globals.service';\nimport { CompareKeysBySchemaService } from './compare-keys-by-schema.service';\n\n\n@Injectable()\nexport class KeysStoreService {\n  private keys$Map: { [path: string]: ReplaySubject<OrderedSet<string>> };\n  public keysMap: { [path: string]: OrderedSet<string> };\n  public onKeysChange = new Subject<{ path: string, keys: OrderedSet<string> }>();\n\n  constructor(private appGlobalsService: AppGlobalsService,\n    private pathUtilService: PathUtilService,\n    private jsonSchemaService: JsonSchemaService,\n    private compareKeysBySchemaService: CompareKeysBySchemaService) { }\n\n  forPath(path: string): ReplaySubject<OrderedSet<string>> {\n    return this.keys$Map[path];\n  }\n\n  /**\n   * Adds a key to the specified path.\n   *\n   * @param path path to add the key to\n   * @param key key to be added\n   * @param schema schema that belongs to path (schema.items for table-list)\n   */\n  addKey(path: string, key: string, schema: JSONSchema, value?: any): string {\n\n    // FIXME: could do O(logn) insert instead of O(nlogn) since the set is already sorted.\n    this.keysMap[path] = this.keysMap[path]\n      .add(key)\n      .sort((a, b) => this.compareKeysBySchemaService.compare(a, b, schema)) as OrderedSet<string>;\n    this.keys$Map[path].next(this.keysMap[path]);\n    this.onKeysChange.next({ path, keys: this.keysMap[path] });\n    const newKeyPath = `${path}${this.pathUtilService.separator}${key}`;\n\n    const keySchema = schema.properties[key];\n    if (keySchema.type === 'object' || keySchema.componentType === 'table-list') {\n      this.buildKeysMapRecursivelyForPath(value || Map<string, any>(), newKeyPath, keySchema);\n    }\n\n    return newKeyPath;\n  }\n\n  deletePath(path: Array<any>) {\n    const lastKey = path[path.length - 1];\n    const parentPath = this.pathUtilService.toPathString(path.slice(0, -1));\n    // don't invoke deleteKey if parentPath is primitive-list\n    if (this.keysMap[parentPath]) {\n      this.deleteKey(parentPath, lastKey);\n    }\n  }\n\n  /**\n   * Sync keys in store for the given path or its parent, grand parent etc. if necessary\n   *\n   * @param path path to the (re)set field\n   * @param json whole json\n   */\n  syncKeysForPath(path: Array<any>, json: Map<string, any>) {\n    // search from leaf to root, to find the first path with entry in keys map\n    for (let i = path.length - 1; i >= 0; i--) {\n      const currentPath = path.slice(0, i);\n      const currentPathString = this.pathUtilService.toPathString(currentPath);\n      if (this.keysMap[currentPathString]) {\n        // path[i] is key that should be added to currentPat\n        const key = path[i];\n        // if currentPath has the key\n        if (this.keysMap[currentPathString].has(key)) {\n          // just build the store keys map for that /current/path/key if it is object or array\n          const keyPath = currentPath.concat(key);\n          const keySchema = this.jsonSchemaService.forPathArray(keyPath);\n          if (keySchema.type === 'object' || keySchema.type === 'array') {\n            this.buildKeysMapRecursivelyForPath(json.getIn(keyPath), keyPath, keySchema);\n          }\n          // if currentPath doesn't have the key\n        } else {\n          const currentSchema = this.jsonSchemaService.forPathArray(currentPath);\n          // if currentPath is to a table list\n          if (currentSchema.componentType === 'table-list') {\n            // have to rebuild keys map for it because key is here an index we don't know what to add\n            this.buildKeysMapRecursivelyForPath(json.getIn(currentPath), currentPath, currentSchema);\n            // if not to a table list.\n          } else {\n            // just add the key which will build keys map for /current/path/key as well if needed\n            this.addKey(currentPathString, key, currentSchema, json.getIn(currentPath.concat(path[i])));\n          }\n        }\n        // break when a entry found for a path in keys map\n        break;\n      }\n    }\n  }\n\n  deleteKey(parentPath: string, key: string) {\n    // remove deleted one from parent\n    this.keysMap[parentPath] = this.keysMap[parentPath].delete(key);\n    this.keys$Map[parentPath].next(this.keysMap[parentPath]);\n    this.onKeysChange.next({ path: parentPath, keys: this.keysMap[parentPath] });\n    // delete keys for deleted one\n    const deletedKeyPath = `${parentPath}${this.pathUtilService.separator}${key}`;\n    delete this.keysMap[deletedKeyPath];\n    delete this.keys$Map[deletedKeyPath];\n    // delete keys for all children of the deleted one\n    const deletedKeyPathChildPrefix = deletedKeyPath + this.pathUtilService.separator;\n    Object.keys(this.keysMap)\n      .filter(path => path.startsWith(deletedKeyPathChildPrefix))\n      .forEach(childPath => {\n        delete this.keysMap[childPath];\n        delete this.keys$Map[childPath];\n      });\n  }\n\n  /**\n   * Swaps keys of given two indices in object list recursively\n   */\n  swapListElementKeys(listPath: Array<any>, index1: number, index2: number) {\n    const listSchema = this.jsonSchemaService.forPathArray(listPath);\n    if (listSchema.componentType !== 'complex-list') { return; }\n\n    const listPathString = this.pathUtilService.toPathString(listPath);\n    const ps1 = `${listPathString}${this.pathUtilService.separator}${index1}`;\n    const ps2 = `${listPathString}${this.pathUtilService.separator}${index2}`;\n    const keys1 = this.keysMap[ps1];\n    this.setKeys(ps1, this.keysMap[ps2]);\n    this.setKeys(ps2, keys1);\n    // swap children as well\n    const ps1ChildPrefix = ps1 + this.pathUtilService.separator;\n    const ps2ChildPrefix = ps2 + this.pathUtilService.separator;\n    const childrenSwaps: Array<{ from: string, to: string, keys: OrderedSet<string> }> = [];\n    Object.keys(this.keysMap)\n      .forEach(path => {\n        if (path.startsWith(ps1ChildPrefix)) {\n          const toPath = path.replace(ps1ChildPrefix, ps2ChildPrefix);\n          childrenSwaps.push({ from: path, to: toPath, keys: this.keysMap[path] });\n        } else if (path.startsWith(ps2ChildPrefix)) {\n          const toPath = path.replace(ps2ChildPrefix, ps1ChildPrefix);\n          childrenSwaps.push({ from: path, to: toPath, keys: this.keysMap[path] });\n        }\n      });\n    childrenSwaps\n      .forEach(swap => {\n        this.setKeys(swap.to, swap.keys);\n        this.onKeysChange.next({ path: swap.to, keys: this.keysMap[swap.to] });\n      });\n    childrenSwaps\n      .filter(swap => !childrenSwaps.some(otherSwap => swap.from === otherSwap.to))\n      .forEach(swap => {\n        delete this.keysMap[swap.from];\n        delete this.keys$Map[swap.from];\n      });\n  }\n\n  buildKeysMap(json: Map<string, any>, schema: JSONSchema) {\n    this.keys$Map = {};\n    this.keysMap = {};\n    this.buildKeysMapRecursivelyForPath(json, '', schema);\n  }\n\n  buildKeysMapRecursivelyForPath(mapOrList: any, path: string | Array<any>, schema?: JSONSchema) {\n    // TODO: remove this and unify typing when #330 is fixed\n    const pathString = Array.isArray(path) ? this.pathUtilService.toPathString(path) : path;\n\n    if (!schema) {\n      schema = this.jsonSchemaService.forPathString(pathString);\n    }\n\n    if (schema.type === 'object') {\n      const map = mapOrList as Map<string, any> || Map<string, any>();\n      const finalKeys = this.buildkeysForObject(pathString, map, schema);\n\n      // recursive call\n      finalKeys\n        .filter(key => this.isObjectOrArray(schema.properties[key]))\n        .forEach(key => {\n          const nextPath = `${pathString}${this.pathUtilService.separator}${key}`;\n          this.buildKeysMapRecursivelyForPath(map.get(key), nextPath, schema.properties[key]);\n        });\n    } else if (schema.componentType === 'table-list') {\n      const list = mapOrList as List<Map<string, any>> || List<Map<string, any>>();\n      this.buildKeysForTableList(pathString, list, schema);\n      // there is no recursive call for table list items because they aren't expected to have object or object list as property.\n    } else if (schema.componentType === 'complex-list') {\n      const list = mapOrList as List<Map<string, any>> || List<Map<string, any>>();\n      list.forEach((element, index) => {\n        const elementPath = `${pathString}${this.pathUtilService.separator}${index}`;\n        this.buildKeysMapRecursivelyForPath(element, elementPath, schema.items);\n      });\n    }\n  }\n\n  // default value for `list`, if this is called for alwaysShow in which case `list` would be undefined\n  private buildKeysForTableList(path: string, list = List<Map<string, any>>(), schema: JSONSchema) {\n    // get present unique keys in all items of table-list\n    const keys = Seq.Set(list\n      .map(object => object.keySeq().toArray())\n      .reduce((pre, cur) => pre.concat(cur), []));\n    const itemSchema = schema.items;\n    const finalKeys = this.schemafy(keys, itemSchema);\n    this.setKeys(path, finalKeys);\n  }\n\n  // default value for `map`, if this is called for alwaysShow in which case `map` would be undefined\n  private buildkeysForObject(path: string, map = Map<string, any>(), schema: JSONSchema): OrderedSet<string> {\n    const finalKeys = this.schemafy(map.keySeq(), schema);\n    this.setKeys(path, finalKeys);\n    return finalKeys;\n  }\n\n  /**\n   * Filters keys, add alwaysShow fields and sorts by schema.\n   */\n  private schemafy(keys: Seq<number, string>, schema: JSONSchema): OrderedSet<string> {\n    return keys\n      .concat(schema.required || [])\n      .filter(key => this.isNotHidden(key, schema) || this.appGlobalsService.adminMode)\n      .concat(schema.alwaysShow || [])\n      .sort((a, b) => this.compareKeysBySchemaService.compare(a, b, schema))\n      .toOrderedSet();\n  }\n\n  private isNotHidden(key: string, schema: JSONSchema): boolean {\n    if (!schema.properties[key]) {\n      throw new Error(`\"${key}\" is not specified as property in \\n${JSON.stringify(schema.properties, undefined, 2)}`);\n    }\n    return !schema.properties[key].hidden;\n  }\n\n  private isObjectOrArray(schema: JSONSchema): boolean {\n    return schema.type === 'object' || schema.type === 'array';\n  }\n\n  private setKeys(path: string, keys: OrderedSet<string>) {\n    this.keysMap[path] = keys;\n    if (!this.keys$Map[path]) {\n      this.keys$Map[path] = new ReplaySubject(1);\n    }\n    this.keys$Map[path].next(keys);\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\nimport { Map, List, fromJS } from 'immutable';\nimport { ReplaySubject } from 'rxjs';\nimport { Subject } from 'rxjs';\n\nimport { PathUtilService } from './path-util.service';\nimport { KeysStoreService } from './keys-store.service';\nimport { JsonPatch, JsonPatchesByPath } from '../interfaces';\nimport { SizedStack } from '../classes';\n\n@Injectable()\nexport class JsonStoreService {\n\n  readonly patchesByPath$ = new ReplaySubject<JsonPatchesByPath>(1);\n  readonly json$ = new Subject<Map<string, any>>();\n  readonly jsonPatches$ = new Subject<Array<JsonPatch>>();\n\n  private patchesByPath: JsonPatchesByPath = {};\n  private json: Map<string, any>;\n  private jsonPatches: Array<JsonPatch>;\n\n  // list of reverse patches for changes\n  private history = new SizedStack<JsonPatch>(10);\n\n  constructor(private pathUtilService: PathUtilService,\n    private keysStoreService: KeysStoreService) { }\n\n  setIn(path: Array<any>, value: any, allowUndo = true) {\n    if (value === '' || value === undefined) {\n      this.removeIn(path);\n      return;\n    }\n\n    value = this.toImmutable(value);\n\n    // immutablejs setIn creates Map for keys that don't exist in path\n    // therefore List() should be set manually for some of those keys.\n    this.setEmptyListBeforeEachIndexInPath(path);\n\n    if (allowUndo) {\n      this.pushRevertPatchToHistory(path, 'replace');\n    }\n\n    // set new value\n    this.json = this.json.setIn(path, value);\n\n    this.keysStoreService.syncKeysForPath(path, this.json);\n\n    this.json$.next(this.json);\n  }\n\n  private setEmptyListBeforeEachIndexInPath(path: Array<any>) {\n    for (let i = 0; i < path.length - 1; i++) {\n      const currentPath = path.slice(0, i + 1);\n      if (!this.json.hasIn(currentPath) && typeof path[i + 1] === 'number') {\n        this.json = this.json.setIn(currentPath, List());\n      }\n    }\n  }\n\n  getIn(path: Array<any>, notSetValue?: any): any {\n    return this.json.getIn(path, notSetValue);\n  }\n\n  removeIn(path: Array<any>) {\n    this.pushRevertPatchToHistory(path, 'add');\n\n    this.json = this.json.removeIn(path);\n    this.json$.next(this.json);\n    this.keysStoreService.deletePath(path);\n  }\n\n  private pushRevertPatchToHistory(path: Array<any>, revertOp: string) {\n    this.history.push({\n      path: this.pathUtilService.toPathString(path),\n      op: revertOp,\n      value: this.json.getIn(path)\n    });\n  }\n\n  addIn(path: Array<any>, value: any) {\n    const lastPathElement = path[path.length - 1];\n    const isInsert = typeof lastPathElement === 'number' || lastPathElement === '-';\n    if (isInsert) {\n      const pathWithoutIndex = path.slice(0, path.length - 1);\n      let list = this.getIn(pathWithoutIndex) as List<any> || List();\n      value = this.toImmutable(value);\n      if (lastPathElement === '-') {\n        list = list.push(value);\n        path[path.length - 1] = list.size - 1;\n      } else {\n        list = list.insert(lastPathElement, value);\n      }\n      // allowUndo=false to avoid creating replace history patch when adding an item to a list.\n      this.setIn(pathWithoutIndex, list, false);\n    } else {\n      this.setIn(path, value);\n    }\n  }\n\n  private toImmutable(value: any): any {\n    if (typeof value === 'object' && !(List.isList(value) || Map.isMap(value))) {\n      return fromJS(value);\n    }\n    return value;\n  }\n\n  /**\n   * Moves the element at given index UP or DOWN within the list\n   * @param listPath path to a list in json\n   * @param index index of the element that is being moved\n   * @param direction 1 for DOWN, -1 for UP movement\n   * @return new path of the moved element\n   */\n  moveIn(listPath: Array<any>, index: number, direction: number): Array<any> {\n    let list = this.getIn(listPath);\n    let newIndex = index + direction;\n    if (newIndex >= list.size || newIndex < 0) {\n      newIndex = list.size - Math.abs(newIndex);\n    }\n    const temp = list.get(index);\n    list = list\n      .set(index, list.get(newIndex))\n      .set(newIndex, temp);\n    this.setIn(listPath, list);\n\n    this.keysStoreService.swapListElementKeys(listPath, index, newIndex);\n\n    return listPath.concat(newIndex);\n  }\n\n  setJson(json: Map<string, any>) {\n    this.json = json;\n  }\n\n  setJsonPatches(patches: Array<JsonPatch>) {\n    this.patchesByPath = {};\n    patches.forEach(patch => {\n      const path = this.getComponentPathForPatch(patch);\n      if (!this.patchesByPath[path]) {\n        this.patchesByPath[path] = [];\n      }\n      this.patchesByPath[path].push(patch);\n    });\n\n    this.jsonPatches = patches;\n    this.patchesByPath$.next(this.patchesByPath);\n  }\n\n  rollbackLastChange(): string {\n    const lastChangeReversePatch = this.history.pop();\n    if (lastChangeReversePatch) {\n      this.applyPatch(lastChangeReversePatch, false);\n      return lastChangeReversePatch.path;\n    } else {\n      return undefined;\n    }\n  }\n\n  applyPatch(patch: JsonPatch, allowUndo = true) {\n    const path = this.pathUtilService.toPathArray(patch.path);\n    switch (patch.op) {\n      case 'replace':\n        this.setIn(path, patch.value, allowUndo);\n        break;\n      case 'remove':\n        this.removeIn(path);\n        break;\n      case 'add':\n      // custom type for adding a replace patch as new.\n      case 'add-as-new':\n        this.addIn(path, patch.value);\n        break;\n      default:\n        console.warn(`${patch.op} is not supported!`);\n    }\n    this.removeJsonPatch(patch);\n  }\n\n  rejectPatch(patch: JsonPatch) {\n    this.removeJsonPatch(patch);\n  }\n\n  hasPatch(path: string): boolean {\n    return this.patchesByPath[path] && this.patchesByPath[path].length > 0;\n  }\n\n  hasPatchOrChildrenHavePatch(path: string): boolean {\n    if (this.hasPatch(path)) {\n      return true;\n    }\n\n    if (this.jsonPatches) {\n      const childPathPrefix = `${path}${this.pathUtilService.separator}`;\n      return this.jsonPatches\n        .some(patch => patch.path.startsWith(childPathPrefix));\n    }\n    return false;\n  }\n\n  private removeJsonPatch(patch: JsonPatch) {\n    const path = this.getComponentPathForPatch(patch);\n    // don't do anything if it's UNDO json-patch.\n    if (this.patchesByPath[path]) {\n      const patchIndex = this.patchesByPath[path].indexOf(patch);\n      if (patchIndex > -1) {\n        this.patchesByPath[path].splice(patchIndex, 1);\n        this.patchesByPath$.next(this.patchesByPath);\n\n        const globalPatchIndex = this.jsonPatches.indexOf(patch);\n        this.jsonPatches.splice(globalPatchIndex, 1);\n        this.jsonPatches$.next(this.jsonPatches);\n      }\n    }\n  }\n\n  private getComponentPathForPatch(patch: JsonPatch): string {\n    if (patch.op === 'add') {\n      // add patches handled by parent component\n      return this.getParentPath(patch.path);\n    }\n    return patch.path;\n  }\n\n  private getParentPath(path: string): string {\n    const pathArray = this.pathUtilService.toPathArray(path);\n    const parentPathArray = pathArray.slice(0, -1);\n    return this.pathUtilService.toPathString(parentPathArray);\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\n\nimport { PathUtilService } from './path-util.service';\n\n@Injectable()\nexport class JsonUtilService {\n\n  constructor(private pathUtilService: PathUtilService) { }\n\n  /**\n   * Returns value of the property located in dot separated path of json.\n   */\n  getValueInPath(json: any, path: string): any {\n    const pathElements = this.pathUtilService.toPathArray(path);\n    let value = json;\n    pathElements.forEach(pathElement => {\n      value = value[pathElement];\n      if (!value) {\n        throw new Error(`\"${pathElement}\" of given path not defined in given json`);\n      }\n    });\n    return value;\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\n\nimport { ModalOptions } from '../interfaces';\n\n@Injectable()\nexport class ModalService {\n\n  options$: ReplaySubject<ModalOptions> = new ReplaySubject<ModalOptions>(1);\n  display$: ReplaySubject<boolean> = new ReplaySubject<boolean>(1);\n\n  displayModal(options: ModalOptions) {\n    this.options$.next(options);\n    this.display$.next(true);\n  }\n\n  closeCurrentModal() {\n    this.display$.next(false);\n  }\n\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\n\nimport { EmptyValueService } from './empty-value.service';\nimport { ComponentTypeService } from './component-type.service';\nimport { JSONSchema } from '../interfaces';\n\n@Injectable()\nexport class RecordFixerService {\n\n  constructor(private emptyValueService: EmptyValueService,\n    private componentTypeService: ComponentTypeService) { }\n\n  /**\n   * Fixes given record according to given schema, in other words\n   * changes it to match the format expected the by te json-editor\n   *\n   * @param rawRecord - json record to be fixed\n   * @param schema - extended schema of rawRecord\n   * @return - fixed record\n   */\n  fixRecord(rawRecord: object, schema: JSONSchema): object {\n    const record = Object.assign({}, rawRecord);\n    Object.keys(record).forEach(field => {\n      if (!schema.properties[field]) {\n        // Delete if field is not in schema!\n        this.deleteField(record, field);\n      } else {\n        // Fix the field and all children.\n        this.fix(field, record, schema.properties[field]);\n      }\n    });\n    return record;\n  }\n\n  /**\n   * Visits all parts of record recursivly, along with the subschema of the part\n   * and apply required fixes.\n   *\n   * NOTE: the reason that parent and key are passed instead of the direct value\n   * is to be able do some operations that needs the parent such as `delete`.\n   *\n   * TODO: add special case for arrays because fixes are the same for\n   * all elements.\n   *\n   * @param key - field name or element index\n   * @param parent - parent of the field/element\n   * @param schema - schema of visited field/element\n   */\n  private fix(key: string | number, parent: object | Array<any>, schema: JSONSchema) {\n    if (schema.hidden) {\n      return;\n    }\n\n    // Fixes for each type/condition, can be added below.\n    const value = parent[key];\n\n    // Recursive calls\n    if (schema.type === 'object') {\n      if (!schema.properties) {\n        throw new Error(`\"${key}\"'s schema has \"type\": \"object\" but doesn't specify \"properties\"`);\n      } else if (!(value instanceof Object)) {\n        throw new Error(`\"${key}\" in ${JSON.stringify(value, null, 2)} is specified as \"object\" by schema but it is not an object in json`);\n      }\n      // Looping over record to filter out fields that are not in schema.\n      Object.keys(value).forEach(prop => {\n        if (!schema.properties[prop]) {\n          // we don't like fields without schema!\n          this.deleteField(value, prop);\n        } else {\n          this.fix(prop, value, schema.properties[prop]);\n        }\n      });\n    } else if (schema.type === 'array') {\n      if (!schema.items) {\n        throw new Error(`\"${key}\"'s schema has \"type\": \"array\" but doesn't specify \"items\"`);\n      } else if (!Array.isArray(value)) {\n        throw new Error(`\"${key}\" in ${JSON.stringify(value, null, 2)} is specified as \"array\" by schema but it is not an array in json`);\n      }\n      value.forEach((element, index) => {\n        this.fix(index, value, schema.items);\n      });\n    }\n  }\n\n  /**\n   * Deletes given field from the given object.\n   * Used for deleting fields that aren't on the schema.\n   *\n   * TODO: replace this with only `delete` when logging is not necessary!\n   */\n  private deleteField(object: object, field: string) {\n    delete object[field];\n    console.warn(`\"${field}\" is removed from input json since it's not in the schema`);\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\nimport * as _ from 'lodash';\n\nimport { JsonUtilService } from './json-util.service';\nimport { ComponentTypeService } from './component-type.service';\nimport { JSONSchema, SchemaOptions } from '../interfaces';\n\n@Injectable()\nexport class SchemaFixerService {\n\n  constructor(private jsonUtilService: JsonUtilService,\n    private componentTypeService: ComponentTypeService) { }\n\n  /**\n   * Fixes schema to be in a format that expected by json-editor\n   *\n   * @param schema - json schema\n   * @param config - schema specific options\n   * @return - fixed schema\n   */\n  fixSchema(originalSchema: JSONSchema, config?: SchemaOptions): JSONSchema {\n    let schema = _.cloneDeep(originalSchema);\n    if (config) {\n      schema = this.enrichSchemaWithConfig(schema, config);\n    }\n    schema = this.fixRecursively(schema);\n    return schema;\n  }\n\n  /**\n   * Enriches given schema with given configuration objects\n   * puts config into correct places in schema.\n   *\n   * @param schema - json schema\n   * @param config - schema specific options\n   */\n  private enrichSchemaWithConfig(schema: JSONSchema, config: SchemaOptions): JSONSchema {\n    return _.mergeWith(schema, config, (currentSchema, currentConfig, key) => {\n      if ((key === 'properties' || key === 'items') && !currentSchema) {\n        console.warn(`config => ${JSON.stringify(currentConfig, (configKey, value) => {\n          if (typeof value === 'function') {\n            return 'ƒ()';\n          }\n          return value;\n        }, 2)} should not be under \"${key}\" because schema does not have \"${key}\"`);\n        // cancel merge to avoid creating broken json schema\n        return null;\n      }\n      if (currentSchema && key === 'properties') {\n        const configKeys = Object.keys(currentConfig);\n        configKeys\n          .filter(configKey => !currentSchema[configKey])\n          .forEach(wrongConfigKey => {\n            delete currentConfig[wrongConfigKey];\n            console.warn(wrongConfigKey);\n          });\n      }\n    });\n  }\n\n  /**\n   * Applies all fixes to schema recursively\n   */\n  private fixRecursively(schema: JSONSchema): JSONSchema {\n    if (schema.anyOf) {\n      schema = this.fixAnyOf(schema);\n    } else if (schema.allOf) {\n      schema = this.fixAllOf(schema);\n    }\n    if (schema.order) {\n      schema = this.fixOrder(schema);\n    }\n    if (schema.disabled) {\n      schema = this.fixDisabled(schema);\n    }\n    if (schema.alwaysShow) {\n      schema = this.fixAlwaysShow(schema);\n    }\n    if (schema.alwaysShowRegExp) {\n      schema = this.fixAlwaysShowRegExp(schema);\n    }\n    // schema fixes must be done above\n\n    // recursively call for deeper parts of schema\n    if (schema.properties) {\n      Object.keys(schema.properties)\n        .forEach(prop => {\n          schema.properties[prop] = this.fixRecursively(schema.properties[prop]);\n        });\n    } else if (schema.items) {\n      schema.items = this.fixRecursively(schema.items);\n    }\n    // fixes that needs above fixes to be done deeply for the current schema\n    schema.componentType = this.componentTypeService.getComponentType(schema);\n\n    return schema;\n  }\n\n  /**\n   * Fixes disabled config to assign the disabled attribute\n   * to array items or object properties\n   */\n  private fixDisabled(schema: JSONSchema): JSONSchema {\n    if (schema.items) {\n      schema.items.disabled = true;\n    } else if (schema.properties) {\n      Object.keys(schema.properties)\n        .forEach(prop => {\n          schema.properties[prop].disabled = true;\n        });\n    }\n    return schema;\n  }\n\n  /**\n   * Fixes order config to assign the right priority to properties\n   */\n  private fixOrder(schema: JSONSchema): JSONSchema {\n    const order: Array<string> = schema.order;\n    order.forEach((orderKey: string, index: number) => {\n      const priority = order.length - index;\n      if (orderKey in schema.properties) {\n        schema.properties[orderKey].priority = priority;\n      } else {\n        console.warn(`${orderKey} defined in order config does not exist in schema.`);\n      }\n    });\n    return schema;\n  }\n\n  /**\n   * Fixes anyOf schemas with exactly same property structure\n   * it merges all enum fields in anyOf elements\n   */\n  private fixAnyOf(schema: JSONSchema): JSONSchema {\n    const anyOf = schema.anyOf;\n\n    // find existence count of all enum properties in anyOf elements\n    // the reason of this, a field could be enum type for some and not for some other anyOf element\n    const enumPropCount = {};\n    anyOf.forEach(anyOfElement => {\n      Object.keys(anyOfElement.properties)\n        .filter(prop => anyOfElement.properties[prop].enum)\n        .forEach(prop => {\n          if (!enumPropCount[prop]) {\n            enumPropCount[prop] = 0;\n          }\n          enumPropCount[prop]++;\n        });\n    });\n\n    // combine all enum arrays in anyOf elements\n    const enums = {};\n    Object.keys(enumPropCount)\n      .forEach(prop => {\n        anyOf.forEach(anyOfElement => {\n          if (!enums[prop]) {\n            enums[prop] = [];\n          }\n          const enumValues = anyOfElement.properties[prop].enum;\n          // check if current field is enum for current anyOf element\n          if (enumValues) {\n            enums[prop] = enums[prop].concat(enumValues);\n          }\n        });\n      });\n\n    const fixedSchema = anyOf[0];\n    // shallow cleaning of format and pattern\n    Object.keys(fixedSchema.properties)\n      .forEach(prop => {\n        delete fixedSchema.properties[prop].format;\n        delete fixedSchema.properties[prop].pattern;\n      });\n\n    Object.keys(enumPropCount)\n      .forEach(prop => {\n        const uniqueEnumValues = Array.from(new Set(enums[prop])) as Array<string>;\n        // if a field enum for all anyOf elements\n        if (enumPropCount[prop] === anyOf.length) {\n          // merge all enum values into one\n          fixedSchema.properties[prop].enum = uniqueEnumValues;\n          // if a field enum for some of anyOf elements\n        } else {\n          // create a autocomplete config so that it will allow any values\n          // but autocomplete from enum values from where the field is defined as enum\n          delete fixedSchema.properties[prop].enum;\n          fixedSchema.properties[prop].autocompletionConfig = {\n            source: uniqueEnumValues,\n            size: 7\n          };\n        }\n      });\n    // copy disabled attribute inside fixedSchema because it\n    // is outside anyOf element and is ignored\n    if (schema.disabled) {\n      fixedSchema.disabled = true;\n    }\n    return fixedSchema;\n  }\n\n  private fixAllOf(schema: JSONSchema): JSONSchema {\n    return _.merge({}, ...schema.allOf) as JSONSchema;\n  }\n\n  /**\n   * Adds keys that matches `alwaysShowRegExp` to `alwaysShow`.\n   * Passes `alwaysShowRegExp` down to children so that it is applied recursively.\n   */\n  private fixAlwaysShowRegExp(schema: JSONSchema): JSONSchema {\n    if (!schema.alwaysShow) {\n      schema.alwaysShow = [];\n    }\n    Object.keys(schema.properties)\n      .forEach(key => {\n        // pass alwaysShowRegExp down to apply it recursively.\n        const subSchema = schema.properties[key];\n        if (subSchema.type === 'object') {\n          subSchema.alwaysShowRegExp = schema.alwaysShowRegExp;\n        }\n\n        if (key.search(schema.alwaysShowRegExp) > -1) {\n          schema.alwaysShow.push(key);\n        }\n      });\n    return schema;\n  }\n\n  /**\n   * Removes alwayShow fields that aren't in the schema.properties\n   * and warns on console.\n   */\n  private fixAlwaysShow(schema: JSONSchema): JSONSchema {\n    const alwaysShow = schema.alwaysShow;\n    schema.alwaysShow = alwaysShow.filter(key => {\n      if (schema.properties[key]) {\n        return true;\n      } else {\n        console.warn(`${key} is configured as alwaysShow but it is not in ${JSON.stringify(Object.keys(schema.properties))}`);\n      }\n    });\n    return schema;\n  }\n\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\nimport * as Ajv from 'ajv';\nimport * as enableCustomErrorMessages from 'ajv-errors';\n\nimport { AppGlobalsService } from './app-globals.service';\nimport { JSONSchema, ValidationProblem } from '../interfaces';\n\n@Injectable()\nexport class SchemaValidationService {\n\n  // `jsonPointer: true` is required for `avj-errors` package\n  private ajv = new Ajv({ allErrors: true, jsonPointers: true });\n\n  // https://gist.github.com/dperini/729294\n  private reWebUrl = new RegExp(\n    '^' +\n    // protocol identifier\n    '(?:(?:https?|ftp)://)' +\n    // user:pass authentication\n    '(?:\\\\S+(?::\\\\S*)?@)?' +\n    '(?:' +\n    // IP address exclusion\n    // private & local networks\n    '(?!(?:10)(?:\\\\.\\\\d{1,3}){3})' +\n    '(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})' +\n    '(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})' +\n    // IP address dotted notation octets\n    // excludes loopback network 0.0.0.0\n    // excludes reserved space >= 224.0.0.0\n    // excludes network & broacast addresses\n    // (first & last IP address of each class)\n    '(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])' +\n    '(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}' +\n    '(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))' +\n    '|' +\n    'localhost' +\n    '|' +\n    // host name\n    '(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)' +\n    // domain name\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*' +\n    // TLD identifier\n    '(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))' +\n    // TLD may end with dot\n    '\\\\.?' +\n    ')' +\n    // port number\n    '(?::\\\\d{2,5})?' +\n    // resource path\n    '(?:[/?#]\\\\S*)?' +\n    '$', 'i'\n  );\n\n  constructor(public appGlobalsService: AppGlobalsService) {\n    enableCustomErrorMessages(this.ajv);\n\n    //  ajv didn't support format:url, so was added using web url regex for validation\n    this.ajv.addFormat('url', this.reWebUrl);\n    if (this.appGlobalsService.config && this.appGlobalsService.config.customFormatValidation) {\n      const customFormats = this.appGlobalsService.config.customFormatValidation;\n\n      Object.keys(customFormats).forEach(key => {\n        this.ajv.addFormat(key, customFormats[key].formatChecker);\n      });\n    }\n  }\n\n  /**\n   * Validates a specific value against schema\n   *\n   * Uses: ajv package for json-schema validation\n   *\n   */\n  validateValue(value: any, schema: JSONSchema): Array<ValidationProblem> {\n    const validationErrors = [];\n\n    if (!this.ajv.validate(schema, value)) {\n      this.ajv.errors.forEach(error => {\n        validationErrors.push({\n          message: error.message,\n          type: 'Error'\n        });\n      });\n    }\n    return validationErrors;\n  }\n\n}\n\n\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport { Injectable } from '@angular/core';\nimport { List } from 'immutable';\n\nimport { EmptyValueService } from './empty-value.service';\nimport { JsonStoreService } from './json-store.service';\nimport { JsonSchemaService } from './json-schema.service';\nimport { DomUtilService } from './dom-util.service';\nimport { PathUtilService } from './path-util.service';\nimport { KeysStoreService } from './keys-store.service';\nimport { JSONSchema, ShortcutActionFunction } from '../interfaces';\n\n@Injectable()\nexport class ShortcutActionService {\n\n  constructor(public emptyValueService: EmptyValueService,\n    public domUtilService: DomUtilService,\n    public jsonStoreService: JsonStoreService,\n    public jsonSchemaService: JsonSchemaService,\n    public pathUtilService: PathUtilService,\n    public keysStoreService: KeysStoreService) { }\n\n  addToRootAction(path: Array<any>): void {\n    this.add(path, true);\n  }\n\n  addAction(path: Array<any>): void {\n    this.add(path, false);\n  }\n\n  private add(path: Array<any>, root: boolean): void {\n    const _path = this.pathUtilService.getNearestOrRootArrayParentInPath(path, root);\n    this.addNewElementInArray(_path, this.jsonSchemaService.forPathArray(_path));\n  }\n\n  /**\n   * @param path - Path of the array parent that the element is about to be inserted\n   * @param schema - Schema of the element that is about to be inserted\n   */\n  private addNewElementInArray(path: Array<any>, schema: JSONSchema) {\n    const itemSchema = schema.items;\n    const emptyValue = this.emptyValueService.generateEmptyValue(itemSchema);\n    const values = this.jsonStoreService.getIn(path) || List();\n    this.jsonStoreService.setIn(path, values.push(emptyValue));\n    path.push(values.size);\n    this.waitThenFocus(this.pathUtilService.toPathString(path));\n  }\n\n  addBelowToRootAction(path: Array<any>): void {\n    const rootPath = this.pathUtilService.getNearestOrRootArrayParentInPath(path, true);\n    const schema = this.jsonSchemaService.forPathArray(rootPath);\n    const itemSchema = schema.items;\n    const emptyValue = this.emptyValueService.generateEmptyValue(itemSchema);\n    const values = this.jsonStoreService.getIn(rootPath) || List();\n    this.jsonStoreService.setIn(rootPath, values.insert(path[1] + 1, emptyValue));\n    rootPath.push(path[1] + 1);\n    this.waitThenFocus(this.pathUtilService.toPathString(rootPath));\n  }\n\n  moveUpAction(path: Array<any>): void {\n    this.move(path, -1);\n  }\n\n  moveDownAction(path: Array<any>): void {\n    this.move(path, 1);\n  }\n\n  moveUpRootAction(path: Array<any>): void {\n    this.move(path, -1, true);\n  }\n\n  moveDownRootAction(path: Array<any>): void {\n    this.move(path, 1, true);\n  }\n\n  /**\n   * @param path - Path of the element that is moved\n   * @param direction - Movement direction. -1 for UP, +1 for DOWN\n   */\n  private move(path: Array<any>, direction: number, root = false): void {\n    this.domUtilService.blurFirstEditableChildById(this.pathUtilService.toPathString(path));\n    const index = this.pathUtilService.getElementIndexInForwardOrReversePath(path, root);\n    path = this.jsonStoreService.moveIn(this.pathUtilService.getNearestOrRootArrayParentInPath(path, root), index, direction);\n    const pathString = this.pathUtilService.toPathString(path);\n    this.waitThenFocus(pathString);\n  }\n\n  deleteAction(path: Array<any>) {\n    // blur element before delete for ensuring that `commitValueChange` will not show again the deleted value\n    this.domUtilService.blurFirstEditableChildById(this.pathUtilService.toPathString(path));\n    this.deleteElement(this.pathUtilService.getNearestOrRootArrayParentInPath(path, false),\n      this.pathUtilService.getElementIndexInForwardOrReversePath(path, false));\n  }\n\n  /**\n   * @param path - Path of the element's array parent\n   * @param index - Index of the element that is deleted from array parent path\n   */\n  private deleteElement(path: Array<any>, index: number) {\n    const values = this.jsonStoreService.getIn(path);\n    this.jsonStoreService.setIn(path, values.remove(index));\n  }\n\n  navigateUpAction(path: Array<any>): void {\n    this.navigateUpDown(path, -1);\n  }\n\n  navigateDownAction(path: Array<any>): void {\n    this.navigateUpDown(path, 1);\n  }\n\n  /**\n   * @param path - Path of the element that is focused\n   * @param direction - Navigation direction. -1 for UP, +1 for DOWN\n   */\n  private navigateUpDown(path: Array<any>, direction: number) {\n    const values = this.jsonStoreService.getIn(this.pathUtilService.getNearestOrRootArrayParentInPath(path, false));\n    if (List.isList(values)) {\n      const elemIndexInPath = this.pathUtilService.getElementIndexInForwardOrReversePath(path, true);\n      if ((elemIndexInPath + direction) < values.size && (elemIndexInPath + direction) >= 0) {\n        path[path.length - 2] = elemIndexInPath + direction;\n      } else {\n        path[path.length - 2] = values.size - Math.abs((elemIndexInPath + direction));\n      }\n      const pathString = this.pathUtilService.toPathString(path);\n      this.domUtilService.focusAndSelectFirstEditableChildById(pathString);\n    }\n  }\n\n  navigateLeftAction(path: Array<any>): void {\n    this.navigateRightLeft(path, -1);\n  }\n\n  navigateRightAction(path: Array<any>): void {\n    this.navigateRightLeft(path, 1);\n  }\n\n  /**\n   * @param path - Path of the element that is focused\n   * @param direction - Navigation direction. -1 for LEFT, +1 for RIGHT\n   */\n  private navigateRightLeft(path: Array<any>, direction: number) {\n    const pathString = this.pathUtilService.toPathString(path);\n    this.domUtilService.focusRightOrLeftParentCell(pathString, direction);\n  }\n\n  /**\n   * Copies the current row in table below and sets the value of the previous focused field to empty in the new row\n   * @param path - Path\n   */\n  copyAction(path: Array<any>) {\n    this.copyRowOrSchemaBelow(path, false);\n  }\n\n  /**\n   * Copies the root parent element below(eg creates a new author in authors list)\n   * when you edit an author's field)\n   * @param path - Path\n   */\n  copyFromRootAction(path: Array<any>) {\n    this.copyRowOrSchemaBelow(path, true);\n  }\n\n  /**\n   * @param originalPath - Path of the element that is copied\n   * @param root - Copy item from parent or root. Set to true for usage as in `copyFromRootAction` and false\n   * for usage as in `copyAction`\n   */\n  private copyRowOrSchemaBelow(originalPath: Array<any>, root: boolean) {\n    const arrayParentPath = this.pathUtilService.getNearestOrRootArrayParentInPath(originalPath, root);\n    if (this.jsonSchemaService.forPathArray(arrayParentPath)['items'].hasOwnProperty('properties')) {\n      const elemIndex = this.pathUtilService.getElementIndexInForwardOrReversePath(originalPath, root);\n      const valuesList = this.jsonStoreService.getIn(arrayParentPath) || List();\n      let newValue = valuesList.get(elemIndex);\n      const newPath = arrayParentPath.concat(elemIndex + 1);\n      let newPathString = this.pathUtilService.toPathString(newPath);\n      if (!root) {\n        newValue = newValue.set(originalPath[originalPath.length - 1]);\n        newPathString = `${newPathString}${this.pathUtilService.separator}${originalPath[originalPath.length - 1]}`;\n      }\n      this.jsonStoreService.setIn(arrayParentPath, valuesList.insert(elemIndex + 1, newValue));\n      this.waitThenFocus(newPathString);\n    }\n  }\n\n  undoAction() {\n    const rolledBackPath = this.jsonStoreService.rollbackLastChange();\n    if (rolledBackPath) {\n      this.waitThenFocus(rolledBackPath);\n    }\n  }\n\n  private waitThenFocus(path: string) {\n    setTimeout(() => {\n      this.domUtilService.focusAndSelectFirstEditableChildById(path, true);\n    });\n  }\n\n  generateShortcutAction(actionName: string): ShortcutActionFunction {\n\n    return (event: KeyboardEvent) => {\n      event.preventDefault();\n      const eventTarget = event.target as HTMLInputElement;\n      const pathString = eventTarget.getAttribute('data-path');\n      if (pathString) {\n        this[actionName](this.pathUtilService.toPathArray(pathString));\n      }\n      return false;\n    };\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class WindowHrefService {\n  // initial value is set to avoid ngc error.\n  readonly hrefWithoutHash: string;\n\n  constructor() {\n    this.hrefWithoutHash = this.getHrefWithoutHash();\n  }\n\n  private getHrefWithoutHash(): string {\n    const href = window.location.href;\n    const lastHashIndex = href.lastIndexOf('#');\n    if (lastHashIndex > 0) {\n      return href.substring(0, lastHashIndex);\n    } else {\n       return href;\n    }\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport { Injectable } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\nimport { Observable } from 'rxjs';\nimport { combineLatest } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\n\nimport {\n  SchemaValidationProblems,\n  CategorizedValidationProblems,\n  ValidationProblem,\n  ProblemCollectionType,\n  ProblemCount\n} from '../interfaces';\n\n@Injectable()\nexport class ProblemsService {\n\n  readonly externalCategorizedProblems$ = new ReplaySubject<CategorizedValidationProblems>(1);\n  readonly internalCategorizedProblems$ = new ReplaySubject<CategorizedValidationProblems>(1);\n\n  private readonly externalProblemCount$ = new ReplaySubject<ProblemCount>(1);\n  private readonly internalProblemCount$ = new ReplaySubject<ProblemCount>(1);\n  readonly errorCount$ = this.getTotalDistinctProblemCount$ForType('errors');\n  readonly warningCount$ = this.getTotalDistinctProblemCount$ForType('warnings');\n\n  readonly internalProblemMap$ = new ReplaySubject<SchemaValidationProblems>(1);\n  private internalProblemMap: SchemaValidationProblems = {};\n\n  private internalCategorizedProblemMap: CategorizedValidationProblems = { errors: {}, warnings: {} };\n  private externalCategorizedProblemMap: CategorizedValidationProblems = { errors: {}, warnings: {} };\n\n  private externalProblemCount = { errors: 0, warnings: 0 };\n  private internalProblemCount = { errors: 0, warnings: 0 };\n\n  constructor() {\n    // set default counts to components\n    this.externalProblemCount$.next(this.externalProblemCount);\n    this.internalProblemCount$.next(this.internalProblemCount);\n  }\n\n  private getTotalDistinctProblemCount$ForType(type: ProblemCollectionType): Observable<number> {\n    const external$ = this.externalProblemCount$\n      .pipe(map(counts => counts[type]));\n    const internal$ = this.internalProblemCount$\n      .pipe(map(counts => counts[type]));\n    return combineLatest(external$, internal$, (external, internal) => external + internal)\n      .pipe(distinctUntilChanged());\n  }\n\n  set externalProblems(problems: SchemaValidationProblems) {\n    const { categorizedProblemMap, errorCount, warningCount } = this.categorizeProblemMap(problems);\n\n    this.externalProblemCount = { errors: errorCount, warnings: warningCount };\n    this.externalProblemCount$.next(this.externalProblemCount);\n\n    this.externalCategorizedProblemMap = categorizedProblemMap;\n    this.externalCategorizedProblems$.next(this.externalCategorizedProblemMap);\n  }\n\n  setInternalProblemsForPath(path: string, problems: Array<ValidationProblem>) {\n    this.internalProblemMap[path] = problems;\n    this.internalProblemMap$.next(this.internalProblemMap);\n\n    const categorizedProblems = this.categorizeValidationProblems(problems);\n\n    this.internalProblemCount.errors += categorizedProblems.errors.length - this.internalProblemCountForPath(path, 'errors');\n    this.internalProblemCount.warnings += categorizedProblems.warnings.length - this.internalProblemCountForPath(path, 'warnings');\n    this.internalProblemCount$.next(this.internalProblemCount);\n\n    this.internalCategorizedProblemMap.errors[path] = categorizedProblems.errors;\n    this.internalCategorizedProblemMap.warnings[path] = categorizedProblems.warnings;\n    this.internalCategorizedProblems$.next(this.internalCategorizedProblemMap);\n  }\n\n  private internalProblemCountForPath(path: string, type: ProblemCollectionType): number {\n    if (this.internalCategorizedProblemMap[type][path]) {\n      return this.internalCategorizedProblemMap[type][path].length;\n    }\n    return 0;\n  }\n\n  hasProblem(path: string): boolean {\n    const internalProblems = this.internalCategorizedProblemMap.errors[path];\n    const externalProblems = this.externalCategorizedProblemMap.errors[path];\n    const internalProblemCount = internalProblems ? internalProblems.length : 0;\n    const externalProblemCount = externalProblems ? externalProblems.length : 0;\n    return (internalProblemCount + externalProblemCount) > 0;\n  }\n\n  private categorizeProblemMap(problemMap: SchemaValidationProblems): {\n    categorizedProblemMap: CategorizedValidationProblems,\n    errorCount: number, warningCount: number\n  } {\n    const categorizedProblemMap = { errors: {}, warnings: {} };\n    let errorCount = 0;\n    let warningCount = 0;\n\n    Object.keys(problemMap)\n      .map(path => {\n        const validationProblems = problemMap[path];\n        const categorized = this.categorizeValidationProblems(validationProblems);\n        return { path, categorized };\n      }).forEach(problemsForPath => {\n        categorizedProblemMap.errors[problemsForPath.path] = problemsForPath.categorized.errors;\n        categorizedProblemMap.warnings[problemsForPath.path] = problemsForPath.categorized.warnings;\n        errorCount += problemsForPath.categorized.errors.length;\n        warningCount += problemsForPath.categorized.warnings.length;\n      });\n    return { categorizedProblemMap, errorCount, warningCount };\n  }\n\n  private categorizeValidationProblems(validationProblems: Array<ValidationProblem>) {\n    const categorized: { errors: Array<ValidationProblem>, warnings: Array<ValidationProblem> }\n      = { errors: [], warnings: [] };\n    validationProblems.forEach(error => {\n      if (error.type === 'Error') {\n        categorized.errors.push(error);\n      } else {\n        categorized.warnings.push(error);\n      }\n    });\n    return categorized;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { List, Map } from 'immutable';\nimport { render, ParseError } from 'katex';\n\nimport { JSONSchema, KatexData } from '../interfaces';\n\n@Injectable()\nexport class KatexService {\n  private delimiters = [\n    { left: '$$', right: '$$', display: true },\n    { left: '$', right: '$', display: false },\n    // FIXME check if we need the ones below\n    { left: '\\\\[', right: '\\\\]', display: true },\n    { left: '\\\\(', right: '\\\\)', display: false },\n  ];\n\n  /**\n  *\n  * Receives text that can contain LaTeX formulas. The formulas will be\n  * identified using `this.delimiters` and rendered inside the passed\n  * HTMLElement\n  *\n  * NOTE: The HTMLElement is expected to have a single child and this\n  * will be replaced by the HTML with formatted LaTeX\n  *\n  * @param {string} text - text to be formatted with LaTeX\n  * @param {HTMLElement} el - the HTMLElement where the LaTeX should be rendered\n  */\n  renderMathInText(text: string, el: HTMLElement) {\n    const data: Array<KatexData> = this.splitWithDelimiters(text, this.delimiters);\n\n    const fragment = document.createDocumentFragment();\n\n    for (let i = 0; i < data.length; i++) {\n      if (data[i].type === 'text') {\n        fragment.appendChild(document.createTextNode(data[i].data));\n      } else {\n        const span = document.createElement('span');\n        const math = data[i].data;\n        try {\n          render(math, span, {\n            displayMode: data[i].display,\n          });\n        } catch (e) {\n          if (!(e instanceof ParseError)) {\n            throw e;\n          }\n          console.error(\n            `KaTeX auto-render: Failed to parse ${data[i].data} with ${e}`\n          );\n          fragment.appendChild(document.createTextNode(data[i].rawData));\n          continue;\n        }\n        fragment.appendChild(span);\n      }\n    }\n    // clear\n    el.innerHTML = '';\n    el.appendChild(fragment);\n  }\n\n  private findEndOfMath(delimiter: string, text: string, startIndex: number): number {\n    // Adapted from\n    // https://github.com/Khan/perseus/blob/master/src/perseus-markdown.jsx\n    let index = startIndex;\n    let braceLevel = 0;\n\n    const delimLength = delimiter.length;\n\n    while (index < text.length) {\n      const character = text[index];\n\n      if (braceLevel <= 0 &&\n        text.slice(index, index + delimLength) === delimiter) {\n        return index;\n      } else if (character === '\\\\') {\n        index++;\n      } else if (character === '{') {\n        braceLevel++;\n      } else if (character === '}') {\n        braceLevel--;\n      }\n\n      index++;\n    }\n\n    return -1;\n  }\n\n  private splitAtDelimiters(startData: Array<KatexData>, leftDelim: string, rightDelim: string, display: boolean): Array<KatexData> {\n    const finalData = [];\n\n    for (let i = 0; i < startData.length; i++) {\n      if (startData[i].type === 'text') {\n        const text = startData[i].data;\n\n        let lookingForLeft = true;\n        let currIndex = 0;\n        let nextIndex;\n\n        nextIndex = text.indexOf(leftDelim);\n        if (nextIndex !== -1) {\n          currIndex = nextIndex;\n          finalData.push({\n            type: 'text',\n            data: text.slice(0, currIndex),\n          });\n          lookingForLeft = false;\n        }\n\n        while (true) {\n          if (lookingForLeft) {\n            nextIndex = text.indexOf(leftDelim, currIndex);\n            if (nextIndex === -1) {\n              break;\n            }\n\n            finalData.push({\n              type: 'text',\n              data: text.slice(currIndex, nextIndex),\n            });\n\n            currIndex = nextIndex;\n          } else {\n            nextIndex = this.findEndOfMath(\n              rightDelim,\n              text,\n              currIndex + leftDelim.length);\n            if (nextIndex === -1) {\n              break;\n            }\n\n            finalData.push({\n              type: 'math',\n              data: text.slice(\n                currIndex + leftDelim.length,\n                nextIndex),\n              rawData: text.slice(\n                currIndex,\n                nextIndex + rightDelim.length),\n              display: display,\n            });\n\n            currIndex = nextIndex + rightDelim.length;\n          }\n\n          lookingForLeft = !lookingForLeft;\n        }\n\n        finalData.push({\n          type: 'text',\n          data: text.slice(currIndex),\n        });\n      } else {\n        finalData.push(startData[i]);\n      }\n    }\n\n    return finalData;\n  }\n\n  private splitWithDelimiters(text, delimiters): Array<KatexData> {\n    let data = [{ type: 'text', data: text }];\n    for (let i = 0; i < delimiters.length; i++) {\n      const delimiter = delimiters[i];\n      data = this.splitAtDelimiters(\n        data, delimiter.left, delimiter.right,\n        delimiter.display || false);\n    }\n    return data;\n  }\n\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport { Injectable } from '@angular/core';\nimport { diffWords, IDiffResult } from 'diff';\n\n@Injectable()\nexport class TextDiffService {\n  diffByWord(currentText: string, newText = ''): Array<IDiffResult> {\n    return diffWords(currentText, newText);\n  }\n}\n","import { AppGlobalsService } from './app-globals.service';\nimport { RemoteAutocompletionService } from './remote-autocompletion.service';\nimport { ComponentTypeService } from './component-type.service';\nimport { DomUtilService } from './dom-util.service';\nimport { EmptyValueService } from './empty-value.service';\nimport { FindReplaceAllService } from './find-replace-all.service';\nimport { JsonStoreService } from './json-store.service';\nimport { JsonUtilService } from './json-util.service';\nimport { JsonSchemaService } from './json-schema.service';\nimport { KeysStoreService } from './keys-store.service';\nimport { PathUtilService } from './path-util.service';\nimport { ModalService } from './modal.service';\nimport { RecordFixerService } from './record-fixer.service';\nimport { SchemaFixerService } from './schema-fixer.service';\nimport { SchemaValidationService } from './schema-validation.service';\nimport { ShortcutActionService } from './shortcut-action.service';\nimport { WindowHrefService } from './window-href.service';\nimport { TabsUtilService } from './tabs-util.service';\nimport { ProblemsService } from './problems.service';\nimport { KatexService } from './katex.service';\nimport { TextDiffService } from './text-diff.service';\nimport { ListPageChangerService } from './list-page-changer.service';\nimport { CompareKeysBySchemaService } from './compare-keys-by-schema.service';\n\nexport {\n  AppGlobalsService,\n  RemoteAutocompletionService,\n  ComponentTypeService,\n  DomUtilService,\n  EmptyValueService,\n  FindReplaceAllService,\n  JsonStoreService,\n  JsonUtilService,\n  JsonSchemaService,\n  KeysStoreService,\n  PathUtilService,\n  ModalService,\n  RecordFixerService,\n  SchemaFixerService,\n  SchemaValidationService,\n  ShortcutActionService,\n  WindowHrefService,\n  TabsUtilService,\n  ProblemsService,\n  KatexService,\n  TextDiffService,\n  ListPageChangerService,\n  CompareKeysBySchemaService\n};\n\nexport const SHARED_SERVICES = [\n  AppGlobalsService,\n  RemoteAutocompletionService,\n  ComponentTypeService,\n  DomUtilService,\n  EmptyValueService,\n  FindReplaceAllService,\n  JsonStoreService,\n  JsonUtilService,\n  KeysStoreService,\n  JsonSchemaService,\n  PathUtilService,\n  ModalService,\n  RecordFixerService,\n  SchemaFixerService,\n  SchemaValidationService,\n  ShortcutActionService,\n  WindowHrefService,\n  TabsUtilService,\n  ProblemsService,\n  KatexService,\n  TextDiffService,\n  ListPageChangerService,\n  CompareKeysBySchemaService\n];\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport {\n  ElementRef,\n  Directive,\n  Input,\n  OnChanges,\n  OnDestroy,\n  SimpleChanges\n} from '@angular/core';\n\nimport { MousetrapInstance,\nMousetrap } from 'mousetrap';\n\nimport { ShortcutActionService } from '../services';\nimport { Shortcut, CustomShortcutKeys } from '../interfaces';\n\n@Directive({\n  selector: '[shortcuts]'\n})\nexport class ShortcutsDirective implements OnDestroy, OnChanges {\n  // custom shortcut keys\n  @Input() shortcuts: CustomShortcutKeys;\n\n  // actions with default shortcut keys, update with the custom keys later\n  private readonly actionNameToShortcut: { [actionName: string]: Shortcut } = {\n    add: {\n      key: 'alt+a',\n      action: this.shortcutActionService.generateShortcutAction('addAction')\n    },\n    addToRoot: {\n      key: 'mod+shift+a',\n      action: this.shortcutActionService.generateShortcutAction('addToRootAction')\n    },\n    addBelowToRoot: {\n      key: 'mod+shift+b',\n      action: this.shortcutActionService.generateShortcutAction('addBelowToRootAction')\n    },\n    moveUp: {\n      key: 'mod+shift+up',\n      action: this.shortcutActionService.generateShortcutAction('moveUpAction')\n    },\n    moveDown: {\n      key: 'mod+shift+down',\n      action: this.shortcutActionService.generateShortcutAction('moveDownAction')\n    },\n    moveUpRoot: {\n      key: 'mod+alt+up',\n      action: this.shortcutActionService.generateShortcutAction('moveUpRootAction')\n    },\n    moveDownRoot: {\n      key: 'mod+alt+down',\n      action: this.shortcutActionService.generateShortcutAction('moveDownRootAction')\n    },\n    delete: {\n      key: 'mod+backspace',\n      action: this.shortcutActionService.generateShortcutAction('deleteAction')\n    },\n    navigateUp: {\n      key: 'mod+up',\n      action: this.shortcutActionService.generateShortcutAction('navigateUpAction')\n    },\n    navigateDown: {\n      key: 'mod+down',\n      action: this.shortcutActionService.generateShortcutAction('navigateDownAction')\n    },\n    navigateLeft: {\n      key: 'mod+left',\n      action: this.shortcutActionService.generateShortcutAction('navigateLeftAction')\n    },\n    navigateRight: {\n      key: 'mod+right',\n      action: this.shortcutActionService.generateShortcutAction('navigateRightAction')\n    },\n    copy: {\n      key: 'alt+c',\n      action: this.shortcutActionService.generateShortcutAction('copyAction')\n    },\n    copyFromRoot: {\n      key: 'mod+alt+r',\n      action: this.shortcutActionService.generateShortcutAction('copyFromRootAction')\n    },\n    undo: {\n      key: 'mod+alt+z',\n      action: this.shortcutActionService.generateShortcutAction('undoAction')\n    }\n  };\n  private mousetrap: MousetrapInstance;\n\n  constructor(private el: ElementRef,\n    private shortcutActionService: ShortcutActionService) {\n    this.mousetrap = new Mousetrap(this.el.nativeElement);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    const customShortcutKeysChange = changes['shortcuts'];\n    if (customShortcutKeysChange) {\n      const actionNames = Object.keys(this.actionNameToShortcut);\n      // if custom shortcut keys are set\n      if (this.shortcuts) {\n        actionNames.forEach(actionName => {\n          const shortcut = this.actionNameToShortcut[actionName];\n          if (this.shortcuts[actionName]) {\n            // override shortcut key\n            shortcut.key = this.shortcuts[actionName];\n          }\n          this.mousetrap.bind(shortcut.key, shortcut.action);\n        });\n      } else {\n        actionNames.forEach(actionName => {\n          const shortcut = this.actionNameToShortcut[actionName];\n          this.mousetrap.bind(shortcut.key, shortcut.action);\n        });\n      }\n\n    }\n  }\n\n\n  ngOnDestroy() {\n    Object.keys(this.actionNameToShortcut)\n      .forEach(actionName => {\n        this.mousetrap.unbind(this.actionNameToShortcut[actionName].key);\n      });\n  }\n}\n","<div class=\"modal fade\" (onShown)=\"onShow()\" bsModal #modal=\"bs-modal\" tabindex=\"-1\" role=\"dialog\" [config]=\"{ backdrop: false }\">\n  <div class=\"modal-dialog modal-lg\">\n    <div *ngIf=\"options\" class=\"modal-content\">\n      <div class=\"modal-header\">\n        <button type=\"button\" class=\"close\" (click)=\"modal.hide()\">&times;</button>\n        <h4 class=\"modal-title\">{{options.title}}</h4>\n      </div>\n      <div class=\"modal-body\">\n        <div [innerHTML]=\"options.bodyHtml\"></div>\n        <div [ngSwitch]=\"options.type\">\n          <div *ngSwitchCase=\"'confirm'\">\n            <button class=\"btn btn-success\" (click)=\"options.onConfirm();\">\n               <i class=\"fa fa-check\"></i> Confirm\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, ChangeDetectorRef, ChangeDetectionStrategy, ViewChild, OnInit } from '@angular/core';\nimport { ModalDirective } from 'ngx-bootstrap/modal';\n\nimport { AbstractSubscriberComponent } from '../abstract-subscriber';\nimport { ModalService } from '../shared/services';\nimport { ModalOptions } from '../shared/interfaces';\nimport { takeUntil } from \"rxjs/operators\";\n\n@Component({\n  selector: 'modal-view',\n  styleUrls: [\n    './modal-view.component.scss'\n  ],\n  templateUrl: './modal-view.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ModalViewComponent extends AbstractSubscriberComponent implements OnInit {\n\n  @ViewChild('modal') modal: ModalDirective;\n  options: ModalOptions;\n\n  // TODO: unsubcribe on destroy\n  constructor(private modalService: ModalService,\n    private changeDetectorRef: ChangeDetectorRef) {\n    super();\n  }\n\n  ngOnInit() {\n    this.modalService\n      .display$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(display => {\n        display ? this.modal.show() : this.modal.hide();\n      });\n    this.modalService\n      .options$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(options => {\n        this.options = options;\n        this.changeDetectorRef.markForCheck();\n      });\n  }\n\n  onShow() {\n    if (this.options && this.options.onShow) {\n      this.options.onShow();\n    }\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { Set, OrderedSet } from 'immutable';\n\nimport { JSONSchema } from '../interfaces';\n\n@Pipe({\n  name: 'sortAlphabetically',\n})\nexport class SortAlphabeticallyPipe implements PipeTransform {\n\n  transform(set: Set<string>): OrderedSet<string> {\n    return set.sort((a, b) => {\n      if (a < b) { return -1; }\n      if (a > b) { return 1; }\n      return 0;\n    }) as OrderedSet<string>;\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'filterByExpression',\n})\nexport class FilterByExpressionPipe implements PipeTransform {\n\n  transform(array: Array<string>, prefix: string): Array<string> {\n    const pattern = new RegExp(prefix, 'i');\n    return array.filter(value => value.match(pattern));\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, Input, Output, EventEmitter, ElementRef, OnChanges, SimpleChanges, ChangeDetectionStrategy } from '@angular/core';\nimport { Set } from 'immutable';\n\nimport { DomUtilService, KeysStoreService } from '../shared/services';\nimport { JSONSchema } from '../shared/interfaces';\n\n@Component({\n  selector: 'add-field-dropdown',\n  styleUrls: [\n    './add-field-dropdown.component.scss'\n  ],\n  templateUrl: './add-field-dropdown.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AddFieldDropdownComponent implements OnChanges {\n\n  @Input() schema: JSONSchema;\n  @Input() fields: Set<string>;\n  @Input() pathString: string;\n  @Input() isDisabled: boolean;\n\n  addableKeys: any;\n  expression = '';\n  hidden = false;\n\n  constructor(private elementRef: ElementRef,\n    private domUtilService: DomUtilService,\n    private keysStoreService: KeysStoreService) { }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['schema'] || changes['fields']) {\n      this.addableKeys = Set.fromKeys(this.schema.properties)\n        .subtract(this.fields)\n        .filter(field => !this.schema.properties[field].hidden);\n      this.hidden = this.addableKeys.size === 0;\n    }\n  }\n\n  onDropdownShown() {\n    setTimeout(() =>\n      this.domUtilService.focusFirstInputChildByElement(this.elementRef.nativeElement));\n  }\n\n  onFieldSelect(field: string) {\n    const newFieldPathString = this.keysStoreService.addKey(this.pathString, field, this.schema);\n    this.domUtilService.focusAndSelectFirstEditableChildById(newFieldPathString);\n    this.expression = '';\n  }\n\n}\n","<div *ngIf=\"!hidden\" class=\"btn-group add-field-dropdown-container\" dropdown keyboardNav=\"true\" [isDisabled]=\"isDisabled\" (onShown)=\"onDropdownShown()\">\n  <button type=\"button\" class=\"btn btn-add-field-dropdown\" dropdownToggle>\n     <ng-content></ng-content>\n  </button>\n  <ul class=\"dropdown-menu\" *dropdownMenu>\n    <li class=\"dropdown-filter-container\">\n      <input [(ngModel)]=\"expression\" placeholder=\"filter\" (click)=\"$event.stopPropagation()\">\n    </li>\n    <li class=\"divider dropdown-divider\"></li>\n    <li *ngFor=\"let key of addableKeys | filterByExpression:expression | sortAlphabetically\">\n      <a class=\"dropdown-item\" href=\"javascript:void(0)\" (click)=\"onFieldSelect(key)\">{{key}}</a>\n    </li>\n  </ul>\n</div>","<div class=\"badges-container\">\n  <a *ngIf=\"errorCount > 0\" class=\"error\" (click)=\"onBadgeClick($event, 'Errors')\" tooltip=\"{{errorCount}} error(s)\" placement=\"right\">\n    <span class=\"error fa-stack fa-lg\">\n      <i class=\"fa fa-times fa-stack-1x fa-inverse\"></i>\n    </span>\n  </a>\n  <a *ngIf=\"warningCount > 0\" class=\"warning\" (click)=\"onBadgeClick($event, 'Warnings')\" tooltip=\"{{warningCount}} warning(s)\" placement=\"right\">\n    <span class=\"warning fa-stack fa-lg\"> \n      <i class=\"fa fa-exclamation fa-stack-1x fa-inverse\"></i>\n    </span>\n  </a>\n  <a *ngIf=\"patchCount > 0\" class=\"patch\" (click)=\"onBadgeClick($event, 'Patches')\" tooltip=\"{{patchCount}} conflicts(s)\" placement=\"right\">\n    <span class=\"patch fa-stack fa-lg\">\n      <i class=\"fa fa-bolt fa-stack-1x fa-inverse\"></i>\n    </span>\n  </a>\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport { Component, Output, EventEmitter, OnInit, OnDestroy, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';\n\nimport { AbstractSubscriberComponent } from '../abstract-subscriber';\nimport { ProblemsService, JsonStoreService } from '../shared/services';\nimport { Subscription } from 'rxjs';\nimport { takeUntil, map } from 'rxjs/operators';\n\n@Component({\n  selector: 'bottom-console-badges',\n  styleUrls: [\n    './bottom-console-badges.component.scss'\n  ],\n  templateUrl: './bottom-console-badges.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BottomConsoleBadgesComponent extends AbstractSubscriberComponent implements OnInit, OnDestroy {\n\n  @Output() badgeClick = new EventEmitter<string>();\n\n  errorCount = 0;\n  warningCount = 0;\n  patchCount = 0;\n\n  constructor(private problemsService: ProblemsService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private jsonStoreService: JsonStoreService) {\n    super();\n  }\n\n  ngOnInit() {\n    this.problemsService.errorCount$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(count => {\n        this.errorCount = count;\n        // FIXME: use markForCheck() instead\n        // markForCheck() wasn't working for mysterious reasons for initial update\n        this.changeDetectorRef.detectChanges();\n      });\n    this.problemsService.warningCount$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(count => {\n        this.warningCount = count;\n        // FIXME: use markForCheck() instead\n        // markForCheck() wasn't working for mysterious reasons for initial update\n        this.changeDetectorRef.detectChanges();\n      });\n    this.jsonStoreService.patchesByPath$\n      .pipe(map(patchesByPath => {\n        return Object.keys(patchesByPath)\n          .map(path => patchesByPath[path].length)\n          .reduce((sum, patchCountPerPath) => sum + patchCountPerPath, 0);\n      }))\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(patchCount => {\n        this.patchCount = patchCount;\n        this.changeDetectorRef.markForCheck();\n      });\n  }\n\n  onBadgeClick(event: Event, badgeName: string) {\n    event.preventDefault();\n    this.badgeClick.emit(badgeName);\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { Set } from 'immutable';\n\nimport { JSONSchema } from '../interfaces';\n\n@Pipe({\n  name: 'addAlwaysShowFields'\n})\nexport class AddAlwaysShowFieldsPipe implements PipeTransform {\n\n  transform(fields: Set<string>, schema: JSONSchema): Set<string> {\n    const alwaysShowFields = schema.alwaysShow || [];\n    return fields.union(alwaysShowFields);\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { Set } from 'immutable';\n\nimport { JSONSchema } from '../interfaces';\n\n@Pipe({\n  name: 'filterHiddenFields',\n})\nexport class FilterHiddenFieldsPipe implements PipeTransform {\n\n  /**\n   * It filters out `hidden` fields\n   *\n   * @param keys\n   * @param schema - the `schema` that has object schema which contains each key in `keys`\n   * @return - filtered keys\n   */\n  transform(keys: Set<string>, schema: JSONSchema, adminMode: boolean): Set<string> {\n    const schemaProps = schema.properties;\n    if (!keys) { return undefined; }\n    return keys\n      .filter(key => {\n        if (!schemaProps[key]) {\n          throw new Error(`\"${key}\" is not specified as property in \\n${JSON.stringify(schemaProps, undefined, 2)}`);\n        }\n        return !schemaProps[key].hidden || adminMode;\n      }) as Set<string>;\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  Input,\n  OnInit,\n  OnChanges,\n  SimpleChanges,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef\n} from '@angular/core';\nimport { Map, Set } from 'immutable';\nimport { ReplaySubject } from 'rxjs';\n\nimport { DomUtilService, WindowHrefService, PathUtilService, AppGlobalsService } from '../shared/services';\nimport { JSONSchema } from '../shared/interfaces';\n\n@Component({\n  selector: 'tree-menu-item',\n  styleUrls: [\n    './tree-menu-item.component.scss'\n  ],\n  templateUrl: './tree-menu-item.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TreeMenuItemComponent implements OnInit, OnChanges {\n\n  @Input() label: string;\n  @Input() value: any;\n  @Input() schema: JSONSchema;\n  @Input() path: string;\n  @Input() depth: number;\n\n  // defined only if schmea.type equals to 'object'\n  keys: Set<string>;\n\n  isCollapsed = true;\n  href: string;\n\n  constructor(private windowHrefService: WindowHrefService,\n    private domUtilService: DomUtilService,\n    private pathUtilService: PathUtilService,\n    private appGlobalsService: AppGlobalsService) {\n  }\n\n  ngOnInit() {\n    this.href = `${this.windowHrefService.hrefWithoutHash}#${this.path}`;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['value'] && this.value && this.schema.type === 'object') {\n      this.keys = this.value.keySeq().toSet();\n    }\n  }\n\n  toggle(event: Event) {\n    // fix to trigger :focus css after focusAndSelectFirstInputChildById called.\n    event.preventDefault();\n\n    this.isCollapsed = !this.isCollapsed;\n    this.domUtilService.focusAndSelectFirstEditableChildById(this.path, true);\n  }\n\n  collapse() {\n    this.isCollapsed = true;\n  }\n\n  get isCollapsable(): boolean {\n    const schemaType = this.schema.type;\n    return this.isNotLeaf && (schemaType === 'object' || schemaType === 'array');\n  }\n\n  get maxDepth(): number {\n    return this.appGlobalsService.config.menuMaxDepth;\n  }\n\n  get isNotLeaf(): boolean {\n    return this.maxDepth === undefined || this.depth < this.maxDepth;\n  }\n\n  get adminMode$(): ReplaySubject<boolean> {\n    return this.appGlobalsService.adminMode$;\n  }\n\n  getChildPath(indexOrKey: number | string) {\n    return `${this.path}${this.pathUtilService.separator}${indexOrKey}`;\n  }\n\n  trackByElement(index: number, element: any): any {\n    return element;\n  }\n\n}\n","<div>\n  <a [href]=\"href\" (click)=\"toggle($event)\">{{label}}</a>\n  <a *ngIf=\"isCollapsable\" [hidden]=\"isCollapsed\" (click)=\"collapse()\"> [x]</a>\n  <div *ngIf=\"isNotLeaf\" [ngSwitch]=\"schema.type\" [hidden]=\"isCollapsed\">\n    <ul>\n      <div *ngSwitchCase=\"'object'\">\n        <li *ngFor=\"let key of keys | filterHiddenFields:schema:(adminMode$ | async) | addAlwaysShowFields:schema | sortAlphabetically; trackBy:trackByElement\">\n          <tree-menu-item [label]=\"key\" [value]=\"value.get(key)\" [schema]=\"schema.properties[key]\" [path]=\"getChildPath(key)\" [depth]=\"depth + 1\"></tree-menu-item>\n        </li>\n      </div>\n      <div *ngSwitchCase=\"'array'\">\n        <li *ngFor=\"let element of value; let i = index; trackBy:trackByElement\">\n          <tree-menu-item [label]=\"i\" [value]=\"element\" [schema]=\"schema.items\" [path]=\"getChildPath(i)\" [depth]=\"depth + 1\"></tree-menu-item>\n        </li>\n      </div>\n    </ul>\n  </div>\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  Input,\n  OnChanges,\n  OnInit,\n  SimpleChanges,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef\n} from '@angular/core';\nimport { Map, Set } from 'immutable';\nimport { ReplaySubject } from 'rxjs';\n\nimport { DomUtilService, PathUtilService, AppGlobalsService } from '../shared/services';\nimport { JSONSchema } from '../shared/interfaces';\n\n@Component({\n  selector: 'tree-menu',\n  styleUrls: [\n    './tree-menu.component.scss'\n  ],\n  templateUrl: './tree-menu.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TreeMenuComponent implements OnChanges {\n\n  @Input() record: Map<string, any>;\n  @Input() schema: JSONSchema;\n\n  keys: Set<string>;\n\n  private prefixOrPath = '';\n\n  constructor(private domUtilService: DomUtilService,\n    private pathUtilService: PathUtilService,\n    private appGlobalsService: AppGlobalsService) {\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['record']) {\n      this.keys = this.record.keySeq().toSet();\n    }\n  }\n\n  getChildPath(key: string) {\n    return `${this.pathUtilService.separator}${key}`;\n  }\n\n  trackByElement(index: number, element: any): any {\n    return element;\n  }\n\n  get adminMode$(): ReplaySubject<boolean> {\n    return this.appGlobalsService.adminMode$;\n  }\n}\n","<div class=\"tree-menu-container\">\n  <ul class=\"menu-item-container\">\n    <li *ngFor=\"let key of keys | filterHiddenFields:schema:(adminMode$ | async) | addAlwaysShowFields:schema | sortAlphabetically; trackBy:trackByElement\">\n      <tree-menu-item [label]=\"key\" [value]=\"record.get(key)\" [schema]=\"schema.properties[key]\" [path]=\"getChildPath(key)\" [depth]=\"1\"></tree-menu-item>\n    </li>\n  </ul>\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, Input, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'title-dropdown',\n  styleUrls: [\n    './title-dropdown.component.scss'\n  ],\n  templateUrl: './title-dropdown.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TitleDropdownComponent {\n  @Input() title: string;\n  @Input() isDisabled: boolean;\n}\n","<div dropdown class=\"title-dropdown-container\" [isDisabled]=\"isDisabled\">\n  <button class=\"btn title-dropdown-toggle\" dropdownToggle>\n    {{title}} <span class=\"caret\"></span>\n  </button>\n  <ul class=\"dropdown-menu\" *dropdownMenu>\n    <ng-content></ng-content>\n  </ul>\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, Input, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { List, Map } from 'immutable';\n\nimport { FindReplaceAllService, JsonStoreService, ModalService } from '../shared/services';\nimport { JSONSchema } from '../shared/interfaces';\n\n@Component({\n  selector: 'find-replace',\n  styleUrls: [\n    './find-replace.component.scss'\n  ],\n  templateUrl: './find-replace.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FindReplaceComponent {\n\n  @Input() path: Array<any>;\n  @Input() schema: JSONSchema;\n\n  private replaced: List<any> | Map<string, any>;\n\n  find: string;\n  replace: string;\n  exactPhrase: boolean;\n\n  constructor(public changeDetectionRef: ChangeDetectorRef,\n    public domSanitizer: DomSanitizer,\n    public findReplaceAllService: FindReplaceAllService,\n    public jsonStoreService: JsonStoreService,\n    public modalService: ModalService) { }\n\n  onKeypress(key: string) {\n    if (key === 'Enter') {\n      this.findAndReplace();\n    }\n  }\n\n  findAndReplace() {\n    if (!(this.find && this.replace)) {\n      return;\n    }\n    const value = this.jsonStoreService.getIn(this.path);\n    const result = this.findReplaceAllService\n      .findReplaceInImmutable(value, this.schema, this.find, this.replace, this.exactPhrase);\n    this.replaced = result.replaced;\n    const stringyfiedDiffHtml = JSON.stringify(result.diffHtml, undefined, 2);\n    this.modalService.displayModal({\n      title: 'After Replace',\n      bodyHtml: this.domSanitizer.bypassSecurityTrustHtml(`<pre class=\"max-height-70-vh\"><code>${stringyfiedDiffHtml}</code></pre>`),\n      type: 'confirm',\n      onConfirm: () => {\n        this.modalService.closeCurrentModal();\n        this.jsonStoreService.setIn(this.path, this.replaced);\n        this.cleanParameters();\n      }\n    });\n  }\n\n  private cleanParameters() {\n    this.find = '';\n    this.replace = '';\n    this.exactPhrase = false;\n    this.changeDetectionRef.markForCheck();\n  }\n}\n","<div class=\"find-replace-container\">\n  <div class=\"top-container-item\">\n    <input placeholder=\"Find\" [(ngModel)]=\"find\" (keypress)=\"onKeypress($event.key)\" />\n  </div>\n  <div>\n    <input placeholder=\"Replace\" [(ngModel)]=\"replace\" (keypress)=\"onKeypress($event.key)\" />\n  </div>\n  <div class=\"bottom-container-item\">\n    <label>\n      Exact phrase\n      <input type=\"checkbox\" [(ngModel)]=\"exactPhrase\" (keypress)=\"onKeypress($event.key)\"/>\n    </label>\n    <i class=\"fa fa-arrow-circle-right\" (click)=\"findAndReplace()\"></i>\n  </div>\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { OnInit, Component, OnDestroy, ChangeDetectorRef, OnChanges, SimpleChanges } from '@angular/core';\n\nimport { AbstractSubscriberComponent } from '../abstract-subscriber';\nimport { AppGlobalsService, PathUtilService, JsonStoreService, ProblemsService } from '../shared/services';\nimport { ValidationProblem, PathCache, JSONSchema, JsonPatch, JsonPatchesByOp } from '../shared/interfaces';\nimport { map, takeUntil } from \"rxjs/operators\";\n/**\n * This is the base class for fields\n * WARNING:\n *  XFieldComponent which extends this class should have all services in this constructor, in their constructor!\n *  EX: constructor(...public appGlobalService: AppGlobalService, ...) {...}\n *\n * It provides trackByFunction from AbstractTrackerComponent, and handles errors for the component.\n */\n @Component({\n   template: ''\n })\nexport abstract class AbstractFieldComponent extends AbstractSubscriberComponent implements OnInit, OnDestroy, OnChanges {\n\n  // @Input\n  path: Array<any>;\n\n  pathString: string;\n  pathCache: PathCache = {};\n  externalErrors: Array<ValidationProblem> = [];\n  schema: JSONSchema;\n\n  // patches grouped by op because they different UI representation\n  replaceJsonPatches: Array<JsonPatch> = [];\n  addJsonPatches: Array<JsonPatch> = [];\n  removeJsonPatch: JsonPatch;\n\n\n  constructor(public appGlobalsService: AppGlobalsService,\n    public problemsService: ProblemsService,\n    public pathUtilService: PathUtilService,\n    public changeDetectorRef: ChangeDetectorRef,\n    public jsonStoreService: JsonStoreService) {\n    super();\n  }\n\n  ngOnInit() {\n    this.problemsService.externalCategorizedProblems$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(externalCategorizedProblemMap => {\n        this.externalErrors = externalCategorizedProblemMap.errors[this.pathString] || [];\n        this.changeDetectorRef.markForCheck();\n      });\n\n    this.jsonStoreService.patchesByPath$\n      .pipe(map(patchesByPath => patchesByPath[this.pathString]))\n      .pipe(map(patches => this.groupJsonPatchesByOp(patches)))\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(patchesByOp => {\n        this.removeJsonPatch = patchesByOp.remove[0];\n        this.addJsonPatches = patchesByOp.add;\n        this.replaceJsonPatches = patchesByOp.replace;\n        this.changeDetectorRef.markForCheck();\n      });\n  }\n\n  private groupJsonPatchesByOp(patches: Array<JsonPatch>): JsonPatchesByOp {\n    const group: JsonPatchesByOp = {\n      add: [],\n      remove: [],\n      replace: []\n    };\n\n    if (patches) {\n      patches.forEach((patch) => {\n        const opPatches = group[patch.op];\n        opPatches.push(patch);\n      });\n    }\n\n    return group;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['path']) {\n      this.pathString = this.pathUtilService.toPathString(this.path);\n    }\n  }\n\n  /**\n   * Gets path for child, returns from `pathCache` if it is a hit\n   * in order not to re-render child component due to reference change its path.\n   *\n   * @param key - index or field name for child\n   */\n  getPathForChild(key: any): Array<any> {\n    if (!this.pathCache[key] || this.pathCache[key][this.path.length - 1] !== this.path[this.path.length - 1]) {\n      this.pathCache[key] = this.path.concat(key);\n    }\n    return this.pathCache[key];\n  }\n\n  hasErrors(): boolean {\n    return this.externalErrors.length > 0;\n  }\n\n  get disabled() {\n    return this.schema.disabled && !this.appGlobalsService.adminMode;\n  }\n\n  get redLeftBorderClass(): string {\n    return this.removeJsonPatch ? 'red-left-border' : '';\n  }\n\n  trackByElement(index: number, element: any): any {\n    return element;\n  }\n\n  trackByIndex(index: number, element: any): number {\n    return index;\n  }\n\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\nimport { ChangeDetectorRef } from '@angular/core';\nimport { List } from 'immutable';\n\nimport { AbstractFieldComponent } from '../abstract-field';\nimport { JsonStoreService, AppGlobalsService, PathUtilService, ProblemsService } from '../shared/services';\nimport { JSONSchema } from '../shared/interfaces';\n\n/**\n * Abstract component to share code of common operations of all array fields\n *\n * Instance properties declared here only to resolve syntax errors.\n * Hence they need to be declared in children extending components (with decarators if necessary)\n */\nexport abstract class AbstractListFieldComponent extends AbstractFieldComponent {\n\n  values: List<any>;\n  schema: JSONSchema;\n  path: Array<any>;\n\n  constructor(public appGlobalsService: AppGlobalsService,\n    public problemsService: ProblemsService,\n    public jsonStoreService: JsonStoreService,\n    public pathUtilService: PathUtilService,\n    public changeDetectorRef: ChangeDetectorRef) {\n    super(appGlobalsService, problemsService, pathUtilService, changeDetectorRef, jsonStoreService);\n  }\n\n  /**\n   * @param index - Index of the element that is moved\n   * @param  direction - Movement direction. -1 for UP, +1 for DOWN\n   */\n  moveElement(index: number, direction: number) {\n    this.jsonStoreService.moveIn(this.path, index, direction);\n  }\n\n  /**\n   * @param index - Index of the element to be deleted\n   */\n  deleteElement(index: number) {\n    const elementPath = this.path.concat(index);\n    this.jsonStoreService.removeIn(elementPath);\n    // empty list as notSetValue, because there can be lists rendered on the UI, while they are absent in json (alwaysShow)\n    this.values = this.jsonStoreService.getIn(this.path, List());\n  }\n\n  getPathStringForChild(index: number): string {\n    return `${this.pathString}${this.pathUtilService.separator}${index}`;\n  }\n\n  hasPatchOrChildrenHavePatch(): boolean {\n    return this.jsonStoreService.hasPatchOrChildrenHavePatch(this.pathString);\n  }\n}\n","<td *ngFor=\"let key of keys; trackBy:trackByElement; first as isFirst\" [style.width]=\"schema.properties[key].columnWidth + '%'\"\n  [ngClass]=\"isFirst ? redLeftBorderClass : ''\">\n  <any-type-field [value]=\"value.get(key) | selfOrEmpty:schema.properties[key]\" [schema]=\"schema.properties[key]\" [path]=\"getPathForChild(key)\">\n  </any-type-field>\n  <add-new-element-button *ngIf=\"schema.properties[key].type === 'array'\" [path]=\"getPathForChild(key)\" [schema]=\"schema.properties[key]\">\n  </add-new-element-button>\n  <patch-actions *ngIf=\"removeJsonPatch && isFirst\" [patch]=\"removeJsonPatch\"></patch-actions>\n</td>\n<!-- td element with list-action-group (up/down and delete buttons) -->\n<ng-content></ng-content>\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  Input,\n  OnChanges,\n  OnInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  SimpleChanges\n} from '@angular/core';\nimport { List, Set } from 'immutable';\n\nimport { AbstractFieldComponent } from '../abstract-field';\nimport {\n  AppGlobalsService,\n  JsonStoreService,\n  PathUtilService,\n  ProblemsService\n} from '../shared/services';\nimport { JSONSchema } from '../shared/interfaces';\n\n@Component({\n  // Defined as attribute selector not to break table > tr > td html structure\n  // tslint:disable-next-line\n  selector: '[table-item-field]',\n  styleUrls: [\n    './table-item-field.component.scss'\n  ],\n  templateUrl: './table-item-field.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TableItemFieldComponent extends AbstractFieldComponent {\n\n  @Input() value: Map<string, any>;\n  @Input() schema: JSONSchema;\n  @Input() path: Array<any>;\n  @Input() keys: Set<string>;\n\n  constructor(public appGlobalsService: AppGlobalsService,\n    public problemsService: ProblemsService,\n    public jsonStoreService: JsonStoreService,\n    public pathUtilService: PathUtilService,\n    public changeDetectorRef: ChangeDetectorRef) {\n    super(appGlobalsService, problemsService, pathUtilService, changeDetectorRef, jsonStoreService);\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  OnInit,\n  ViewEncapsulation,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\n\n@Component({\n  selector: 'list-action-group',\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: [\n    './list-action-group.component.scss'\n  ],\n  templateUrl: './list-action-group.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ListActionGroupComponent {\n\n  @Input() canMove: boolean;\n  @Input() isDisabled: boolean;\n  @Output() onDelete = new EventEmitter<void>();\n  @Output() onMove = new EventEmitter<number>();\n\n}\n","<div [class.disabled]=\"isDisabled\">\n  <button type=\"button\" class=\"editor-btn-delete\" (click)=\"onDelete.emit()\">\n    <i class=\"fa fa-times\"></i>\n  </button>\n  <button *ngIf=\"canMove\" type=\"button\" class=\"editor-btn-move-up\" (click)=\"onMove.emit(-1)\">\n    <i class=\"fa fa-chevron-up\"></i>\n  </button>\n  <button *ngIf=\"canMove\" type=\"button\" class=\"editor-btn-move-down\" (click)=\"onMove.emit(1)\">\n    <i class=\"fa fa-chevron-down\"></i>\n  </button>\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, Input, ChangeDetectionStrategy } from '@angular/core';\n\nimport { JsonStoreService } from '../shared/services';\nimport { JsonPatch } from '../shared/interfaces';\n\n@Component({\n  selector: 'patch-actions',\n  styleUrls: [\n    './patch-actions.component.scss'\n  ],\n  templateUrl: './patch-actions.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PatchActionsComponent {\n  @Input() patch: JsonPatch;\n  @Input() addActionEnabled: boolean;\n\n  constructor(private jsonStoreService: JsonStoreService) { }\n\n  onAcceptClick() {\n    this.jsonStoreService.applyPatch(this.patch);\n  }\n\n  onRejectClick() {\n    this.jsonStoreService.rejectPatch(this.patch);\n  }\n\n  onAddNewClick() {\n    this.patch.op = 'add-as-new';\n    this.jsonStoreService.applyPatch(this.patch);\n  }\n}\n","<div class=\"patch-actions-container\" [ngClass]=\"patch.op\" tabindex=\"-1\">\n  <button (click)=\"onAcceptClick()\"><i class=\"fa fa-check-circle\"></i></button>\n  <button (click)=\"onRejectClick()\"><i class=\"fa fa-times-circle\"></i></button>\n  <button  *ngIf=\"addActionEnabled\" (click)=\"onAddNewClick()\"><i class=\"fa fa-plus-circle\" ></i></button>\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'typeOf',\n  pure: false\n})\n\nexport class TypeOfPipe implements PipeTransform {\n\n  /**\n   * `typeof` with extra 'array'\n   */\n  transform(value: any): string {\n    if (Array.isArray(value)) {\n      return 'array';\n    }\n    return typeof value;\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2018 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\n\nimport { JSONSchema } from '../interfaces';\nimport { CompareKeysBySchemaService } from '../services';\n\n@Pipe({\n  name: 'sortKeysBySchema',\n  pure: false,\n})\nexport class SortKeysBySchemaPipe implements PipeTransform {\n\n  constructor(private compareKeysBySchemaService: CompareKeysBySchemaService) { }\n\n  /**\n   * WARN: uses Array.sort hence mutates the first param\n   *\n   * @param keys keys in the object\n   * @param schema schema of the parent object\n   */\n  transform(keys: Array<string>, schema: JSONSchema): Array<string> {\n    return keys\n      .sort((a, b) => this.compareKeysBySchemaService.compare(a, b, schema));\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'keys',\n  pure: false\n})\n\nexport class KeysPipe implements PipeTransform {\n\n  /**\n   * Transforms object to array of its keys (Object.keys replacement for templates)\n   */\n  transform(object: object): Array<string> {\n    if (!object) { return null; }\n\n    return Object.keys(object);\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, Input, ChangeDetectionStrategy, OnChanges, SimpleChanges } from '@angular/core';\n\nimport { JsonPatch, JSONSchema } from '../shared/interfaces';\nimport { JsonSchemaService } from '../shared/services';\n\n@Component({\n  selector: 'add-or-replace-patch',\n  styleUrls: [\n    './add-or-replace-patch.component.scss'\n  ],\n  templateUrl: './add-or-replace-patch.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AddOrReplacePatchComponent implements OnChanges {\n\n  @Input() patch: JsonPatch;\n\n  schema: JSONSchema;\n\n  constructor(private jsonSchemaService: JsonSchemaService) { }\n\n  ngOnChanges(changes: SimpleChanges) {\n    const patchChanges = changes['patch'];\n    if (patchChanges) {\n      this.schema = this.jsonSchemaService.forPathString(this.patch.path);\n    }\n  }\n\n  get leftBorderClass(): string {\n    return this.patch.op === 'add' ? 'green-left-border' : 'orange-left-border';\n  }\n}\n","<div class=\"patch-container\" [ngClass]=\"leftBorderClass\" [id]=\"patch.path\" tabindex=\"-1\">\n  <div class=\"grow\">\n    <ng-template [ngTemplateOutlet]=\"anyTypeTemplate\" [ngTemplateOutletContext]=\"{value: patch.value, schema: schema}\"></ng-template>\n  </div>\n  <patch-actions class=\"align-self-end\" [patch]=\"patch\"></patch-actions>\n</div>\n\n<ng-template #anyTypeTemplate let-value=\"value\" let-schema=\"schema\">\n  <ng-container [ngSwitch]=\"value | typeOf\">\n    <ng-container *ngSwitchCase=\"'object'\">\n      <ng-template [ngTemplateOutlet]=\"objectTemplate\" [ngTemplateOutletContext]=\"{object: value, schema: schema}\"></ng-template>\n    </ng-container>\n    <ng-container *ngSwitchCase=\"'array'\">\n      <ng-template [ngTemplateOutlet]=\"arrayTemplate\" [ngTemplateOutletContext]=\"{array: value, schema: schema}\"></ng-template>\n    </ng-container>\n    <ng-container *ngSwitchDefault>\n      <ng-template [ngTemplateOutlet]=\"primitiveTemplate\" [ngTemplateOutletContext]=\"{primitive: value}\"></ng-template>\n    </ng-container>\n  </ng-container>\n</ng-template>\n\n<ng-template #objectTemplate let-object=\"object\" let-schema=\"schema\">\n  <table>\n    <tr *ngFor=\"let key of object | keys | sortKeysBySchema:schema\">\n      <td>\n        <label>{{key}}</label>\n      </td>\n      <td>\n        <ng-template [ngTemplateOutlet]=\"anyTypeTemplate\" [ngTemplateOutletContext]=\"{value: object[key], schema: schema.properties[key]}\"></ng-template>\n      </td>\n    </tr>\n  </table>\n</ng-template>\n\n<ng-template #arrayTemplate let-array=\"array\" let-schema=\"schema\">\n  <table>\n    <tr *ngFor=\"let item of array\" class=\"array-item\">\n      <td>\n        <ng-template [ngTemplateOutlet]=\"anyTypeTemplate\" [ngTemplateOutletContext]=\"{value: item, schema: schema.items}\"></ng-template>\n      </td>\n    </tr>\n  </table>\n</ng-template>\n\n<ng-template #primitiveTemplate let-primitive=\"primitive\">\n  <span>{{primitive}}</span>\n</ng-template>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'underscoreToSpace',\n})\nexport class UnderscoreToSpacePipe implements PipeTransform {\n  transform(text: string): string {\n    return text.replace(/\\_/g, ' ');\n  }\n}\n","<div [id]=\"pathString\" [ngClass]=\"redLeftBorderClass\">\n  <table class=\"table editable-inner-table\">\n    <thead class=\"thead-inverse\">\n      <tr>\n        <th *ngFor=\"let key of keys$ | async; trackBy:trackByElement\" [style.width]=\"schema.items.properties[key].columnWidth + '%'\">\n          {{key | underscoreToSpace}}\n        </th>\n        <th class=\"button-holder\" [class.sortable]=\"schema.sortable\">\n          <add-field-dropdown *ngIf=\"values.size > 0\" [fields]=\"keys$ | async\" [pathString]=\"pathString\" [schema]=\"schema.items\" [isDisabled]=\"disabled\">\n            <i class=\"fa fa-plus\"></i>\n            <i class=\"fa fa-caret-down\"></i>\n          </add-field-dropdown>\n        </th>\n      </tr>\n    </thead>\n    <tr *ngFor=\"let value of values; let i = index; trackBy:trackByIndex\" table-item-field [id]=\"getPathStringForChild(i)\" [value]=\"value\"\n      [schema]=\"schema.items\" [path]=\"getPathForChild(i)\" [keys]=\"keys$ | async\">\n      <td *ngIf=\"values.size > 0\" class=\"button-holder\" [class.sortable]=\"schema.sortable\">\n        <list-action-group (onMove)=\"moveElement(i, $event)\" (onDelete)=\"deleteElement(i)\" [canMove]=\"schema.sortable\" [isDisabled]=\"disabled\"></list-action-group>\n      </td>\n    </tr>\n    <tr *ngIf=\"removeJsonPatch\">\n      <patch-actions [patch]=\"removeJsonPatch\"></patch-actions>\n    </tr>\n  </table>\n  <div class=\"add-patch\" *ngFor=\"let patch of addJsonPatches\">\n    <add-or-replace-patch [patch]=\"patch\"></add-or-replace-patch>\n  </div>\n  <div *ngIf=\"replaceJsonPatches && replaceJsonPatches[0]\">\n    <add-or-replace-patch [patch]=\"replaceJsonPatches[0]\"></add-or-replace-patch>\n  </div>\n</div>\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, Input, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { List, Map, Set } from 'immutable';\nimport { ReplaySubject } from 'rxjs';\n\n\nimport { AbstractListFieldComponent } from '../abstract-list-field';\nimport { AppGlobalsService, JsonStoreService, PathUtilService, KeysStoreService, ProblemsService } from '../shared/services';\nimport { JSONSchema } from '../shared/interfaces';\n\n@Component({\n  selector: 'table-list-field',\n  styleUrls: [\n    './table-list-field.component.scss'\n  ],\n  templateUrl: './table-list-field.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TableListFieldComponent extends AbstractListFieldComponent {\n\n  @Input() values: List<Map<string, any>>;\n  @Input() schema: JSONSchema;\n  @Input() path: Array<any>;\n\n  constructor(public appGlobalsService: AppGlobalsService,\n    public problemsService: ProblemsService,\n    public jsonStoreService: JsonStoreService,\n    public pathUtilService: PathUtilService,\n    public keysStoreService: KeysStoreService,\n    public changeDetectorRef: ChangeDetectorRef) {\n    super(appGlobalsService, problemsService, jsonStoreService, pathUtilService, changeDetectorRef);\n  }\n\n  get keys$(): ReplaySubject<Set<string>> {\n    return this.keysStoreService.forPath(this.pathString);\n  }\n\n}\n","<div [id]=\"pathString\">\n  <div *ngIf=\"isComplexListFieldItem\" class=\"pull-right\">\n    <add-nested-field-dropdown [pathString]=\"pathString\" [schema]=\"schema\" [isDisabled]=\"disabled\"></add-nested-field-dropdown>\n  </div>\n\n  <table class=\"table\" [ngClass]=\"redLeftBorderClass\">\n    <tr *ngFor=\"let key of keys$ | async; trackBy:trackByElement\">\n      <!-- SUB FIELD TITLE MENU -->\n      <td class=\"label-holder\">\n        <div>\n          <title-dropdown [title]=\"key | underscoreToSpace\" [isDisabled]=\"isPropertyDisabled(key)\">\n            <li *ngIf=\"schema.properties[key].type === 'array'\" class=\"title-dropdown-item\">\n              <add-new-element-button [path]=\"getPathForChild(key)\" [schema]=\"schema.properties[key]\"></add-new-element-button>\n            </li>\n            <li class=\"title-dropdown-item\">\n              <button type=\"button\" class=\"editor-btn-delete editor-btn-delete-text\" (click)=\"deleteField(key)\">Delete</button>\n            </li>\n            <ng-container *ngIf=\"getTitleDropdownItemTemplateNamesForChild(key)\">\n              <li *ngFor=\"let templateName of getTitleDropdownItemTemplateNamesForChild(key)\" class=\"title-dropdown-item custom-title-dropdown-item\">\n                <ng-template [ngTemplateOutlet]=\"appGlobalsService.templates[templateName]\"></ng-template>\n              </li>\n            </ng-container>\n          </title-dropdown>\n        </div>\n      </td>\n      <!-- SUB FIELD COMPONENT -->\n      <td>\n        <any-type-field [value]=\"value.get(key) | selfOrEmpty:schema.properties[key]\" [schema]=schema.properties[key] [path]=\"getPathForChild(key)\"></any-type-field>\n      </td>\n    </tr>\n    <!-- ADD PATCHES FOR CHILDREN -->\n    <tr *ngFor=\"let patch of addJsonPatches\">\n      <td class=\"label-holder\">\n        <title-dropdown [title]=\"patch.path | lastPathElement | underscoreToSpace\" [isDisabled]=\"true\"></title-dropdown>\n      </td>\n      <td>\n        <add-or-replace-patch [patch]=\"patch\"></add-or-replace-patch>\n      </td>\n    </tr>\n    <!-- REMOVE PATCH FOR ITSELF -->\n    <tr *ngIf=\"removeJsonPatch\">\n      <patch-actions [patch]=\"removeJsonPatch\"></patch-actions>\n    </tr>\n    <!-- ADD SUB FIELD FROM SCHEMA DROPDOWN -->\n    <tr>\n      <td class=\"button-holder\">\n        <add-field-dropdown [fields]=\"keys$ | async\" [pathString]=\"pathString\" [schema]=\"schema\" [isDisabled]=\"disabled\">\n          <i class=\"fa fa-plus\"></i>\n          <i class=\"fa fa-caret-down\"></i>\n        </add-field-dropdown>\n      </td>\n    </tr>\n  </table>\n  <!-- REPLACE PATCH FOR ITSELF -->\n  <div *ngIf=\"replaceJsonPatches && replaceJsonPatches[0]\">\n    <add-or-replace-patch [patch]=\"replaceJsonPatches[0]\"></add-or-replace-patch>\n  </div>\n</div>\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\n\nimport { Component, Input, OnChanges, SimpleChanges, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { Map, Set } from 'immutable';\nimport { ReplaySubject } from 'rxjs';\n\nimport { AbstractFieldComponent } from '../abstract-field';\nimport { AppGlobalsService, JsonStoreService, PathUtilService, KeysStoreService, ProblemsService } from '../shared/services';\nimport { JSONSchema } from '../shared/interfaces';\n\n@Component({\n  selector: 'object-field',\n  styleUrls: [\n    './object-field.component.scss'\n  ],\n  templateUrl: './object-field.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ObjectFieldComponent extends AbstractFieldComponent {\n\n  @Input() value: Map<string, any>;\n  @Input() schema: JSONSchema;\n  @Input() path: Array<any>;\n  @Input() isComplexListFieldItem = false;\n\n  constructor(public appGlobalsService: AppGlobalsService,\n    public problemsService: ProblemsService,\n    public jsonStoreService: JsonStoreService,\n    public pathUtilService: PathUtilService,\n    public changeDetectorRef: ChangeDetectorRef,\n    public keysStoreService: KeysStoreService,\n    ) {\n    super(appGlobalsService, problemsService, pathUtilService, changeDetectorRef, jsonStoreService);\n  }\n\n  get keys$(): ReplaySubject<Set<string>> {\n    return this.keysStoreService.forPath(this.pathString);\n  }\n\n  deleteField(name: string) {\n    const fieldPath = this.path.concat(name);\n    this.jsonStoreService.removeIn(fieldPath);\n  }\n\n  isPropertyDisabled(name: string): boolean {\n    return this.schema.properties[name].disabled && !this.appGlobalsService.adminMode ;\n  }\n\n  getTitleDropdownItemTemplateNamesForChild(key: string): Array<string> {\n    return this.schema.properties[key].titleDropdownItemTemplateNames;\n  }\n}\n","<div [id]=\"pathString\">\n  <!-- Top Bar: Navigator, ToEdit/All switch, custom header item etc. -->\n  <div *ngIf=\"navigator || shouldDisplayViewTemplate\" class=\"top-bar-container\">\n    <div *ngIf=\"navigator\">\n      <div class=\"input-group input-group-sm\">\n        <span class=\"input-group-btn\">\n          <button type=\"button\" class=\"btn btn-default find-button\" (click)=\"onFindClick()\">\n            <i class=\"fa fa-search\" aria-hidden=\"true\"></i>\n          </button>\n        </span>\n        <input type=\"search\" class=\"form-control\" [(ngModel)]=\"findExpression\" (keypress)=\"onFindInputKeypress($event.key)\" placeholder=\"Find\"\n        />\n        <span class=\"input-group-btn\" *ngIf=\"shouldDisplayFoundNavigation\">\n          <button type=\"button\" class=\"btn btn-default\" [disabled]=\"currentFound <= 0\" (click)=\"onFoundNavigate(-1)\">❮</button>\n        </span>\n        <span class=\"input-group-btn\" *ngIf=\"shouldDisplayFoundNavigation\">\n          <button type=\"button\" class=\"btn btn-default\" [disabled]=\"currentFound >= foundIndices.length - 1\" (click)=\"onFoundNavigate(1)\">❯</button>\n        </span>\n        <span *ngIf=\"foundIndices\" [ngSwitch]=\"foundIndices.length\" class=\"input-group-addon transparent borderless\">\n          <span *ngSwitchCase=\"0\">\n            Nothing found\n          </span>\n          <span *ngSwitchDefault>\n            {{currentFound + 1}} of {{foundIndices.length}}\n          </span>\n        </span>\n      </div>\n    </div>\n    <div *ngIf=\"shouldDisplayViewTemplate\" class=\"btn-group\">\n      <label class=\"btn btn-switch\" [class.active]=\"!shouldDisplayOnlyEditFormItems\" (click)=\"shouldDisplayOnlyEditFormItems = false\">All</label>\n      <label class=\"btn btn-switch\" [class.active]=\"shouldDisplayOnlyEditFormItems\" (click)=\"shouldDisplayOnlyEditFormItems = true\">To Edit</label>\n    </div>\n    <div *ngIf=\"headerItemTemplate\">\n      <ng-template [ngTemplateOutlet]=\"headerItemTemplate\"></ng-template>\n    </div>\n    <div *ngIf=\"navigator\">\n      <label class=\"item-count-label\">\n        {{paginatableItems.size}} {{path[path.length - 1]}}\n      </label>\n      <br>\n      <pagination [totalItems]=\"paginatableItems.size\" [ngModel]=\"currentPage\" [maxSize]=\"navigator.maxVisiblePageCount\" [itemsPerPage]=\"navigator.itemsPerPage\"\n        class=\"pagination-sm pagination-top\" [boundaryLinks]=\"true\" [rotate]=\"false\" [firstText]=\"'❮❮'\" [previousText]=\"'❮'\"\n        [nextText]=\"'❯'\" [lastText]=\"'❯❯'\" (pageChanged)=\"onPageChange($event.page)\"></pagination>\n    </div>\n  </div>\n  <div [ngClass]=\"redLeftBorderClass\">\n    <!-- Elements -->\n    <div *ngFor=\"let item of paginatedItems; trackBy:trackByElement\">\n      <div class=\"complex-list-field-wrapper\">\n        <span *ngIf=\"shouldDisplayViewTemplate && values.get(item.index).keySeq().size != 0\">\n          <ng-template [ngTemplateOutlet]=\"customTemplate\" [ngTemplateOutletContext]=\"{item: values.get(item.index)}\"></ng-template>\n          <a href=\"javascript:void(0)\" (click)=\"item.editFormDisplayedByUser = !shouldDisplayEditableFieldsForItem(item)\">\n            {{shouldDisplayEditableFieldsForItem(item) ? 'Hide Fields' : 'Show Fields'}}\n          </a>\n        </span>\n        <span *ngIf=\"shouldDisplayEditableFieldsForItem(item)\">\n          <object-field [value]=\"values.get(item.index)\" [schema]=\"schema.items\" [path]=\"getPathForChild(item.index)\" [isComplexListFieldItem]=\"true\">\n          </object-field>\n          <div class=\"row element-button-container\">\n            <div class=\"col-md-12 text-right\">\n              <list-action-group (onMove)=\"moveElement(item.index, $event)\" (onDelete)=\"deleteElement(item.index)\" [canMove]=\"sortable\"\n                [isDisabled]=\"disabled || hasPatchOrChildrenHavePatch()\">\n              </list-action-group>\n            </div>\n          </div>\n        </span>\n      </div>\n    </div>\n    <div class=\"text-right\" *ngIf=\"removeJsonPatch\">\n      <patch-actions [patch]=\"removeJsonPatch\"></patch-actions>\n    </div>\n  </div>\n\n  <div *ngFor=\"let patch of addJsonPatches\" class=\"complex-list-field-wrapper\">\n    <add-or-replace-patch [patch]=\"patch\"></add-or-replace-patch>\n  </div>\n  <div *ngIf=\"replaceJsonPatches && replaceJsonPatches[0]\">\n    <add-or-replace-patch [patch]=\"replaceJsonPatches[0]\"></add-or-replace-patch>\n  </div>\n</div>\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  Input,\n  OnChanges,\n  OnInit,\n  ChangeDetectionStrategy,\n  SimpleChanges,\n  ChangeDetectorRef,\n  TemplateRef\n} from '@angular/core';\nimport { List, Map, Set } from 'immutable';\n\nimport { AbstractListFieldComponent } from '../abstract-list-field';\nimport {\n  AppGlobalsService,\n  JsonStoreService,\n  DomUtilService,\n  PathUtilService,\n  ListPageChangerService,\n  ProblemsService\n} from '../shared/services';\nimport { LongListNavigatorConfig, JSONSchema, PaginatedItem } from '../shared/interfaces';\nimport { skipWhile, takeUntil } from \"rxjs/operators\";\n\n@Component({\n  selector: 'complex-list-field',\n  styleUrls: [\n    './complex-list-field.component.scss'\n  ],\n  templateUrl: './complex-list-field.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ComplexListFieldComponent extends AbstractListFieldComponent implements OnChanges, OnInit {\n\n  @Input() values: List<Map<string, any>>;\n  @Input() schema: JSONSchema;\n  @Input() path: Array<any>;\n\n  paginatedItems: any;\n  paginatableItems: any;\n\n  foundIndices: Array<number>;\n  currentFound = 0;\n  currentPage = 1;\n  findExpression: string;\n  navigator: LongListNavigatorConfig;\n  shouldDisplayFoundNavigation: boolean;\n  private _shouldDisplayOnlyEditFormItems = false;\n\n  constructor(public appGlobalsService: AppGlobalsService,\n    public problemsService: ProblemsService,\n    public jsonStoreService: JsonStoreService,\n    public domUtilService: DomUtilService,\n    public pathUtilService: PathUtilService,\n    public changeDetectorRef: ChangeDetectorRef,\n    public listPageChangerService: ListPageChangerService) {\n    super(appGlobalsService, problemsService, jsonStoreService, pathUtilService, changeDetectorRef);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n    this.navigator = this.schema.longListNavigatorConfig;\n    this.paginatableItems = this.getPaginatableItems();\n    this.paginatedItems = this.getPaginatableItemsForPage(this.currentPage);\n\n    if (this.navigator) {\n      this.listPageChangerService\n        .registerPaginatedList(this.pathString, this.navigator.itemsPerPage)\n        .pipe(skipWhile(page => page === this.currentPage))\n        .pipe(takeUntil(this.isDestroyed))\n        .subscribe(page => this.onPageChange(page));\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    super.ngOnChanges(changes);\n\n    const valuesChange = changes['values'];\n    if (valuesChange && !valuesChange.isFirstChange()) {\n      const preSize = valuesChange.previousValue.size;\n      const curSize = valuesChange.currentValue.size;\n\n      if (curSize !== preSize) {\n        if (this.navigator) {\n          // check if element added in the end by comparing the last elements\n          const elementAddedToEnd = valuesChange.previousValue.equals(valuesChange.currentValue.pop());\n          const lastPage = this.getPageForIndex(curSize - 1);\n          // change the page if a new element is added in the end and it's not on the last page\n          if (curSize > preSize && this.currentPage !== lastPage && elementAddedToEnd) {\n            this.currentPage = lastPage;\n          }\n        }\n      }\n      this.paginatableItems = this.getPaginatableItems();\n      this.paginatedItems = this.getPaginatableItemsForPage(this.currentPage);\n    }\n  }\n\n  hasProblemOrPatch(index: number) {\n    const itemPath = this.getPathStringForChild(index);\n    return this.problemsService.hasProblem(itemPath) || this.jsonStoreService.hasPatchOrChildrenHavePatch(itemPath);\n  }\n\n  get headerItemTemplate(): TemplateRef<any> {\n    return this.appGlobalsService.templates[this.navigator.headerItemTemplateName];\n  }\n\n  onFindClick() {\n    // clear for new search\n    this.foundIndices = [];\n    this.currentFound = 0;\n    // search to look for the first match\n    if (this.navigator.findSingle) {\n      const foundIndex = this.values\n        .findIndex(value => this.navigator.findSingle(value, this.findExpression));\n      if (foundIndex > -1) {\n        this.foundIndices.push(foundIndex);\n      }\n    }\n    // search to look for all matches\n    if (this.foundIndices.length === 0 && this.navigator.findMultiple) {\n      this.values\n        .forEach((value, index) => {\n          if (this.navigator.findMultiple(value, this.findExpression)) {\n            this.foundIndices.push(index);\n          }\n        });\n    }\n    // navigate to first search result if found any\n    if (this.foundIndices.length > 0) {\n      this.navigateToItem(this.foundIndices[0]);\n      this.shouldDisplayFoundNavigation = true;\n    } else {\n      this.shouldDisplayFoundNavigation = false;\n    }\n  }\n\n  onFindInputKeypress(key: string) {\n    if (key === 'Enter') {\n      this.onFindClick();\n    }\n  }\n\n  onFoundNavigate(direction: number) {\n    // No bound checks, since the buttons are disabled in these cases.\n    this.currentFound += direction;\n    this.navigateToItem(this.foundIndices[this.currentFound]);\n  }\n\n  navigateToItem(index: number) {\n    const item = this.paginatableItems.get(index);\n\n    if (!item.editFormDisplayedByUser) {\n      item.editFormDisplayedByUser = true;\n      this.changeDetectorRef.markForCheck();\n    }\n\n    const itemPath = this.path.concat(index);\n    const itemId = this.pathUtilService.toPathString(itemPath);\n\n    setTimeout(() => this.domUtilService.focusAndSelectFirstEditableChildById(itemId));\n  }\n\n  onPageChange(page: number) {\n    this.currentPage = page;\n    this.paginatedItems = this.getPaginatableItemsForPage(page);\n  }\n\n  getPaginatableItemsForPage(page: number): any {\n    if (this.navigator) {\n      const begin = (page - 1) * this.navigator.itemsPerPage;\n      const end = (page * this.navigator.itemsPerPage);\n      return this.paginatableItems.slice(begin, end);\n    } else {\n      return this.paginatableItems;\n    }\n  }\n\n  getPaginatableItems(): any {\n    const { viewTemplateConfig } = this.schema;\n    return this.values\n      .map((value, index) => {\n        const paginatableItem = this.paginatableItems ? this.paginatableItems.get(index) : null;\n        const isNewItem = paginatableItem == null;\n        const editFormDisplayedByUser = isNewItem ? null : paginatableItem.editFormDisplayedByUser;\n        const shouldDisplayEditForm = viewTemplateConfig ? viewTemplateConfig.showEditForm(value) : true;\n        return { index, shouldDisplayEditForm, editFormDisplayedByUser };\n      }).filter(item => {\n        if (this.shouldDisplayOnlyEditFormItems) {\n          return item.shouldDisplayEditForm;\n        } else {\n          return true;\n        }\n      });\n  }\n\n  getPageForIndex(index: number): number {\n    return Math.floor((index / this.navigator.itemsPerPage) + 1);\n  }\n\n  get customTemplate(): TemplateRef<any> {\n    return this.appGlobalsService.templates[this.schema.viewTemplateConfig.itemTemplateName];\n  }\n\n  get shouldDisplayViewTemplate(): boolean {\n    return this.schema.viewTemplateConfig !== undefined;\n  }\n\n  get sortable(): boolean {\n    return this.schema.sortable && !this.shouldDisplayOnlyEditFormItems;\n  }\n\n  shouldDisplayEditableFieldsForItem(item: PaginatedItem): boolean {\n    // override default display state that is based on viewTemplateConfig.showEditForm(item) with user action\n    const shouldDisplayEditForm = item.editFormDisplayedByUser != null ? item.editFormDisplayedByUser : item.shouldDisplayEditForm;\n    return shouldDisplayEditForm || this.hasProblemOrPatch(item.index);\n  }\n\n  set shouldDisplayOnlyEditFormItems(value: boolean) {\n    this.currentPage = 1;\n    this._shouldDisplayOnlyEditFormItems = value;\n    this.paginatableItems = this.getPaginatableItems();\n    this.paginatedItems = this.getPaginatableItemsForPage(this.currentPage);\n  }\n\n\n  get shouldDisplayOnlyEditFormItems(): boolean {\n    return this._shouldDisplayOnlyEditFormItems;\n  }\n}\n","<div [id]=\"pathString\" [ngClass]=\"redLeftBorderClass\">\n  <div class=\"wide\">\n    <table class=\"table\">\n      <tr *ngFor=\"let value of values | selfOrEmpty:schema; let i = index; trackBy:trackByIndex\">\n        <td>\n          <any-type-field [value]=\"value\" [schema]=\"schema.items\" [path]=\"getPathForChild(i)\"></any-type-field>\n        </td>\n        <td *ngIf=\"values.size > 0\" class=\"button-holder\" [class.sortable]=\"schema.sortable\">\n          <list-action-group (onMove)=\"moveElement(i, $event)\" (onDelete)=\"deleteElement(i)\" [canMove]=\"schema.sortable\" [isDisabled]=\"disabled\"></list-action-group>\n        </td>\n      </tr>\n      <tr *ngIf=\"removeJsonPatch\">\n        <patch-actions [patch]=\"removeJsonPatch\"></patch-actions>\n      </tr>\n    </table>\n    <table class=\"table\">\n      <tr *ngFor=\"let patch of addJsonPatches\">\n        <add-or-replace-patch [patch]=\"patch\"></add-or-replace-patch>\n      </tr>\n      <tr *ngIf=\"replaceJsonPatches && replaceJsonPatches[0]\">\n        <add-or-replace-patch [patch]=\"replaceJsonPatches[0]\"></add-or-replace-patch>\n      </tr>\n    </table>\n  </div>\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, Input, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\nimport { List } from 'immutable';\n\nimport { AbstractListFieldComponent } from '../abstract-list-field';\nimport { AppGlobalsService, JsonStoreService, PathUtilService, ProblemsService } from '../shared/services';\nimport { JSONSchema } from '../shared/interfaces';\n\n@Component({\n  selector: 'primitive-list-field',\n  styleUrls: [\n    './primitive-list-field.component.scss'\n  ],\n  templateUrl: './primitive-list-field.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PrimitiveListFieldComponent extends AbstractListFieldComponent {\n  @Input() values: List<any>;\n  @Input() schema: JSONSchema;\n  @Input() path: Array<any>;\n\n  constructor(public appGlobalsService: AppGlobalsService,\n    public problemsService: ProblemsService,\n    public jsonStoreService: JsonStoreService,\n    public pathUtilService: PathUtilService,\n    public changeDetectorRef: ChangeDetectorRef) {\n    super(appGlobalsService, problemsService, jsonStoreService, pathUtilService, changeDetectorRef);\n  }\n\n}\n","import {\n  Directive,\n  ElementRef,\n  Input,\n  Output,\n  EventEmitter,\n  HostListener,\n  OnChanges,\n  SimpleChanges\n} from '@angular/core';\n\n@Directive({\n  selector: '[contentModel]'\n})\nexport class ContentModelDirective implements OnChanges {\n\n  @Input() contentModel: string;\n\n  @Output() contentModelChange = new EventEmitter<string>();\n\n  constructor(private elementRef: ElementRef) { }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['contentModel']) {\n      this.refresh();\n    }\n  }\n\n  @HostListener('blur')\n  onBlur() {\n    this.emitContentModelChange();\n  }\n\n  @HostListener('keypress', ['$event'])\n  onKeypress(event: KeyboardEvent) {\n    if (event.key === 'Enter') {\n      this.emitContentModelChange();\n    }\n  }\n\n  private emitContentModelChange() {\n    const value = this.elementRef.nativeElement.innerText;\n    this.contentModelChange.emit(value);\n  }\n\n  private refresh() {\n    this.elementRef.nativeElement.innerText = this.contentModel;\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  Output,\n  OnInit,\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ViewChild,\n  OnChanges,\n  SimpleChanges\n} from '@angular/core';\n\nimport { DomUtilService, KatexService } from '../shared/services';\n\n@Component({\n  selector: 'string-input',\n  styleUrls: [\n    './string-input.component.scss'\n  ],\n  templateUrl: './string-input.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class StringInputComponent implements AfterViewInit, OnInit, OnChanges {\n  @ViewChild('latexPreview') latexPreviewEl: ElementRef;\n\n  // value update triggers re-rendering of latex preview if it's enabled\n  @Input() value: string;\n  @Input() disabled: boolean;\n  @Input() pathString: string;\n  @Input() placeholder: string;\n  @Input() tabIndex: number;\n  @Input() latexPreviewEnabled: boolean;\n\n  @Output() blur = new EventEmitter<void>();\n  @Output() onKeypress = new EventEmitter<void>();\n  @Output() valueChange = new EventEmitter<string>();\n\n  latexPreviewShown: boolean;\n  // updated as typed in contenteditable el, doesn't trigger latex re-rendering.\n  contentModel: string;\n\n  constructor(public domUtilService: DomUtilService, public katexService: KatexService) { }\n\n  ngOnChanges(changes: SimpleChanges) {\n    const valueChange = changes['value'];\n    if (valueChange) {\n      this.contentModel = this.value;\n      if (this.latexPreviewEnabled && !valueChange.firstChange) {\n        this.renderLatex();\n      }\n    }\n  }\n\n  ngOnInit() {\n    if (this.shouldShowLatexPreview) {\n      this.latexPreviewShown = true;\n    }\n  }\n\n  ngAfterViewInit() {\n    // render latex preview on init, if it's enabled and value is not empty\n    if (this.shouldShowLatexPreview) {\n      this.renderLatex();\n    }\n  }\n\n  onBlur() {\n    if (this.shouldShowLatexPreview) {\n      this.latexPreviewShown = true;\n      this.value = this.contentModel;\n    }\n    this.blur.emit();\n  }\n\n  renderLatex() {\n    this.katexService.renderMathInText(this.value, this.latexPreviewEl.nativeElement);\n  }\n\n  hideLatexPreview(contentEditableEl: HTMLElement) {\n    this.latexPreviewShown = false;\n    setTimeout(() => contentEditableEl.focus());\n  }\n\n  contentModelChange(value: string) {\n    this.contentModel = value;\n    this.valueChange.emit(value);\n  }\n\n  get shouldShowLatexPreview(): boolean {\n    return this.latexPreviewEnabled && Boolean(this.value);\n  }\n}\n","<span [class.hidden]=\"latexPreviewShown\" [attr.contenteditable]=\"!disabled\" [attr.data-path]=\"pathString\" [tabindex]=\"tabIndex\"\n  [contentModel]=\"contentModel\" (contentModelChange)=\"contentModelChange($event)\" (blur)=\"onBlur()\" (keypress)=\"onKeypress.emit($event)\"\n  attr.placeholder=\"{{placeholder || '⁣\\u2063'}}\" #contentEditable></span>\n<div [class.hidden]=\"!latexPreviewEnabled || !latexPreviewShown\" (click)=\"hideLatexPreview(contentEditable)\" (blur)=\"hideLatexPreview(contentEditable)\"\n  #latexPreview></div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n  OnChanges,\n  SimpleChanges,\n  ChangeDetectionStrategy,\n  ViewChild,\n  ElementRef\n} from '@angular/core';\n\nimport { BiDirectionalMap } from 'bi-directional-map/dist';\n\nimport { BsDropdownDirective } from 'ngx-bootstrap/dropdown';\n\n@Component({\n  selector: 'searchable-dropdown',\n  styleUrls: [\n    './searchable-dropdown.component.scss'\n  ],\n  templateUrl: './searchable-dropdown.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SearchableDropdownComponent implements OnChanges {\n\n  @Input() items: Array<string>;\n  @Input() shortcutMap: { [key: string]: string };\n  @Input() displayValueMap: { [key: string]: string };\n  @Input() value: string;\n  @Input() pathString: string;\n  @Input() tabIndex: number;\n  @Input() placeholder: string;\n  expression: string;\n  biDisplayValueMap: BiDirectionalMap<string, string>;\n  displayValues: Array<string>;\n\n  @Output() onSelect = new EventEmitter<string>();\n  @Output() onBlur = new EventEmitter<void>();\n\n  @ViewChild('filterInput') filterInputElRef: ElementRef;\n  @ViewChild('dropdown') dropdown: BsDropdownDirective;\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['value']) {\n      this.placeholder = this.value || this.placeholder || '';\n    }\n\n    if (changes['displayValueMap'] || changes['items']) {\n      this.displayValueMap = this.displayValueMap || Object.create(null);\n      this.biDisplayValueMap = new BiDirectionalMap<string, string>(this.displayValueMap);\n      // set original value as display value for not configured items.\n      this.items\n        .filter(item => !this.displayValueMap[item])\n        .forEach(item => {\n          this.biDisplayValueMap.set(item, item);\n        });\n\n      this.displayValues = Array.from(this.biDisplayValueMap.values());\n    }\n  }\n\n  onItemClick(displayValue: string) {\n    const originalValue = this.biDisplayValueMap.getKey(displayValue);\n    this.onSelect.emit(originalValue);\n\n    // only necessary to force closing when selected is item equals to value\n    // in which case dropdown doesn't close automatically for some reason\n    this.dropdown.hide();\n  }\n\n  onEnterKeyUp() {\n    if (this.shortcutMap && this.shortcutMap[this.expression]) {\n      this.onItemClick(this.shortcutMap[this.expression]);\n    }\n    this.dropdown.hide();\n  }\n\n  showDropdown() {\n    this.dropdown.show();\n    this.expression = '';\n    setTimeout(() => {\n      (this.filterInputElRef.nativeElement as HTMLInputElement).focus();\n    });\n  }\n\n  onInputBlur(event: FocusEvent) {\n    // this avoids closing dropdown when an item is selected\n    // so that onItemClick() can be executed properly before closing.\n    const relatedTarget = event.relatedTarget as HTMLElement;\n    if (!relatedTarget || relatedTarget.className !== 'dropdown-item') {\n      this.dropdown.hide();\n    }\n    this.onBlur.emit();\n  }\n}\n","<div class=\"btn-group\" #dropdown=\"bs-dropdown\" dropdown keyboardNav=\"true\">\n  <!-- there is no dropdownToggle since it is handled manually see: onInputFocus and onInputBlur in ts -->\n  <div class=\"toggle-container\">\n    <input *ngIf=\"dropdown.isOpen; else valueDisplayTemplate\" #filterInput class=\"value\" attr.data-path=\"{{pathString}}\" [placeholder]=\"placeholder\"\n      [(ngModel)]=\"expression\" (keyup.enter)=\"onEnterKeyUp()\" (blur)=\"onInputBlur($event)\">\n    <i class=\"fa fa-caret-down\" (click)=\"showDropdown()\"></i>\n  </div>\n  <ul class=\"dropdown-menu\" *dropdownMenu role=\"menu\">\n    <li *ngFor=\"let displayValue of displayValues | filterByExpression:expression\" role=\"menuitem\">\n      <!-- href is needed for keyboard navigation -->\n      <a class=\"dropdown-item\" href=\"javascript:void(0)\" (click)=\"onItemClick(displayValue)\">{{displayValue}}</a>\n    </li>\n  </ul>\n</div>\n\n<ng-template #valueDisplayTemplate>\n  <span class=\"value\" [tabindex]=\"tabIndex\" (focus)=\"showDropdown()\">{{biDisplayValueMap.getValue(value)}}</span>\n</ng-template>","/*\n * This file is part of INSPIRE.\n * Copyright (C) 2016 CERN.\n *\n * INSPIRE is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * INSPIRE is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with INSPIRE; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, EventEmitter, Input, OnInit, Output, ChangeDetectionStrategy, TemplateRef } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { RemoteAutocompletionService, AppGlobalsService } from '../shared/services';\nimport { AutocompletionConfig } from '../shared/interfaces';\n\n@Component({\n  selector: 'autocomplete-input',\n  styleUrls: [\n    './autocomplete-input.component.scss'\n  ],\n  templateUrl: './autocomplete-input.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AutocompleteInputComponent implements OnInit {\n  static readonly slashesRegExp = new RegExp('/', 'g');\n\n  @Input() autocompletionConfig: AutocompletionConfig;\n  @Input() value: string;\n  @Input() pathString: string;\n  @Input() tabIndex: number;\n  @Input() placeholder: string;\n\n  @Output() onValueChange = new EventEmitter<string>();\n  @Output() onCompletionSelect = new EventEmitter<string>();\n  @Output() onKeypress = new EventEmitter<KeyboardEvent>();\n  @Output() onBlur = new EventEmitter<void>();\n\n  dataSource: Observable<Array<string | object>> | Array<string | object>;\n  typeaheadOptionField: string;\n\n  constructor(public remoteAutocompletionService: RemoteAutocompletionService,\n    public appGlobalsService: AppGlobalsService) { }\n\n  ngOnInit() {\n    if (this.autocompletionConfig.url) {\n      // remote\n      this.typeaheadOptionField = this.getDotSeparatedOptionField() || 'text';\n      this.dataSource = Observable.create((observer: any) => {\n        if (this.value && this.value.length > 0) {\n          observer.next(this.value);\n        }\n      }).mergeMap((token: string) =>\n        this.remoteAutocompletionService.getAutocompletionResults(this.autocompletionConfig, token));\n    } else {\n      // local\n      this.typeaheadOptionField = this.getDotSeparatedOptionField() || '';\n      this.dataSource = this.autocompletionConfig.source;\n    }\n  }\n\n  get customItemTemplate(): TemplateRef<any> {\n    return this.appGlobalsService.templates[this.autocompletionConfig.itemTemplateName];\n  }\n\n  getDotSeparatedOptionField() {\n    const { optionField } = this.autocompletionConfig;\n    return optionField && optionField.replace(AutocompleteInputComponent.slashesRegExp, '.');\n  }\n\n  onModelChange(value: string) {\n    this.value = value;\n    this.onValueChange.emit(value);\n  }\n\n  onMatchSelect(match: any) {\n    this.onCompletionSelect.emit(match.item);\n  }\n\n  onMatchWrapperMouseDown(match: any) {\n    this.onModelChange(match.value);\n    this.onMatchSelect(match);\n  }\n}\n","<ng-template let-match=\"match\" #matchWrapper>\n  <div style=\"width: 100%; height: 100%; padding: 3px 20px;\" (mousedown)=\"onMatchWrapperMouseDown(match)\">\n    <ng-template [ngTemplateOutlet]=\"customItemTemplate || defaultItemTemplate\"\n      [ngTemplateOutletContext]=\"{item:match.item, index:i, match:match, query:query}\"></ng-template>\n  </div>\n</ng-template>\n\n<ng-template #defaultItemTemplate let-match=\"match\">\n  {{match.value}}\n</ng-template>\n\n<div class=\"autocomplete-container\">\n  <input attr.data-path=\"{{pathString}}\" [ngModel]=\"value\" (ngModelChange)=\"onModelChange($event)\"\n    (keypress)=\"onKeypress.emit($event)\" (blur)=\"onBlur.emit()\" [typeahead]=\"dataSource\"\n    [typeaheadOptionsLimit]=\"autocompletionConfig.size\" [typeaheadOptionField]=\"typeaheadOptionField\"\n    [typeaheadItemTemplate]=\"matchWrapper\" (typeaheadOnSelect)=\"onMatchSelect($event)\" [typeaheadWaitMs]=\"200\"\n    [tabindex]=\"tabIndex\" placeholder=\"{{placeholder}}\">\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  Input,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef\n} from '@angular/core';\n\nimport { IDiffResult } from 'diff';\n\nimport { TextDiffService } from '../shared/services';\n\n@Component({\n  selector: 'text-diff',\n  templateUrl: './text-diff.component.html',\n  styleUrls: [\n    './text-diff.component.scss'\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class TextDiffComponent {\n\n  @Input() newText: string;\n  @Input() currentText: string;\n\n  constructor(public textDiffService: TextDiffService) { }\n\n  get diffs(): Array<IDiffResult> {\n    return this.textDiffService\n      .diffByWord(this.currentText, this.newText);\n  }\n\n}\n","<span *ngFor=\"let diff of diffs\" [ngClass]=\"{added: diff.added, removed: diff.removed}\">{{diff.value}}</span>","<div [id]=\"pathString\" [ngClass]=\"redLeftBorderClass\">\n  <table class=\"primitive-field-container\" [ngSwitch]=\"schema.componentType\">\n    <tr [ngClass]=\"errorClass\">\n      <ng-template #errorsTooltipTemplate>\n        <ul class=\"tooltip-left-align\">\n          <li *ngFor=\"let error of internalErrors\">\n            {{error.message}}\n          </li>\n          <li *ngFor=\"let error of externalErrors\">\n            {{error.message}}\n          </li>\n        </ul>\n      </ng-template>\n      <td *ngIf=\"!replaceJsonPatches[0]; else patchTemplate\" class=\"value-container\" [class.disabled]=\"disabled\" [tooltip]=\"errorsTooltipTemplate\"\n        [isDisabled]=\"!hasErrors()\" placement=\"{{tooltipPosition}}\" container=\"body\">\n        <div *ngSwitchCase=\"'string'\">\n          <string-input [pathString]=\"pathString\" [value]=\"value\" (valueChange)=\"onValueChange($event)\" [disabled]=\"disabled\" [tabIndex]=\"tabIndex\"\n            [latexPreviewEnabled]=\"schema.latexPreviewEnabled\" [placeholder]=\"schema.title\" (blur)=\"onBlur()\" (onKeypress)=\"onKeypress($event)\">\n          </string-input>\n        </div>\n        <div *ngSwitchCase=\"'enum'\">\n          <searchable-dropdown [pathString]=\"pathString\" [value]=\"value\" [placeholder]=\"schema.title\" [items]=\"schema.enum\" [shortcutMap]=\"schema.enumShorcutMap\"\n            (onSelect)=\"onSearchableDropdownSelect($event)\" [displayValueMap]=\"schema.enumDisplayValueMap\" [tabIndex]=\"tabIndex\"\n            (onBlur)=\"onBlur()\"></searchable-dropdown>\n        </div>\n        <div *ngSwitchCase=\"'autocomplete'\">\n          <autocomplete-input [pathString]=\"pathString\" [value]=\"value\" [autocompletionConfig]=\"schema.autocompletionConfig\"\n            (onBlur)=\"onBlur()\" (onKeypress)=\"onKeypress($event)\" (onValueChange)=\"onValueChange($event)\" (onCompletionSelect) = \"onCompletionSelect($event)\" \n            [placeholder]=\"schema.title\" [tabIndex]=\"tabIndex\"></autocomplete-input>\n        </div>\n        <div *ngSwitchCase=\"'integer'\">\n          <input type=\"number\" [(ngModel)]=\"value\" [tabindex]=\"tabIndex\" [attr.data-path]=\"pathString\" (blur)=\"onBlur()\" (keypress)=\"onKeypress($event)\"\n            [placeholder]=\"schema.title\">\n        </div>\n        <div *ngSwitchCase=\"'boolean'\">\n          <input type=\"checkbox\" [(ngModel)]=\"value\" (ngModelChange)=\"onBlur()\" [placeholder]=\"schema.title\">\n        </div>\n        <div *ngSwitchDefault>\n          ## Not recognized type: {{valueType}}\n        </div>\n      </td>\n      <td class=\"link-button-container\">\n        <a *ngIf=\"schema.linkBuilder\" class=\"no-decoration\" target=\"_blank\" [href]=\"schema.linkBuilder(value)\">\n          <i class=\"fa fa-link\" aria-hidden=\"true\"></i>\n        </a>\n        <a *ngIf=\"!schema.linkBuilder && schema.format === 'url'\" class=\"no-decoration\" target=\"_blank\" [href]=\"value\">\n          <i class=\"fa fa-link\" aria-hidden=\"true\"></i>\n        </a>\n      </td>\n    </tr>\n    <tr *ngIf=\"removeJsonPatch\">\n      <patch-actions [patch]=\"removeJsonPatch\"></patch-actions>\n    </tr>\n  </table>\n</div>\n\n<ng-template #patchTemplate>\n  <button class=\"btn btn-default btn-merge orange-left-border\" type=\"button\" [popover]=\"mergePopover\" [popoverContext]=\"{currentValue: value, patchValue: replaceJsonPatches[0].value}\"\n    popoverTitle=\"Merge\" container=\"body\">\n    {{value}}\n    <i class=\"fa fa-bolt\"></i>\n  </button>\n</ng-template>\n\n<ng-template let-currentValue=\"currentValue\" let-patchValue=\"patchValue\" #mergePopover>\n  <text-diff [currentText]=\"currentValue.toString()\" [newText]=\"patchValue ? patchValue.toString() : ''\"></text-diff>\n  <patch-actions [patch]=\"replaceJsonPatches[0]\" [addActionEnabled]=\"isPathToAnIndex\"></patch-actions>\n</ng-template>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  Input,\n  ViewEncapsulation,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\n\nimport { AbstractFieldComponent } from '../abstract-field';\nimport {\n  AppGlobalsService,\n  ProblemsService,\n  ComponentTypeService,\n  JsonStoreService,\n  KeysStoreService,\n  SchemaValidationService,\n  PathUtilService,\n  DomUtilService\n} from '../shared/services';\nimport { JSONSchema, JsonPatch } from '../shared/interfaces';\nimport { Subscription } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { ValidationProblem } from '../shared/interfaces';\n\n@Component({\n  selector: 'primitive-field',\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: [\n    './primitive-field.component.scss'\n  ],\n  templateUrl: './primitive-field.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PrimitiveFieldComponent extends AbstractFieldComponent implements OnInit, OnDestroy {\n\n  @Input() schema: JSONSchema;\n  @Input() path: Array<any>;\n  @Input() value: string | number | boolean;\n\n  internalErrors: Array<ValidationProblem> = [];\n  private lastCommitedValue: string | number | boolean;\n\n  constructor(public schemaValidationService: SchemaValidationService,\n    public componentTypeService: ComponentTypeService,\n    public appGlobalsService: AppGlobalsService,\n    public problemsService: ProblemsService,\n    public jsonStoreService: JsonStoreService,\n    public keysStoreService: KeysStoreService,\n    public pathUtilService: PathUtilService,\n    public domUtilService: DomUtilService,\n    public changeDetectorRef: ChangeDetectorRef) {\n    super(appGlobalsService, problemsService, pathUtilService, changeDetectorRef, jsonStoreService);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    if (this.value !== this.schema.default) {\n      this.lastCommitedValue = this.value;\n    }\n    this.problemsService\n      .internalCategorizedProblems$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(internalCategorizedErrorMap => {\n        this.internalErrors = internalCategorizedErrorMap.errors[this.pathString] || [];\n      });\n    this.appGlobalsService\n      .adminMode$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(adminMode => {\n        this.changeDetectorRef.markForCheck();\n      });\n    this.validate();\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n    if (this.internalErrors.length > 0) {\n      this.problemsService.setInternalProblemsForPath(this.pathString, []);\n    }\n  }\n\n  commitValueChange() {\n    this.validate();\n    this.lastCommitedValue = this.value;\n    this.jsonStoreService.setIn(this.path, this.value);\n\n    if (this.schema.onValueChange) {\n      // setTimeout to workaround the case when the value is changed back to previous value inside onValuChange callback\n      setTimeout(() =>\n        this.schema.onValueChange(this.path, this.value, this.jsonStoreService, this.keysStoreService)\n      );\n    }\n  }\n\n  onBlur() {\n    this.domUtilService.clearHighlight();\n\n    if (this.value !== this.lastCommitedValue) {\n      this.commitValueChange();\n    }\n  }\n\n  onKeypress(event: KeyboardEvent) {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      (document.activeElement as HTMLElement).blur();\n    }\n  }\n\n  onValueChange(value: string) {\n    this.value = value;\n  }\n\n  onSearchableDropdownSelect(value: string) {\n    this.onValueChange(value);\n    this.commitValueChange();\n  }\n\n  onCompletionSelect(selection: string | object) {\n    this.commitValueChange();\n    const onCompletionSelect = this.schema.autocompletionConfig.onCompletionSelect;\n    if (onCompletionSelect) {\n      onCompletionSelect(this.path, selection, this.jsonStoreService, this.keysStoreService);\n    }\n  }\n\n  get tabIndex(): number {\n    return this.disabled ? -1 : 1;\n  }\n\n  get tooltipPosition(): string {\n    if (this.pathString.startsWith(this.appGlobalsService.firstElementPathForCurrentTab)) {\n      return 'bottom';\n    } else {\n      return 'top';\n    }\n  }\n\n  hasErrors(): boolean {\n    return super.hasErrors() || this.internalErrors.length > 0;\n  }\n\n  get errorClass(): string {\n    return !this.replaceJsonPatches[0] && this.hasErrors() ? 'error' : '';\n  }\n\n  get isPathToAnIndex(): boolean {\n    return typeof this.path[this.path.length - 1] === 'number';\n  }\n\n  private validate() {\n    if (this.value != null && this.value !== '' && this.externalErrors.length === 0) {\n      this.internalErrors = this.schemaValidationService.validateValue(this.value, this.schema);\n      this.problemsService.setInternalProblemsForPath(this.pathString, this.internalErrors);\n    }\n  }\n\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  Input,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  OnChanges,\n  SimpleChanges,\n  TemplateRef\n} from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpRequest } from '@angular/common/http';\n\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { AppGlobalsService, PathUtilService } from '../shared/services';\nimport { RefConfig, JSONSchema, RefAnchorAttributes } from '../shared/interfaces';\n\n@Component({\n  selector: 'ref-field',\n  styleUrls: [\n    './ref-field.component.scss'\n  ],\n  templateUrl: './ref-field.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RefFieldComponent implements OnChanges {\n\n  @Input() schema: JSONSchema;\n  @Input() value: Map<string, string>;\n  @Input() path: Array<any>;\n\n  pathString: string;\n  refData: object;\n  requestOptions: any;\n  refPath: Array<any>;\n\n  isPreviewButtonHidden = false;\n\n  private anchorAttributes: RefAnchorAttributes;\n\n  constructor(private http: HttpClient,\n    private changeDetectorRef: ChangeDetectorRef,\n    private appGlobalsService: AppGlobalsService,\n    private pathUtilService: PathUtilService) { }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.refConfig) {\n      const valueChange = changes['value'];\n      const schemaChange = changes['schema'];\n\n      if (valueChange && this.refConfig && this.refConfig.anchorBuilder && this.ref) {\n        this.anchorAttributes = this.refConfig.anchorBuilder(this.ref);\n      }\n\n      // instead of ngOnInit because requestOptions has to be set before fetching\n      if (schemaChange && schemaChange.isFirstChange()) {\n        this.requestOptions = this.createRequestOptionsWithConfig();\n      }\n\n      if (valueChange && this.isTemplateEnabled) {\n        if (this.refConfig.lazy) {\n          this.isPreviewButtonHidden = false;\n        } else {\n          this.fetchRef();\n        }\n      }\n    }\n\n    if (changes['path']) {\n      this.pathString = this.pathUtilService.toPathString(this.path);\n      this.refPath = this.path.concat('$ref');\n    }\n  }\n\n  onPreviewClick() {\n    this.isPreviewButtonHidden = true;\n    this.fetchRef();\n  }\n\n  get customTemplate(): TemplateRef<any> {\n    return this.appGlobalsService.templates[this.refConfig.templateName];\n  }\n\n  get refConfig(): RefConfig {\n    return this.schema.refFieldConfig;\n  }\n\n  get ref(): string {\n    return this.value.get('$ref');\n  }\n\n  get anchorHref(): string {\n    return this.anchorAttributes ? this.anchorAttributes.href : this.ref;\n  }\n\n  get anchorDisplay(): string {\n    return this.anchorAttributes ? this.anchorAttributes.display : this.ref;\n  }\n\n  get isTemplateEnabled(): boolean {\n    return this.refConfig !== undefined && this.refConfig.templateName !== undefined;\n  }\n\n  get shouldDisplayTemplate(): boolean {\n    return this.isPreviewButtonHidden || !this.refConfig.lazy;\n  }\n\n  get shouldDisplayInputField(): boolean {\n    return this.refConfig !== undefined && this.refConfig.displayInputField;\n  }\n\n  private fetchRef() {\n    this.refData = undefined;\n    this.http\n      .get(this.ref, this.requestOptions)\n      .pipe(map((res: any) => res.json())).subscribe(data => {\n        this.refData = data;\n        this.changeDetectorRef.markForCheck();\n      });\n  }\n\n  private createRequestOptionsWithConfig(): any {\n    const headers = new Headers();\n    if (this.refConfig.headers) {\n      this.refConfig.headers\n        .forEach(header => headers.append(header.name, header.value));\n    }\n    return { headers };\n  }\n}\n","<div [id]=\"pathString\">\n  <div *ngIf=\"shouldDisplayInputField\">\n    <primitive-field [value]=\"ref\" [schema]=\"schema['properties']['$ref']\" [path]=\"refPath\"></primitive-field>\n  </div>\n  <div *ngIf=\"ref\">\n    <div *ngIf=\"isTemplateEnabled\">\n      <button class=\"btn-preview-template\" *ngIf=\"!shouldDisplayTemplate\" (click)=\"onPreviewClick($event)\"><i class=\"fa fa-eye\"></i></button>\n      <div *ngIf=\"shouldDisplayTemplate\">\n        <ng-template *ngIf=\"refData\" [ngTemplateOutlet]=\"customTemplate\" [ngTemplateOutletContext]=\"{response: refData}\"></ng-template>\n        <i *ngIf=\"!refData\" class=\"fa fa-spinner fa-spin align-center\"></i>\n      </div>\n    </div>\n    <div *ngIf=\"!isTemplateEnabled\">\n      <a target=\"_blank\" class=\"break-word\" [href]=\"anchorHref\">{{anchorDisplay}}</a>\n    </div>\n  </div>\n</div>\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  Input,\n  ChangeDetectionStrategy,\n} from '@angular/core';\n\nimport { JSONSchema } from '../shared/interfaces';\n\n/**\n * AnyFieldComponent\n *\n * This is a dummy component that has no logic, just passes @Input to its child and\n * propagates its child's output to its parent.\n *\n * IMPORTANT:\n * On the other hand it has smart template which has logic to decide which type of\n * component to use according to schema.\n */\n@Component({\n  selector: 'any-type-field',\n  styleUrls: [\n    './any-type-field.component.scss'\n  ],\n  templateUrl: './any-type-field.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AnyTypeFieldComponent {\n  @Input() schema: JSONSchema;\n  @Input() path: Array<any>;\n  @Input() value: any;\n}\n","<div [ngSwitch]=\"schema.componentType\">\n  <div *ngSwitchCase=\"'table-list'\">\n    <table-list-field [values]=\"value\" [schema]=\"schema\" [path]=\"path\"></table-list-field>\n  </div>\n  <div *ngSwitchCase=\"'complex-list'\">\n    <complex-list-field [values]=\"value\" [schema]=\"schema\" [path]=\"path\"></complex-list-field>\n  </div>\n  <div *ngSwitchCase=\"'primitive-list'\">\n    <primitive-list-field [values]=\"value\" [schema]=\"schema\" [path]=\"path\"></primitive-list-field>\n  </div>\n  <div *ngSwitchCase=\"'object'\">\n    <object-field [value]=\"value\" [schema]=\"schema\" [path]=\"path\"></object-field>\n  </div>\n  <div *ngSwitchCase=\"'ref'\">\n    <ref-field [value]=\"value\" [schema]=\"schema\" [path]=\"path\"></ref-field>\n  </div>\n  <div *ngSwitchDefault>\n    <primitive-field [value]=\"value\" [schema]=\"schema\" [path]=\"path\"></primitive-field>\n  </div>\n</div>\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\nimport { List } from 'immutable';\n\n\nimport { DomUtilService, EmptyValueService, JsonStoreService, PathUtilService, KeysStoreService } from '../shared/services';\nimport { JSONSchema } from '../shared/interfaces';\n\n@Component({\n  selector: 'add-new-element-button',\n  styleUrls: [\n    './add-new-element-button.component.scss'\n  ],\n  templateUrl: './add-new-element-button.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AddNewElementButtonComponent {\n\n  @Input() path: Array<any>;\n  @Input() schema: JSONSchema;\n\n  constructor(public domUtilService: DomUtilService,\n    public emptyValueService: EmptyValueService,\n    public jsonStoreService: JsonStoreService,\n    public pathUtilService: PathUtilService,\n    public keyStoreService: KeysStoreService) { }\n\n  addNewElement() {\n    const itemSchema = this.schema.items;\n    const emptyValue = this.emptyValueService.generateEmptyValue(itemSchema);\n    const values: List<any> = this.jsonStoreService.getIn(this.path);\n    const insertIndex = values ? values.size : 0;\n    const insertPath = this.path.concat(insertIndex);\n    this.jsonStoreService.addIn(insertPath, emptyValue);\n    // focus on the new added element\n    const insertPathString = this.pathUtilService.toPathString(insertPath);\n    setTimeout(() => {\n      this.domUtilService.focusAndSelectFirstEditableChildById(insertPathString);\n    });\n  }\n\n}\n","<div [class.disabled]=\"schema.disabled\"  class=\"button-container\">\n  <button type=\"button\" class=\"btn-new-field\" (click)=\"addNewElement()\">Add new</button>\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { List } from 'immutable';\n\nimport { EmptyValueService } from '../services';\nimport { JSONSchema } from '../interfaces';\n\n@Pipe({\n  name: 'selfOrEmpty',\n})\n\nexport class SelfOrEmptyPipe implements PipeTransform {\n\n  constructor(public emptyValueService: EmptyValueService) {}\n\n  /**\n   * Transforms a value to empty value if it is undefined,\n   * returns self if it is already defined\n   *\n   * @return - empty value if given value is undefined or value itself.\n   */\n  transform(value: any, schema: JSONSchema): any {\n    return value ? value : this.emptyValueService.generateEmptyValue(schema);\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { Set } from 'immutable';\n\nimport { AppGlobalsService, PathUtilService } from '../services';\n\n@Pipe({\n  name: 'setFirstElementPath'\n})\nexport class SetFirstElementPathPipe implements PipeTransform {\n\n  constructor(public appGlobalsService: AppGlobalsService,\n              public pathUtilService: PathUtilService) { }\n\n  transform(fields: Set<string>, tabName: string): Set<string> {\n    this.appGlobalsService.tabNameToFirstTopLevelElement[tabName] = `${this.pathUtilService.separator}${fields.first()}`;\n    return fields;\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport {\n  Component,\n  Input,\n  Output,\n  OnChanges,\n  SimpleChanges,\n  ChangeDetectionStrategy\n} from '@angular/core';\n\nimport { Map, Set } from 'immutable';\n\nimport { PathCache, JSONSchema } from '../shared/interfaces';\nimport { JsonStoreService, AppGlobalsService, TabsUtilService, KeysStoreService } from '../shared/services';\n\n@Component({\n  selector: 'sub-record',\n  styleUrls: [\n    './sub-record.component.scss'\n  ],\n  templateUrl: './sub-record.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SubRecordComponent implements OnChanges {\n  @Input() value: Map<string, any>;\n  @Input() schema: JSONSchema;\n  @Input() tabName: string;\n  @Input() keys: Set<string>;\n  @Input() pathString: string;\n\n  keysByType: { others: Set<string>, toggles: Set<string> };\n  pathCache: PathCache = {};\n\n  constructor(public jsonStoreService: JsonStoreService,\n    public appGlobalsService: AppGlobalsService,\n    public tabsUtilService: TabsUtilService,\n    public keysStoreService: KeysStoreService) {\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['keys']) {\n      let keys;\n      if (this.tabName) {\n        const keyToTabName = this.tabsUtilService.getSchemaKeyToTabName(this.appGlobalsService.config.tabsConfig, this.schema);\n        keys = this.keys\n          .filter(key => keyToTabName[key] === this.tabName);\n      } else {\n        keys = this.keys;\n      }\n      this.keysByType = keys\n        .groupBy(key => this.isToggle(key) ? 'toggles' : 'others')\n        .toObject() as any;\n    }\n  }\n\n  // delete only work for others, not toggles (UPDATE: config comment if this changes)\n  deleteField(field: string) {\n    this.jsonStoreService.removeIn(this.getPathForChild(field));\n  }\n\n  getPathForChild(key: string): Array<any> {\n    if (!this.pathCache[key]) {\n      this.pathCache[key] = [key];\n    }\n    return this.pathCache[key];\n  }\n\n  onToggleValueChange(field: string, value: boolean) {\n    this.jsonStoreService.setIn(this.getPathForChild(field), value);\n  }\n\n  private isToggle(field: string): boolean {\n    return this.schema.properties[field].toggleColor !== undefined;\n  }\n\n  isDisabled(key): boolean {\n    return this.schema.properties[key].disabled && !this.appGlobalsService.adminMode ;\n  }\n\n  trackByElement(index: number, element: any): any {\n    return element;\n  }\n\n  getTitleDropdownItemTemplateNamesForChild(key: string): Array<string> {\n    return this.schema.properties[key].titleDropdownItemTemplateNames;\n  }\n}\n","<div class=\"record-fields-container\">\n  <table class=\"table\">\n    <div class=\"field-wrapper\">\n      <tr *ngIf=\"keysByType.toggles\" class=\"align-right\">\n        <td *ngFor=\"let key of keysByType.toggles; trackBy:trackByElement\">\n          <slide-toggle [id]=\"'/' + key\" [value]=\"value.get(key) | selfOrEmpty:schema.properties[key]\" (valueChange)=\"onToggleValueChange(key, $event)\"\n            [onText]=\"key\" [offText]=\"key\" [onColor]=\"schema.properties[key].toggleColor\"></slide-toggle>\n        </td>\n      </tr>\n    </div>\n    <div *ngIf=\"keysByType.others\">\n      <div class=\"field-wrapper\" *ngFor=\"let key of keysByType.others | setFirstElementPath:tabName; trackBy:trackByElement\">\n        <tr>\n          <td class=\"label-holder\">\n            <title-dropdown [title]=\"key | underscoreToSpace\" [isDisabled]=\"isDisabled(key)\">\n              <li *ngIf=\"schema.properties[key].type === 'array'\" class=\"title-dropdown-item\">\n                <add-new-element-button [path]=\"getPathForChild(key)\" [schema]=\"schema.properties[key]\"></add-new-element-button>\n              </li>\n              <li class=\"title-dropdown-item\">\n                <button type=\"button\" class=\"editor-btn-delete editor-btn-delete-text\" (click)=\"deleteField(key)\">Delete</button>\n              </li>\n              <ng-container *ngIf=\"getTitleDropdownItemTemplateNamesForChild(key)\">\n                <li *ngFor=\"let templateName of getTitleDropdownItemTemplateNamesForChild(key)\" class=\"title-dropdown-item custom-title-dropdown-item\">\n                  <ng-template [ngTemplateOutlet]=\"appGlobalsService.templates[templateName]\"></ng-template>\n                </li>\n              </ng-container>\n              <li class=\"divider\"></li>\n              <li class=\"title-dropdown-item\" (click)=\"$event.stopPropagation()\">\n                <find-replace [path]=\"getPathForChild(key)\" [schema]=\"schema.properties[key]\"></find-replace>\n              </li>\n            </title-dropdown>\n          </td>\n        </tr>\n        <tr>\n          <td>\n            <any-type-field [value]=\"value.get(key) | selfOrEmpty:schema.properties[key]\" [schema]=\"schema.properties[key]\" [path]=\"getPathForChild(key)\"></any-type-field>\n          </td>\n        </tr>\n      </div>\n    </div>\n  </table>\n</div>\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'sanitizeUrl',\n})\n\nexport class SanitizeUrlPipe implements PipeTransform {\n\n  constructor(public domSanitizer: DomSanitizer) { }\n\n  /**\n   * Transforms url to safe url that can be used for `<script src>` or `<iframe src>`\n   *\n   * @param {string} url\n   * @return {SafeResourceUrl}\n   */\n  transform(url: string): SafeResourceUrl {\n    return this.domSanitizer.bypassSecurityTrustResourceUrl(url);\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, Input, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'html-view',\n  styleUrls: [\n    './html-view.component.scss'\n  ],\n  templateUrl: './html-view.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class HtmlViewComponent {\n\n  @Input() url: string;\n\n}\n","<object class=\"fit-parent\" [data]=\"url | sanitizeUrl\"></object>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, Input, ChangeDetectionStrategy } from '@angular/core';\n\nimport { Preview } from '../shared/interfaces';\n\n@Component({\n  selector: 'editor-previewer',\n  styleUrls: [\n    './editor-previewer.component.scss'\n  ],\n  templateUrl: './editor-previewer.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class EditorPreviewerComponent {\n\n  @Input() previews: Array<Preview>;\n\n  openUrlInNewWindow(url: string) {\n    window.open(url, 'Preview', 'left=20,top=20,width=750,height=750');\n  }\n\n  trackByIndex(index: number, element: any): number {\n    return index;\n  }\n}\n","<div>\n  <tabset>\n    <tab *ngFor=\"let preview of previews; trackBy:trackByIndex\" [heading]=\"preview.name\">\n      <div [ngSwitch]=\"preview.type\">\n        <div *ngSwitchCase=\"'html'\" class=\"preview-container\">\n          <ng-template tabHeading>\n            <span class=\"preview-link\" (click)=\"openUrlInNewWindow(preview.url)\">\n              <i class=\"fa fa-external-link\"></i>\n            </span>\n          </ng-template>\n          <html-view [url]=\"preview.url\"></html-view>\n        </div>\n      </div>\n    </tab>\n  </tabset>\n</div>","<ng-template tabHeading>\n  <i [ngClass]=\"iconClassName\"></i> {{problemType | titlecase}} <span class=\"badge\">{{problemCount}}</span>\n</ng-template>\n\n<ul class=\"list-group\">\n  <ng-container *ngFor=\"let key of internalProblemMap | keys\">\n    <li *ngFor=\"let problem of internalProblemMap[key]\" class=\"list-group-item\" (click)=\"focusAndSelectPath(key)\">\n      <i [ngClass]=\"iconClassName\"></i> {{ problem.message }}\n    </li>\n  </ng-container>\n  <ng-container *ngFor=\"let key of externalProblemMap | keys\">\n    <li *ngFor=\"let problem of externalProblemMap[key]\" class=\"list-group-item\" (click)=\"focusAndSelectPath(key)\">\n      <i [ngClass]=\"iconClassName\"></i> {{ problem.message }}\n    </li>\n  </ng-container>\n</ul>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport {\n  Component,\n  ChangeDetectionStrategy,\n  Input,\n  OnInit,\n  ChangeDetectorRef\n} from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { takeUntil, map } from 'rxjs/operators';\n\nimport { AbstractSubscriberComponent } from '../../abstract-subscriber';\nimport { DomUtilService, PathUtilService, ProblemsService } from '../../shared/services';\nimport { SchemaValidationProblems, ProblemCollectionType } from '../../shared/interfaces';\n\n@Component({\n  selector: 'problems-console-tab',\n  styleUrls: [\n    '../abstract-console-tab/abstract-console-tab.component.scss',\n    './problems-console-tab.component.scss'\n  ],\n  templateUrl: './problems-console-tab.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ProblemsConsoleTabComponent extends AbstractSubscriberComponent implements OnInit {\n\n  @Input() problemType: ProblemCollectionType;\n\n  internalProblemMap: SchemaValidationProblems;\n  externalProblemMap: SchemaValidationProblems;\n  problemCount = 0;\n  iconClassName: string;\n\n  constructor(public domUtilService: DomUtilService,\n    public pathUtilService: PathUtilService,\n    public problemsService: ProblemsService,\n    public changeDetectorRef: ChangeDetectorRef) {\n    super();\n  }\n\n  ngOnInit() {\n    this.problemsService.externalCategorizedProblems$\n      .pipe(map(categorizedProblemMap => categorizedProblemMap[this.problemType]))\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(problemMap => {\n        this.externalProblemMap = problemMap;\n        this.changeDetectorRef.markForCheck();\n      });\n    this.problemsService.internalCategorizedProblems$\n      .pipe(map(categorizedProblemMap => categorizedProblemMap[this.problemType]))\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(problemMap => {\n        this.internalProblemMap = problemMap;\n        this.changeDetectorRef.markForCheck();\n      });\n\n    // TODO: create WarningsConsoleTabComponent with same template to avoid `if`\n\n    const problemCount$ = this.problemType === 'errors' ? this.problemsService.errorCount$ : this.problemsService.warningCount$;\n    problemCount$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(problemCount => {\n        this.problemCount = problemCount;\n      });\n\n    this.iconClassName = this.problemType === 'errors' ? 'fa fa-times' : 'fa fa-exclamation-triangle';\n  }\n\n  focusAndSelectPath(path: string) {\n    this.domUtilService.focusAndSelectFirstEditableChildById(path, true);\n  }\n}\n\n","<ng-template tabHeading>\n  <i class=\"fa fa-bolt\"></i> Conflicts <span class=\"badge\">{{patches.length}}</span>\n</ng-template>\n\n<div *ngIf=\"patches && patches.length > 0\" class=\"header-container\">\n  <ng-template [ngTemplateOutlet]=\"customHeaderTemplate\"></ng-template>\n  <button class=\"btn btn-success\" (click)=\"acceptAll()\">Accept All<i class=\"fa fa-check icon-padding-left\"></i></button>\n  <button class=\"btn btn-danger\" (click)=\"rejectAll()\">Reject All<i class=\"fa fa-times icon-padding-left\"></i></button>\n</div>\n<ul class=\"list-group\">\n  <li *ngFor=\"let path of patchesByPath | keys | sortAlphabetically\" class=\"list-group-item\">\n    <span *ngIf=\"patchesByPath[path].length === 1\" (click)=\"focusPatch(patchesByPath[path][0])\" role=\"button\" class=\"title\">\n      <i class=\"fa fa-bolt\"></i> {{patchesByPath[path][0].path}} - {{patchesByPath[path][0].op}}\n    </span>\n    <ng-container *ngIf=\"patchesByPath[path].length > 1\">\n      <span class=\"title\" role=\"button\" [attr.aria-controls]=\"path + '-collapse'\" (click)=\"collapse.toggle()\">\n        <i class=\"fa fa-expand\"></i> {{path}} ({{patchesByPath[path].length}})\n      </span>\n      <ul class=\"list-group\" #collapse=\"bs-collapse\" [collapse]=\"true\" [attr.id]=\"path + '-collapse'\">\n        <li *ngFor=\"let patch of patchesByPath[path]\" class=\"list-group-item nested\">\n          <span class=\"title\" (click)=\"focusPatch(patch)\" role=\"button\">\n            <i class=\"fa fa-bolt\"></i> {{patch.path}} - {{patch.op}}\n          </span>\n        </li>\n      </ul>\n    </ng-container>\n  </li>\n</ul>\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport {\n  Component,\n  ChangeDetectionStrategy,\n  OnInit,\n  ChangeDetectorRef,\n  TemplateRef\n} from '@angular/core';\nimport { takeUntil } from \"rxjs/operators\";\nimport { AbstractSubscriberComponent } from '../../abstract-subscriber';\nimport { DomUtilService, PathUtilService, JsonStoreService, AppGlobalsService } from '../../shared/services';\nimport { JsonPatch, JsonPatchesByPath } from '../../shared/interfaces';\n\n@Component({\n  selector: 'patches-console-tab',\n  styleUrls: [\n    '../abstract-console-tab/abstract-console-tab.component.scss',\n    './patches-console-tab.component.scss'\n  ],\n  templateUrl: './patches-console-tab.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class PatchesConsoleTabComponent extends AbstractSubscriberComponent implements OnInit {\n\n  patchesByPath: JsonPatchesByPath = {};\n\n  constructor(private domUtilService: DomUtilService,\n    private appGlobalsService: AppGlobalsService,\n    private pathUtilService: PathUtilService,\n    private jsonStoreService: JsonStoreService,\n    private changeDetectorRef: ChangeDetectorRef) {\n    super();\n  }\n\n  ngOnInit() {\n    this.jsonStoreService.patchesByPath$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(patchesByPath => {\n        this.patchesByPath = patchesByPath;\n        this.changeDetectorRef.markForCheck();\n      });\n  }\n\n  focusPatch(patch: JsonPatch) {\n    this.domUtilService.focusPatch(patch);\n  }\n\n  get patches(): Array<JsonPatch> {\n    return Object\n      .keys(this.patchesByPath)\n      .reduce((patches, path) => patches.concat(this.patchesByPath[path]), []);\n  }\n\n  get customHeaderTemplate(): TemplateRef<any> {\n    return this.appGlobalsService.templates.patchesHeaderTemplate;\n  }\n\n  acceptAll() {\n    this.patches\n      .forEach(patch => this.jsonStoreService.applyPatch(patch));\n  }\n\n  rejectAll() {\n    this.patches\n      .forEach(patch => this.jsonStoreService.rejectPatch(patch));\n  }\n}\n\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2017 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport {\n  Component, Input, ChangeDetectorRef, ChangeDetectionStrategy, OnInit, Output,\n  EventEmitter, OnDestroy\n} from '@angular/core';\n\nimport { CategorizedValidationProblems } from '../shared/interfaces';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'bottom-console',\n  styleUrls: [\n    './bottom-console.component.scss'\n  ],\n  templateUrl: './bottom-console.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BottomConsoleComponent {\n\n  @Input() isOpen = false;\n  @Input() activeTab = '';\n\n  @Output() onCollapse = new EventEmitter<boolean>();\n\n  closePanel() {\n    this.onCollapse.emit(false);\n  }\n\n  isActive(tabName: string): boolean {\n    return tabName === this.activeTab;\n  }\n}\n","<div *ngIf=\"isOpen\" class=\"bottom-console-container\">\n  <tabset>\n    <tab [active]=\"isActive('Errors')\">\n      <problems-console-tab [problemType]=\"'errors'\"></problems-console-tab>\n    </tab>\n    <tab [active]=\"isActive('Warnings')\">\n      <problems-console-tab [problemType]=\"'warnings'\"></problems-console-tab>\n    </tab>\n    <tab [active]=\"isActive('Patches')\">\n      <patches-console-tab></patches-console-tab>\n    </tab>\n    <tab (select)=\"closePanel()\" [customClass]=\"'pull-right'\">\n      <ng-template tabHeading>\n        <i class=\"fa fa-window-close\"></i>\n      </ng-template>\n    </tab>\n  </tabset>\n</div>","<div id=\"ng2-json-editor\" class=\"editor-container\" [ngClass]=\"shorterEditorContainerClass\">\n  \n  <div  *ngIf=\"!config.compact\" class=\"collapsed-menu-container\">\n      <add-field-dropdown [fields]=\"keys$ | async\" [pathString]=\"pathString\" \n      [schema]=\"fixedSchema\" class=\"add-field-button\">\n        <i class=\"fa fa-plus fa-2x\" tooltip=\"Add Field\" placement=\"right\"></i>\n      </add-field-dropdown>\n    <span id=\"preview-toggle-icon\" tooltip=\"{{isPreviewerHidden ? 'Show Preview' : 'Hide Preview'}}\" placement=\"right\"class=\"preview-icon\" (click)=\"isPreviewerHidden = !isPreviewerHidden\">\n      <i class=\"fa fa-1x\" [ngClass]=\"!isPreviewerHidden ? 'fa-eye-slash' : 'fa-eye'\"></i>\n    </span>\n    <bottom-console-badges (badgeClick)=\"openBottomConsole($event)\"></bottom-console-badges>\n    <span class=\"open-sidebar-container\" (click)=\"isSidebarCollapsed = !isSidebarCollapsed\">\n      <i class=\"fa fa-angle-right fa-4x\" [class.rotate]=\"!isSidebarCollapsed\"></i>\n    </span>\n  </div>\n\n  <div *ngIf=\"!config.compact\" class=\"menu-container\" [ngClass]=\"isSidebarCollapsed ? 'close' : 'open'\">\n    <tree-menu [record]=\"_record\" [schema]=\"fixedSchema\"></tree-menu>\n    <hr>\n    <div *ngIf=\"config.enableAdminModeSwitch\" class=\"admin-mode\" tooltip=\"Allows editing all fields (use with care)\">\n      <input id=\"admin-mode-checkbox\" type=\"checkbox\" [(ngModel)]=\"appGlobalsService.adminMode\" />\n      <label class=\"admin-mode\" for=\"admin-mode-checkbox\">Enable Admin Mode</label>\n    </div>\n    <hr>\n  </div>\n\n  <div id=\"middle-main-container\" class=\"middle main-container\" [shortcuts]=\"customShortcutKeys\" [ngClass]=\"{ 'maximizeEditor' : isPreviewerHidden, 'compact' : config.compact }\">\n    <add-field-dropdown *ngIf=\"config.compact\" [fields]=\"keys$ | async\" [pathString]=\"pathString\" \n    [schema]=\"fixedSchema\">Add field</add-field-dropdown>\n    <tabset *ngIf=\"config.tabsConfig\">\n      <tab *ngFor=\"let tabName of tabNames; trackBy:trackByElement\" [heading]=\"tabName\" (select)=\"activeTabName = tabName\" [active]=\"isActiveTab(tabName)\">\n        <sub-record [value]=\"_record\" [tabName]=\"tabName\" [schema]=\"fixedSchema\" [keys]=\"keys$ | async\" [pathString]=\"pathString\"></sub-record>\n      </tab>\n    </tabset>\n    <sub-record *ngIf=\"!config.tabsConfig\" [value]=\"_record\" [schema]=\"fixedSchema\" [keys]=\"keys$ | async\" [pathString]=\"pathString\"></sub-record>\n  </div>\n\n  <div id=\"right-main-container\" *ngIf=\"!isPreviewerDisabled\" class=\"main-container right\" [ngClass]=\"isPreviewerHidden ? 'minimizePreview' : 'maximizePreview' \">\n    <editor-previewer [hidden]=\"isPreviewerHidden\" [previews]=\"previews\"> </editor-previewer>\n  </div>\n\n</div>\n\n<bottom-console *ngIf=\"!config.compact\" [activeTab]=\"bottomConsoleActiveTab\" [isOpen]=\"isBottomConsoleOpen\" (onCollapse)=\"isBottomConsoleOpen = $event\"></bottom-console>\n<!-- Modal View controlled by ModalService -->\n<modal-view>\n</modal-view>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n */\n\nimport {\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n  OnInit,\n  OnChanges,\n  SimpleChanges,\n  ViewEncapsulation,\n  ChangeDetectionStrategy,\n  TemplateRef\n} from '@angular/core';\nimport { fromJS, Map, Set } from 'immutable';\n\nimport { ReplaySubject } from 'rxjs';\nimport { takeUntil, skipWhile } from 'rxjs/operators';\n\nimport { AbstractSubscriberComponent } from './abstract-subscriber';\nimport {\n  AppGlobalsService,\n  JsonStoreService,\n  JsonUtilService,\n  JsonSchemaService,\n  KeysStoreService,\n  PathUtilService,\n  RecordFixerService,\n  SchemaFixerService,\n  TabsUtilService,\n  ProblemsService\n} from './shared/services';\n\nimport {\n  JsonEditorConfig,\n  Preview,\n  SchemaValidationProblems,\n  JsonPatch,\n  Shortcut,\n  CustomShortcutKeys,\n  JSONSchema\n} from './shared/interfaces';\n\n\n@Component({\n  selector: 'json-editor',\n  encapsulation: ViewEncapsulation.None,\n  styleUrls: [\n    './json-editor.component.scss'\n  ],\n  templateUrl: './json-editor.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\n\nexport class JsonEditorComponent extends AbstractSubscriberComponent implements OnChanges, OnInit {\n\n  @Input() config: JsonEditorConfig;\n  @Input() record: object;\n  // original schema\n  @Input() schema: any;\n  @Input() problemMap: SchemaValidationProblems;\n  @Input() jsonPatches: Array<JsonPatch>;\n  @Input() templates: { [templateName: string]: TemplateRef<any> };\n\n  @Output() recordChange = new EventEmitter<Object>();\n  @Output() jsonPatchesChange = new EventEmitter<Array<JsonPatch>>();\n  @Output() validationProblems = new EventEmitter<SchemaValidationProblems>();\n\n  readonly pathString = '';\n  _record: Map<string, any>;\n  tabNames: Array<string>;\n  previews: Array<Preview>;\n  isBottomConsoleOpen = false;\n  isPreviewerHidden = false;\n  isSidebarCollapsed = true;\n  bottomConsoleActiveTab = '';\n  customShortcutKeys: CustomShortcutKeys;\n  // altered schema enchanced with configs\n  fixedSchema: JSONSchema;\n\n  // used to decide if the [record] is change caused by recordChange.emit or parent component\n  private lastEmittedRecord: object;\n\n  constructor(\n    public appGlobalsService: AppGlobalsService,\n    public problemsService: ProblemsService,\n    public jsonStoreService: JsonStoreService,\n    public jsonUtilService: JsonUtilService,\n    public jsonSchemaService: JsonSchemaService,\n    public keysStoreService: KeysStoreService,\n    public recordFixerService: RecordFixerService,\n    public schemaFixerService: SchemaFixerService,\n    public tabsUtilService: TabsUtilService,\n    public pathUtilService: PathUtilService\n  ) {\n    super();\n  }\n\n  ngOnInit() {\n    this.isPreviewerHidden = this.config.isPreviewerHiddenOnStart;\n    this.appGlobalsService.adminMode$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(adminMode => {\n        this.keysStoreService.buildKeysMap(this._record, this.fixedSchema);\n      });\n\n    // listen for all changes on json\n    this.jsonStoreService.json$\n      .pipe(skipWhile(json => json === this._record))\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(json => {\n        this._record = json;\n        // emit the change as plain JS object\n        this.lastEmittedRecord = json.toJS();\n        this.recordChange.emit(this.lastEmittedRecord);\n      });\n\n    // list for all changes on jsonPatches\n    this.jsonStoreService.jsonPatches$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(patches => {\n        this.jsonPatchesChange.emit(patches);\n      });\n\n    this.problemsService.internalProblemMap$\n      .pipe(takeUntil(this.isDestroyed))\n      .subscribe(internalProblemMap => {\n        this.validationProblems.emit(internalProblemMap);\n      });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    // throw error if a required input is undefined\n    if (changes['schema'] && !this.schema) {\n      this.throwInputUndefined('schema');\n    }\n    if (changes['record'] && !this.record) {\n      this.throwInputUndefined('record');\n    }\n\n    // warn if an important input is undefined\n    if (changes['config'] && !this.config) {\n      this.config = {};\n      console.warn(`[config] is undefined, make sure that is intended.`);\n    }\n\n    const recordChanged = changes['record'] && this.record !== this.lastEmittedRecord;\n    const schemaChanged = changes['schema'] || changes['config'];\n\n    if (schemaChanged) {\n      this.fixedSchema = this.schemaFixerService.fixSchema(this.schema, this.config.schemaOptions);\n      this.jsonSchemaService.setSchema(this.fixedSchema);\n    }\n\n    if (schemaChanged || recordChanged) {\n      this.record = this.recordFixerService.fixRecord(this.record, this.fixedSchema);\n      this.lastEmittedRecord = this.record;\n      this._record = fromJS(this.record);\n      this.jsonStoreService.setJson(this._record);\n      this.keysStoreService.buildKeysMap(this._record, this.fixedSchema);\n    }\n\n\n    if (changes['config']) {\n      this.appGlobalsService.config = this.config;\n      if (this.config.tabsConfig) {\n        this.tabNames = this.tabsUtilService.getTabNames(this.config.tabsConfig);\n        this.tabsUtilService.activeTabName$.subscribe(tabName => { this.appGlobalsService.activeTabName = tabName; });\n        this.appGlobalsService.activeTabName = this.config.tabsConfig.defaultTabName;\n      }\n\n      this.customShortcutKeys = this.config.shortcuts;\n    }\n\n    if (recordChanged || changes['config']) {\n      this.extractPreviews();\n    }\n\n    if (changes['jsonPatches']) {\n      if (this.jsonPatches) {\n        this.jsonStoreService.setJsonPatches(this.jsonPatches);\n      }\n    }\n\n    if (changes['problemMap']) {\n      this.problemsService.externalProblems = this.problemMap;\n    }\n\n    if (changes['templates']) {\n      this.appGlobalsService.templates = this.templates || {};\n    }\n  }\n\n  private throwInputUndefined(inputName: string) {\n    throw new Error(`[${inputName}] is undefined!\n      if you are fetching ${inputName} async then please consider using:\n        <json-editor *ngIf=\"${inputName}\" [${inputName}]=\"${inputName}\" ...> </json-editor>\n      in order to wait for it to be fetched before initializing json-editor`\n    );\n  }\n\n  /**\n   * Converts PreviewConfig instances to Preview instances and appends to `previews` array.\n   */\n  private extractPreviews() {\n    if (!this.isPreviewerDisabled) {\n      // if url is not set directly, populate it\n      this.previews = [];\n      this.config.previews\n        .forEach(previewConfig => {\n          let url: string;\n          if (previewConfig.url) {\n            url = previewConfig.url;\n          } else if (previewConfig.getUrl) {\n            url = previewConfig.getUrl(this.record);\n          } else if (previewConfig.urlPath) {\n            try {\n              url = this.jsonUtilService.getValueInPath(this.record, previewConfig.urlPath);\n            } catch (error) {\n              console.warn(`Path ${previewConfig.urlPath} in preview config is not present in the input record`);\n            }\n          } else {\n            throw new Error('Either url, urlPath or getUrl should be set for a preview');\n          }\n          if (url) {\n            this.previews.push({\n              name: previewConfig.name,\n              type: previewConfig.type,\n              url: url\n            });\n          }\n        });\n    }\n  }\n\n  get keys$(): ReplaySubject<Set<string>> {\n    return this.keysStoreService.forPath(this.pathString);\n  }\n\n  get isPreviewerDisabled(): boolean {\n    return (\n      this.config.previews === undefined || this.config.previews.length === 0\n    );\n  }\n\n  set activeTabName(tabName: string) {\n    this.appGlobalsService.activeTabName = tabName;\n  }\n\n  isActiveTab(tabName) {\n    return this.appGlobalsService.activeTabName === tabName;\n  }\n\n  get shorterEditorContainerClass(): string {\n    return this.isBottomConsoleOpen ? 'shorter-editor-container' : '';\n  }\n\n  openBottomConsole(tabName: string) {\n    this.isBottomConsoleOpen = true;\n    this.bottomConsoleActiveTab = tabName;\n  }\n\n  trackByElement(index: number, element: any): any {\n    return element;\n  }\n}\n","// All rxjs operators used in the codebase\n\nimport { of } from \"rxjs\";\nimport { distinctUntilChanged, filter, map, skipWhile, takeUntil  } from \"rxjs/operators\";\nimport 'rxjs/add/operator/catch';\n\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { PathUtilService } from '../services';\n\n/**\n * Returs last part of json-pointer string\n * Example: for '/foo/bar/0/thing', returs 'thing'\n */\n@Pipe({\n  name: 'lastPathElement'\n})\nexport class LastPathElementPipe implements PipeTransform {\n\n  constructor(private pathUtilService: PathUtilService) { }\n\n  transform(path: string): string {\n    return path\n      .substring(path.lastIndexOf('/') + 1);\n  }\n}\n","<div class=\"btn-group add-field-dropdown-container\" dropdown keyboardNav=\"true\" [isDisabled]=\"isDisabled\">\n  <button type=\"button\" class=\"btn btn-add-field-dropdown\" dropdownToggle>\n    <i class=\"fa fa-plus\"></i> <i class=\"fa fa-caret-down\"></i>\n  </button>\n  <ul class=\"dropdown-menu\" *dropdownMenu>\n    <div *ngFor=\"let path of nestedKeysMap | keys | sortAlphabetically; first as isFirst\">\n      <div *ngIf=\"addableKeysForPath(path); let addableKeys\">\n        <li *ngIf=\"!isFirst\" class=\"divider dropdown-divider\"></li>\n        <li *ngIf=\"!isFirst\" class=\"dropdown-header title\">{{path | lastPathElement}}</li>\n        <li *ngFor=\"let key of addableKeys | sortAlphabetically\">\n          <a class=\"dropdown-item\" href=\"javascript:void(0)\" (click)=\"onFieldSelect(path, key)\">{{key}}</a>\n        </li>\n      </div>\n    </div>\n  </ul>\n</div>","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Component, Input, OnChanges, SimpleChanges, ChangeDetectionStrategy, OnDestroy } from '@angular/core';\nimport { Set } from 'immutable';\nimport { Subscription } from 'rxjs';\nimport { filter, takeUntil } from 'rxjs/operators';\n\nimport { AbstractSubscriberComponent } from '../abstract-subscriber';\nimport { DomUtilService, PathUtilService, KeysStoreService, JsonSchemaService } from '../shared/services';\nimport { JSONSchema } from '../shared/interfaces';\n\n@Component({\n  selector: 'add-nested-field-dropdown',\n  styleUrls: [\n    './add-field-dropdown.component.scss',\n    './add-nested-field-dropdown.component.scss'\n  ],\n  templateUrl: './add-nested-field-dropdown.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AddNestedFieldDropdownComponent extends AbstractSubscriberComponent implements OnChanges, OnDestroy {\n\n  @Input() schema: JSONSchema;\n  @Input() pathString: string;\n  @Input() isDisabled: boolean;\n\n  nestedKeysMap: { [path: string]: Set<string> };\n  keysChangeSubscription: Subscription;\n\n  constructor(public keysStoreService: KeysStoreService,\n    public jsonSchemaService: JsonSchemaService,\n    public pathUtilService: PathUtilService,\n    public domUtilService: DomUtilService) {\n    super();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    const pathStringChange = changes['pathString'];\n    if (pathStringChange) {\n      this.nestedKeysMap = {};\n      this.nestedKeysMap[this.pathString] = this.keysStoreService.keysMap[this.pathString];\n      const nestedPathPrefix = this.pathString + this.pathUtilService.separator;\n      Object.keys(this.keysStoreService.keysMap)\n        .filter(path => path.startsWith(nestedPathPrefix))\n        .forEach(path => {\n          this.nestedKeysMap[path] = this.keysStoreService.keysMap[path];\n        });\n\n      if (this.keysChangeSubscription) {\n        this.keysChangeSubscription.unsubscribe();\n      }\n      this.keysChangeSubscription = this.keysStoreService.onKeysChange\n        .pipe(filter(change => change.path.startsWith(this.pathString)))\n        .pipe(takeUntil(this.isDestroyed))\n        .subscribe(change => { this.nestedKeysMap[change.path] = change.keys; });\n    }\n  }\n\n  /**\n   * Return keys that could be added for the given path.\n   *\n   * @return schema key - hidden keys - existing keys\n   */\n  addableKeysForPath(path: string): Set<string> {\n    const keys = this.nestedKeysMap[path];\n    const schema = this.jsonSchemaService.forPathString(path);\n    // || schema.items.properties is to handle the keys when the path belongs to table-list.\n    const schemaProps = schema.properties || schema.items.properties;\n    const schemaKeys = Set<string>(Object.keys(schemaProps)\n      .filter(key => !schemaProps[key].hidden));\n    const addableKeys = schemaKeys.subtract(keys);\n    return addableKeys.size > 0 ? addableKeys : undefined;\n  }\n\n  onFieldSelect(path: string, key: string) {\n    let schema = this.jsonSchemaService.forPathString(path);\n    if (schema.componentType === 'table-list') {\n      schema = schema.items;\n    }\n    const newKeyPath = this.keysStoreService.addKey(path, key, schema);\n    if (this.keysStoreService.keysMap[newKeyPath]) {\n      this.nestedKeysMap[newKeyPath] = this.keysStoreService.keysMap[newKeyPath];\n    }\n    this.domUtilService.focusAndSelectFirstEditableChildById(newKeyPath);\n  }\n}\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { Set } from 'immutable';\n\n/**\n * It returns array of keys which aren't present in given object\n */\n@Pipe({\n  name: 'differentKeys'\n})\nexport class DifferentKeysPipe implements PipeTransform {\n  transform(object: object, keys: Set<string>): Set<string> {\n    return Set.fromKeys(object).subtract(keys);\n  }\n}\n","import { AddAlwaysShowFieldsPipe } from './add-always-show-fields.pipe';\nimport { DifferentKeysPipe } from './different-keys.pipe';\nimport { FilterByExpressionPipe } from './filter-by-expression.pipe';\nimport { FilterHiddenFieldsPipe } from './filter-hidden-fields.pipe';\nimport { SanitizeUrlPipe } from './sanitize-url.pipe';\nimport { SelfOrEmptyPipe } from './self-or-empty.pipe';\nimport { UnderscoreToSpacePipe } from './underscore-to-space.pipe';\nimport { SetFirstElementPathPipe } from './set-first-element-path.pipe';\nimport { SortAlphabeticallyPipe } from './sort-alphabetically.pipe';\nimport { KeysPipe } from './keys-pipe';\nimport { LastPathElementPipe } from './last-path-element.pipe';\nimport { TypeOfPipe } from './type-of.pipe';\nimport { SortKeysBySchemaPipe } from './sort-keys-by-schema.pipe';\n\nexport {\n  AddAlwaysShowFieldsPipe,\n  DifferentKeysPipe,\n  FilterByExpressionPipe,\n  FilterHiddenFieldsPipe,\n  SanitizeUrlPipe,\n  SelfOrEmptyPipe,\n  UnderscoreToSpacePipe,\n  SetFirstElementPathPipe,\n  SortAlphabeticallyPipe,\n  KeysPipe,\n  LastPathElementPipe,\n  TypeOfPipe,\n  SortKeysBySchemaPipe\n};\n\nexport const SHARED_PIPES = [\n  AddAlwaysShowFieldsPipe,\n  DifferentKeysPipe,\n  FilterByExpressionPipe,\n  FilterHiddenFieldsPipe,\n  SanitizeUrlPipe,\n  SelfOrEmptyPipe,\n  UnderscoreToSpacePipe,\n  SetFirstElementPathPipe,\n  SortAlphabeticallyPipe,\n  KeysPipe,\n  LastPathElementPipe,\n  TypeOfPipe,\n  SortKeysBySchemaPipe\n];\n","import { ShortcutsDirective } from './shortcuts.directive';\nimport { ContentModelDirective } from './content-model.directive';\n\nexport {\n  ShortcutsDirective,\n  ContentModelDirective\n};\n\nexport const SHARED_DIRECTIVES = [\n  ShortcutsDirective,\n  ContentModelDirective\n];\n","/*\n * This file is part of ng2-json-editor.\n * Copyright (C) 2016 CERN.\n *\n * ng2-json-editor is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License as\n * published by the Free Software Foundation; either version 2 of the\n * License, or (at your option) any later version.\n *\n * ng2-json-editor is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ng2-json-editor; if not, write to the Free Software Foundation, Inc.,\n * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.\n * In applying this license, CERN does not\n * waive the privileges and immunities granted to it by virtue of its status\n * as an Intergovernmental Organization or submit itself to any jurisdiction.\n*/\n\nimport './rxjs-operators';\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { CollapseModule } from 'ngx-bootstrap/collapse';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { PaginationModule } from 'ngx-bootstrap/pagination';\nimport { ModalModule } from 'ngx-bootstrap/modal';\nimport { TabsModule } from 'ngx-bootstrap/tabs';\nimport { TypeaheadModule } from 'ngx-bootstrap/typeahead';\n\nimport {\n  AddFieldDropdownComponent,\n  AddNestedFieldDropdownComponent\n} from './add-field-dropdown';\nimport { AddNewElementButtonComponent } from './add-new-element-button';\nimport { AnyTypeFieldComponent } from './any-type-field';\nimport { AutocompleteInputComponent } from './autocomplete-input';\nimport { ComplexListFieldComponent } from './complex-list-field';\nimport { EditorPreviewerComponent } from './editor-previewer';\nimport { SubRecordComponent } from './sub-record';\nimport { BottomConsoleBadgesComponent } from './bottom-console-badges';\nimport { FindReplaceComponent } from './find-replace';\nimport { HtmlViewComponent } from './html-view';\nimport { JsonEditorComponent } from './json-editor.component';\nimport { ModalViewComponent } from './modal-view';\nimport { ObjectFieldComponent } from './object-field';\nimport { PrimitiveListFieldComponent } from './primitive-list-field';\nimport { PrimitiveFieldComponent } from './primitive-field';\nimport { RefFieldComponent } from './ref-field';\nimport { TableListFieldComponent } from './table-list-field';\nimport { TableItemFieldComponent } from './table-item-field';\nimport { TitleDropdownComponent } from './title-dropdown';\nimport { StringInputComponent } from './string-input';\nimport {\n  TreeMenuComponent,\n  TreeMenuItemComponent\n} from './tree-menu';\nimport { SearchableDropdownComponent } from './searchable-dropdown';\nimport { ListActionGroupComponent } from './list-action-group';\nimport { SHARED_PIPES, SHARED_SERVICES, SHARED_DIRECTIVES } from './shared';\nimport { BottomConsoleComponent, PatchesConsoleTabComponent, ProblemsConsoleTabComponent } from './bottom-console';\nimport { TextDiffComponent } from './text-diff';\nimport { PatchActionsComponent } from './patch-actions';\nimport { AddOrReplacePatchComponent } from './add-or-replace-patch';\n\n@NgModule({\n  declarations: [\n    ...SHARED_PIPES,\n    ...SHARED_DIRECTIVES,\n    AddFieldDropdownComponent,\n    AddNestedFieldDropdownComponent,\n    AddNewElementButtonComponent,\n    AnyTypeFieldComponent,\n    AutocompleteInputComponent,\n    ComplexListFieldComponent,\n    ObjectFieldComponent,\n    EditorPreviewerComponent,\n    FindReplaceComponent,\n    ModalViewComponent,\n    PrimitiveListFieldComponent,\n    PrimitiveFieldComponent,\n    RefFieldComponent,\n    SearchableDropdownComponent,\n    ListActionGroupComponent,\n    TableListFieldComponent,\n    TableItemFieldComponent,\n    TitleDropdownComponent,\n    TreeMenuItemComponent,\n    TreeMenuComponent,\n    JsonEditorComponent,\n    SubRecordComponent,\n    HtmlViewComponent,\n    BottomConsoleBadgesComponent,\n    BottomConsoleComponent,\n    StringInputComponent,\n    TextDiffComponent,\n    PatchActionsComponent,\n    PatchesConsoleTabComponent,\n    ProblemsConsoleTabComponent,\n    AddOrReplacePatchComponent\n  ],\n  exports: [JsonEditorComponent],\n  imports: [\n    TooltipModule.forRoot(),\n    CollapseModule.forRoot(),\n    PopoverModule.forRoot(),\n    BsDropdownModule.forRoot(),\n    PaginationModule.forRoot(),\n    ModalModule.forRoot(),\n    TabsModule.forRoot(),\n    TypeaheadModule.forRoot(),\n    CommonModule,\n    FormsModule,\n    HttpClientModule\n  ],\n  providers: SHARED_SERVICES\n})\nexport class JsonEditorModule { }\n\nexport {\n  AddFieldDropdownComponent,\n  AddNestedFieldDropdownComponent,\n  AddNewElementButtonComponent,\n  AnyTypeFieldComponent,\n  AutocompleteInputComponent,\n  ComplexListFieldComponent,\n  ObjectFieldComponent,\n  EditorPreviewerComponent,\n  BottomConsoleComponent,\n  FindReplaceComponent,\n  ModalViewComponent,\n  PrimitiveListFieldComponent,\n  PrimitiveFieldComponent,\n  RefFieldComponent,\n  SearchableDropdownComponent,\n  ListActionGroupComponent,\n  TableListFieldComponent,\n  TableItemFieldComponent,\n  TitleDropdownComponent,\n  TreeMenuItemComponent,\n  TreeMenuComponent,\n  JsonEditorComponent,\n  SubRecordComponent,\n  HtmlViewComponent,\n  BottomConsoleBadgesComponent,\n  StringInputComponent,\n  TextDiffComponent,\n  PatchActionsComponent,\n  PatchesConsoleTabComponent,\n  ProblemsConsoleTabComponent,\n  AddOrReplacePatchComponent\n};\n","/*\n * Public API Surface of json-editor\n */\n\nexport * from './lib/json-editor.component';\nexport * from './lib/json-editor.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Subject","Component","ReplaySubject","Injectable","map","fromJS","immutable","List","Map","Seq","_.cloneDeep","_.mergeWith","_.merge","_","Ajv","enableCustomErrorMessages","combineLatest","distinctUntilChanged","render","ParseError","diffWords","Mousetrap","Directive","Input","i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵelement","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵtemplate","i0.ɵɵadvance","i0.ɵɵtextInterpolate","i0.ɵɵproperty","takeUntil","ChangeDetectionStrategy","ViewChild","Pipe","i0.ɵɵprojection","Set","i0.ɵɵpropertyInterpolate1","EventEmitter","Output","i0.ɵɵtextInterpolate1","i0.ɵɵstyleProp","i0.ɵɵclassProp","ViewEncapsulation","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","i0.ɵɵtextInterpolate2","skipWhile","HostListener","i0.ɵɵattribute","BiDirectionalMap","Observable","i0.ɵɵpropertyInterpolate","filter","TooltipModule","CollapseModule","PopoverModule","BsDropdownModule","PaginationModule","ModalModule","TabsModule","TypeaheadModule","CommonModule","FormsModule","HttpClientModule","NgModule"],"mappings":"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"}