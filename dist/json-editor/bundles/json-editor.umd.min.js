!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("immutable"),require("rxjs/operators"),require("rxjs"),require("rxjs/ReplaySubject"),require("@angular/common/http"),require("lodash"),require("ajv"),require("ajv-errors"),require("katex"),require("diff"),require("@angular/common"),require("mousetrap"),require("ngx-bootstrap/modal"),require("ngx-bootstrap/dropdown"),require("@angular/forms"),require("ngx-bootstrap/tooltip"),require("ngx-bootstrap/tabs"),require("@angular/platform-browser"),require("ngx-bootstrap/pagination"),require("bi-directional-map/dist"),require("ngx-bootstrap/typeahead"),require("ngx-bootstrap/popover"),require("ngx-bootstrap/collapse"),require("rxjs/add/operator/catch")):"function"==typeof define&&define.amd?define("json-editor",["exports","@angular/core","immutable","rxjs/operators","rxjs","rxjs/ReplaySubject","@angular/common/http","lodash","ajv","ajv-errors","katex","diff","@angular/common","mousetrap","ngx-bootstrap/modal","ngx-bootstrap/dropdown","@angular/forms","ngx-bootstrap/tooltip","ngx-bootstrap/tabs","@angular/platform-browser","ngx-bootstrap/pagination","bi-directional-map/dist","ngx-bootstrap/typeahead","ngx-bootstrap/popover","ngx-bootstrap/collapse","rxjs/add/operator/catch"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["json-editor"]={},e.ng.core,e.immutable,e.rxjs.operators,e.rxjs,e.rxjs.ReplaySubject,e.ng.common.http,e._,e.Ajv,e.enableCustomErrorMessages,e.katex,e.diff,e.ng.common,e.mousetrap,e.i21,e.i19,e.ng.forms,e.i16,e.i22,e.ng.platformBrowser,e.i20,e.dist,e.i23,e.i18,e.i17)}(this,(function(e,t,n,r,i,o,a,c,s,l,p,d,u,h,f,m,g,v,y,b,S,C,x,w,P){"use strict";function E(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var I=E(c),j=E(s),k=E(l),O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;function D(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function F(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(D(arguments[t]));return e}Object.create;var T=function(){function e(){this.isDestroyed=new i.Subject}return e.prototype.ngOnDestroy=function(){this.isDestroyed.next(),this.isDestroyed.complete()},e}();T.ɵfac=function(e){return new(e||T)},T.ɵcmp=t.ɵɵdefineComponent({type:T,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,t){},encapsulation:2});var N=function(){function e(){this.adminMode$=new o.ReplaySubject(1),this.activeTabName="",this.tabNameToFirstTopLevelElement={},this.templates={},this._adminMode=!1}return Object.defineProperty(e.prototype,"adminMode",{get:function(){return this._adminMode},set:function(e){this._adminMode=e,this.adminMode$.next(this._adminMode)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementPathForCurrentTab",{get:function(){return this.tabNameToFirstTopLevelElement[this.activeTabName]},enumerable:!1,configurable:!0}),e}();N.ɵfac=function(e){return new(e||N)},N.ɵprov=t.ɵɵdefineInjectable({token:N,factory:N.ɵfac});var B=function(){function e(){this.separator="/"}return e.prototype.getNearestOrRootArrayParentInPath=function(e,t){for(var n=[],r=e.length,i=0;i<r;i++)if("number"==typeof(n=t?e.slice(0,i+1):e.slice(0,e.length-i))[n.length-1]){n.pop();break}return n},e.prototype.getElementIndexInForwardOrReversePath=function(e,t){return this.findIndexFromPath(e.slice(),t)},e.prototype.findIndexFromPath=function(e,t){for(var n in e=t?e:e.reverse())if(!isNaN(e[n]))return e[n];return-1},e.prototype.toPathString=function(e){return 0===e.length?"":""+this.separator+e.join(this.separator)},e.prototype.toPathArray=function(e){return e.split(this.separator).slice(1).map((function(e){return isNaN(parseInt(e,10))?e:parseInt(e,10)}))},e}();B.ɵfac=function(e){return new(e||B)},B.ɵprov=t.ɵɵdefineInjectable({token:B,factory:B.ɵfac});var V=function(){function e(e,t){this.http=e,this.pathUtilService=t}return e.prototype.getAutocompletionResults=function(e,t){var n=this;return this.http.get(""+e.url+t).pipe(r.map((function(t){return n.mapResponseToResults(t,e.path)})))},e.prototype.mapResponseToResults=function(e,t){var n=this.pathUtilService.toPathArray(t),r=e.json();return n.forEach((function(e){r=r[e]})),r},e}();V.ɵfac=function(e){return new(e||V)(t.ɵɵinject(a.HttpClient),t.ɵɵinject(B))},V.ɵprov=t.ɵɵdefineInjectable({token:V,factory:V.ɵfac});var A=function(){function e(){}return e.prototype.getComponentType=function(e){if(!e)throw new Error("schema is undefined");var t=e.type;if(t){if("string"===t){if(e.autocompletionConfig)return"autocomplete";if(e.enum)return"enum"}else if("object"===t){if(e.properties.$ref)return"ref"}else if("array"===t){var n=e.items;return"object"!==n.type||n.properties.$ref?"primitive-list":Object.keys(n.properties).some((function(e){var t=n.properties[e];return"object"===t.type&&!t.properties.$ref||"array"===t.type&&("object"===t.items.type||"array"===t.items.type)}))?"complex-list":"table-list"}}else if(0===Object.keys(e).length)return"raw";return t},e}();A.ɵfac=function(e){return new(e||A)},A.ɵprov=t.ɵɵdefineInjectable({token:A,factory:A.ɵfac});var _=function(){function e(e){this.pathUtilService=e,this.activeTabName$=new i.ReplaySubject(1)}return e.prototype.getTabNames=function(e){var t=e.tabs.map((function(e){return e.name}));return[e.defaultTabName].concat(t)},e.prototype.getSchemaKeyToTabName=function(e,t){if(!this.schemaKeyToTabName){var n=e.tabs.map((function(e){var t={};return e.properties.forEach((function(n){t[n]=e.name})),t})).reduce((function(e,t){return Object.assign(e,t)}));Object.keys(t.properties).filter((function(e){return!n[e]})).forEach((function(t){n[t]=e.defaultTabName})),this.schemaKeyToTabName=n}return this.schemaKeyToTabName},e.prototype.selectTabIfNeeded=function(e){if(this.schemaKeyToTabName&&""!==e){var t=this.schemaKeyToTabName[this.pathUtilService.toPathArray(e)[0]];this.activeTabName$.next(t)}},e}();_.ɵfac=function(e){return new(e||_)(t.ɵɵinject(B))},_.ɵprov=t.ɵɵdefineInjectable({token:_,factory:_.ɵfac});var R=function(){function e(e){this.pathUtilService=e,this.pageChange$Map={},this.itemsPerPageMap={}}return e.prototype.changePage=function(e){var t=this.pathUtilService.toPathArray(e),n=this.pathUtilService.getNearestOrRootArrayParentInPath(t,!0),r=this.pathUtilService.toPathString(n);if(this.pageChange$Map[r]){var i=t[n.length],o=this.itemsPerPageMap[r],a=Math.floor(i/o+1);this.pageChange$Map[r].next(a)}},e.prototype.registerPaginatedList=function(e,t){return this.itemsPerPageMap[e]=t,this.pageChange$Map[e]=new i.ReplaySubject(1),this.pageChange$Map[e]},e}();R.ɵfac=function(e){return new(e||R)(t.ɵɵinject(B))},R.ɵprov=t.ɵɵdefineInjectable({token:R,factory:R.ɵfac});var U=function(){function e(e,t){this.tabsUtilService=e,this.listPageChangerService=t,this.editableSelector=".value-container input, span[contenteditable=true], .switch-input, searchable-dropdown span.value",this.highlightClass="highlight"}return e.prototype.focusAndSelectFirstEditableChildById=function(e,t){var n=this;void 0===t&&(t=!1),this.tabsUtilService.selectTabIfNeeded(e),this.listPageChangerService.changePage(e),setTimeout((function(){var r=document.getElementById(e);if(r){var i=r.querySelector(n.editableSelector);i?i.classList.contains("hidden")?(i.nextElementSibling.click(),setTimeout((function(){n.focusAndSelectContent(i,t)}))):n.focusAndSelectContent(i,t):n.openDropdown(r)}}))},e.prototype.focusAndSelectContent=function(e,t){e.focus(),this.selectAllContent(e),t&&(e.classList.add(this.highlightClass),this.highlightedElement=e)},e.prototype.focusFirstInputChildByElement=function(e){var t=e.querySelector("input");t&&t.focus()},e.prototype.focusRightOrLeftParentCell=function(e,t){var n=document.getElementById(e);if(n&&n.tabIndex){for(var r=n.parentElement;"TD"!==r.nodeName;)r=r.parentElement;for(var i=t>0?r.nextElementSibling:r.previousElementSibling;i&&"TD"===i.nodeName;){var o=i.querySelector("input[tabindex='1'], span[contenteditable=true][tabindex='1']");if(o){o.focus(),this.selectAllContent(o);break}i=t>0?i.nextElementSibling:i.previousElementSibling}}},e.prototype.blurFirstEditableChildById=function(e){var t=document.getElementById(e).querySelector(this.editableSelector);t&&t.blur()},e.prototype.clearHighlight=function(){this.highlightedElement&&(this.highlightedElement.classList.remove(this.highlightClass),this.highlightedElement=void 0)},e.prototype.focusPatch=function(e){this.tabsUtilService.selectTabIfNeeded(e.path),this.listPageChangerService.changePage(e.path),setTimeout((function(){var t=document.getElementById(e.path),n=t.querySelector(".btn-merge");if(n)n.focus(),n.click();else{var r=t.querySelector("."+e.op+".patch-actions-container");r&&r.focus()}}))},e.prototype.selectAllContent=function(e){if(e instanceof HTMLInputElement)e.select();else{var t=document.createRange();t.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}},e.prototype.openDropdown=function(e){var t=e.querySelector("div.btn-group");if(t){var n=t.querySelector("button");n&&n.click()}},e}();U.ɵfac=function(e){return new(e||U)(t.ɵɵinject(_),t.ɵɵinject(R))},U.ɵprov=t.ɵɵdefineInjectable({token:U,factory:U.ɵfac});var $=function(){function e(){}return e.prototype.generateEmptyValue=function(e){var t=this.generateEmptyValueRecursively(e);return"object"==typeof t?n.fromJS(t):t},e.prototype.generateEmptyValueRecursively=function(t){var n=this;if(t.default)return t.default;if("object"===t.type){var r={};return Object.keys(t.properties).filter((function(e){var n=t.required||[],r=t.alwaysShow||[];return n.indexOf(e)>-1||r.indexOf(e)>-1})).forEach((function(e){var i=t.properties[e];r[e]=n.generateEmptyValueRecursively(i)})),r}if("array"===t.type){var i=[],o=t.items;return"complex-list"!==t.componentType&&i.push(this.generateEmptyValueRecursively(o)),i}return e.defaultValueLookup[t.type]},e}();$.defaultValueLookup={string:"",boolean:!1},$.ɵfac=function(e){return new(e||$)},$.ɵprov=t.ɵɵdefineInjectable({token:$,factory:$.ɵfac});var z=function(){function e(){}return e.prototype.findReplaceInImmutable=function(e,t,r,i,o,a){var c=this;void 0===o&&(o=!1);var s=e.asMutable(),l=n.List.isList(e);return a=l?[]:{},s.forEach((function(e,p){var d=l?t.items:t.properties[p];if(!d.disabled&&!d.hidden&&"$ref"!==p)if("string"==typeof e){var u=e,h="<strong style='color: green;'>"+i+"</strong><del><em style='color: red;'>"+r+"</em></del>";if(o)e===r&&(s.set(p,i),u=h);else{var f=new RegExp(r,"g"),m=e.replace(f,i);s.set(p,m),u=u.replace(f,h)}a[p]=u}else if(n.List.isList(e)||n.Map.isMap(e)){var g=c.findReplaceInImmutable(s.get(p),d,r,i,o,a[p]);a[p]=g.diffHtml,s.set(p,g.replaced)}})),{replaced:s.asImmutable(),diffHtml:a}},e}();z.ɵfac=function(e){return new(e||z)},z.ɵprov=t.ɵɵdefineInjectable({token:z,factory:z.ɵfac});var K=function(){function e(e){this.values=new Array,this.size=e}return e.prototype.push=function(e){this.values.push(e),this.values.length>this.size&&this.values.shift()},e.prototype.pop=function(){return this.values.pop()},e}(),L=function(){function e(e){this.pathUtilService=e}return e.prototype.setSchema=function(e){this.schema=e},e.prototype.forPathArray=function(e){return e.reduce((function(e,t){return isNaN(t)&&"-"!==t?e.properties[t]:e.items}),this.schema)},e.prototype.forPathString=function(e){var t=this.pathUtilService.toPathArray(e);return this.forPathArray(t)},e}();L.ɵfac=function(e){return new(e||L)(t.ɵɵinject(B))},L.ɵprov=t.ɵɵdefineInjectable({token:L,factory:L.ɵfac});var H=function(){function e(){}return e.prototype.compare=function(e,t,n){var r=n.properties[e].priority||0,i=n.properties[t].priority||0;return r>i?-1:r<i?1:e<t?-1:e>t?1:0},e}();H.ɵfac=function(e){return new(e||H)},H.ɵprov=t.ɵɵdefineInjectable({token:H,factory:H.ɵfac});var J=function(){function e(e,t,n,r){this.appGlobalsService=e,this.pathUtilService=t,this.jsonSchemaService=n,this.compareKeysBySchemaService=r,this.onKeysChange=new i.Subject}return e.prototype.forPath=function(e){return this.keys$Map[e]},e.prototype.addKey=function(e,t,r,i){var o=this;this.keysMap[e]=this.keysMap[e].add(t).sort((function(e,t){return o.compareKeysBySchemaService.compare(e,t,r)})),this.keys$Map[e].next(this.keysMap[e]),this.onKeysChange.next({path:e,keys:this.keysMap[e]});var a=""+e+this.pathUtilService.separator+t,c=r.properties[t];return"object"!==c.type&&"table-list"!==c.componentType||this.buildKeysMapRecursivelyForPath(i||n.Map(),a,c),a},e.prototype.deletePath=function(e){var t=e[e.length-1],n=this.pathUtilService.toPathString(e.slice(0,-1));this.keysMap[n]&&this.deleteKey(n,t)},e.prototype.syncKeysForPath=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.slice(0,n),i=this.pathUtilService.toPathString(r);if(this.keysMap[i]){var o=e[n];if(this.keysMap[i].has(o)){var a=r.concat(o),c=this.jsonSchemaService.forPathArray(a);"object"!==c.type&&"array"!==c.type||this.buildKeysMapRecursivelyForPath(t.getIn(a),a,c)}else{var s=this.jsonSchemaService.forPathArray(r);"table-list"===s.componentType?this.buildKeysMapRecursivelyForPath(t.getIn(r),r,s):this.addKey(i,o,s,t.getIn(r.concat(e[n])))}break}}},e.prototype.deleteKey=function(e,t){var n=this;this.keysMap[e]=this.keysMap[e].delete(t),this.keys$Map[e].next(this.keysMap[e]),this.onKeysChange.next({path:e,keys:this.keysMap[e]});var r=""+e+this.pathUtilService.separator+t;delete this.keysMap[r],delete this.keys$Map[r];var i=r+this.pathUtilService.separator;Object.keys(this.keysMap).filter((function(e){return e.startsWith(i)})).forEach((function(e){delete n.keysMap[e],delete n.keys$Map[e]}))},e.prototype.swapListElementKeys=function(e,t,n){var r=this;if("complex-list"===this.jsonSchemaService.forPathArray(e).componentType){var i=this.pathUtilService.toPathString(e),o=""+i+this.pathUtilService.separator+t,a=""+i+this.pathUtilService.separator+n,c=this.keysMap[o];this.setKeys(o,this.keysMap[a]),this.setKeys(a,c);var s=o+this.pathUtilService.separator,l=a+this.pathUtilService.separator,p=[];Object.keys(this.keysMap).forEach((function(e){if(e.startsWith(s)){var t=e.replace(s,l);p.push({from:e,to:t,keys:r.keysMap[e]})}else if(e.startsWith(l)){t=e.replace(l,s);p.push({from:e,to:t,keys:r.keysMap[e]})}})),p.forEach((function(e){r.setKeys(e.to,e.keys),r.onKeysChange.next({path:e.to,keys:r.keysMap[e.to]})})),p.filter((function(e){return!p.some((function(t){return e.from===t.to}))})).forEach((function(e){delete r.keysMap[e.from],delete r.keys$Map[e.from]}))}},e.prototype.buildKeysMap=function(e,t){this.keys$Map={},this.keysMap={},this.buildKeysMapRecursivelyForPath(e,"",t)},e.prototype.buildKeysMapRecursivelyForPath=function(e,t,r){var i=this,o=Array.isArray(t)?this.pathUtilService.toPathString(t):t;if(r||(r=this.jsonSchemaService.forPathString(o)),"object"===r.type){var a=e||n.Map();this.buildkeysForObject(o,a,r).filter((function(e){return i.isObjectOrArray(r.properties[e])})).forEach((function(e){var t=""+o+i.pathUtilService.separator+e;i.buildKeysMapRecursivelyForPath(a.get(e),t,r.properties[e])}))}else if("table-list"===r.componentType){var c=e||n.List();this.buildKeysForTableList(o,c,r)}else if("complex-list"===r.componentType){(c=e||n.List()).forEach((function(e,t){var n=""+o+i.pathUtilService.separator+t;i.buildKeysMapRecursivelyForPath(e,n,r.items)}))}},e.prototype.buildKeysForTableList=function(e,t,r){void 0===t&&(t=n.List());var i=n.Seq.Set(t.map((function(e){return e.keySeq().toArray()})).reduce((function(e,t){return e.concat(t)}),[])),o=r.items,a=this.schemafy(i,o);this.setKeys(e,a)},e.prototype.buildkeysForObject=function(e,t,r){void 0===t&&(t=n.Map());var i=this.schemafy(t.keySeq(),r);return this.setKeys(e,i),i},e.prototype.schemafy=function(e,t){var n=this;return e.concat(t.required||[]).filter((function(e){return n.isNotHidden(e,t)||n.appGlobalsService.adminMode})).concat(t.alwaysShow||[]).sort((function(e,r){return n.compareKeysBySchemaService.compare(e,r,t)})).toOrderedSet()},e.prototype.isNotHidden=function(e,t){if(!t.properties[e])throw new Error('"'+e+'" is not specified as property in \n'+JSON.stringify(t.properties,void 0,2));return!t.properties[e].hidden},e.prototype.isObjectOrArray=function(e){return"object"===e.type||"array"===e.type},e.prototype.setKeys=function(e,t){this.keysMap[e]=t,this.keys$Map[e]||(this.keys$Map[e]=new i.ReplaySubject(1)),this.keys$Map[e].next(t)},e}();J.ɵfac=function(e){return new(e||J)(t.ɵɵinject(N),t.ɵɵinject(B),t.ɵɵinject(L),t.ɵɵinject(H))},J.ɵprov=t.ɵɵdefineInjectable({token:J,factory:J.ɵfac});var q=function(){function e(e,t){this.pathUtilService=e,this.keysStoreService=t,this.patchesByPath$=new i.ReplaySubject(1),this.json$=new i.Subject,this.jsonPatches$=new i.Subject,this.patchesByPath={},this.history=new K(10)}return e.prototype.setIn=function(e,t,n){void 0===n&&(n=!0),""!==t&&void 0!==t?(t=this.toImmutable(t),this.setEmptyListBeforeEachIndexInPath(e),n&&this.pushRevertPatchToHistory(e,"replace"),this.json=this.json.setIn(e,t),this.keysStoreService.syncKeysForPath(e,this.json),this.json$.next(this.json)):this.removeIn(e)},e.prototype.setEmptyListBeforeEachIndexInPath=function(e){for(var t=0;t<e.length-1;t++){var r=e.slice(0,t+1);this.json.hasIn(r)||"number"!=typeof e[t+1]||(this.json=this.json.setIn(r,n.List()))}},e.prototype.getIn=function(e,t){return this.json.getIn(e,t)},e.prototype.removeIn=function(e){this.pushRevertPatchToHistory(e,"add"),this.json=this.json.removeIn(e),this.json$.next(this.json),this.keysStoreService.deletePath(e)},e.prototype.pushRevertPatchToHistory=function(e,t){this.history.push({path:this.pathUtilService.toPathString(e),op:t,value:this.json.getIn(e)})},e.prototype.addIn=function(e,t){var r=e[e.length-1];if("number"==typeof r||"-"===r){var i=e.slice(0,e.length-1),o=this.getIn(i)||n.List();t=this.toImmutable(t),"-"===r?(o=o.push(t),e[e.length-1]=o.size-1):o=o.insert(r,t),this.setIn(i,o,!1)}else this.setIn(e,t)},e.prototype.toImmutable=function(e){return"object"!=typeof e||n.List.isList(e)||n.Map.isMap(e)?e:n.fromJS(e)},e.prototype.moveIn=function(e,t,n){var r=this.getIn(e),i=t+n;(i>=r.size||i<0)&&(i=r.size-Math.abs(i));var o=r.get(t);return r=r.set(t,r.get(i)).set(i,o),this.setIn(e,r),this.keysStoreService.swapListElementKeys(e,t,i),e.concat(i)},e.prototype.setJson=function(e){this.json=e},e.prototype.setJsonPatches=function(e){var t=this;this.patchesByPath={},e.forEach((function(e){var n=t.getComponentPathForPatch(e);t.patchesByPath[n]||(t.patchesByPath[n]=[]),t.patchesByPath[n].push(e)})),this.jsonPatches=e,this.patchesByPath$.next(this.patchesByPath)},e.prototype.rollbackLastChange=function(){var e=this.history.pop();return e?(this.applyPatch(e,!1),e.path):void 0},e.prototype.applyPatch=function(e,t){void 0===t&&(t=!0);var n=this.pathUtilService.toPathArray(e.path);switch(e.op){case"replace":this.setIn(n,e.value,t);break;case"remove":this.removeIn(n);break;case"add":case"add-as-new":this.addIn(n,e.value);break;default:console.warn(e.op+" is not supported!")}this.removeJsonPatch(e)},e.prototype.rejectPatch=function(e){this.removeJsonPatch(e)},e.prototype.hasPatch=function(e){return this.patchesByPath[e]&&this.patchesByPath[e].length>0},e.prototype.hasPatchOrChildrenHavePatch=function(e){if(this.hasPatch(e))return!0;if(this.jsonPatches){var t=""+e+this.pathUtilService.separator;return this.jsonPatches.some((function(e){return e.path.startsWith(t)}))}return!1},e.prototype.removeJsonPatch=function(e){var t=this.getComponentPathForPatch(e);if(this.patchesByPath[t]){var n=this.patchesByPath[t].indexOf(e);if(n>-1){this.patchesByPath[t].splice(n,1),this.patchesByPath$.next(this.patchesByPath);var r=this.jsonPatches.indexOf(e);this.jsonPatches.splice(r,1),this.jsonPatches$.next(this.jsonPatches)}}},e.prototype.getComponentPathForPatch=function(e){return"add"===e.op?this.getParentPath(e.path):e.path},e.prototype.getParentPath=function(e){var t=this.pathUtilService.toPathArray(e).slice(0,-1);return this.pathUtilService.toPathString(t)},e}();q.ɵfac=function(e){return new(e||q)(t.ɵɵinject(B),t.ɵɵinject(J))},q.ɵprov=t.ɵɵdefineInjectable({token:q,factory:q.ɵfac});var G=function(){function e(e){this.pathUtilService=e}return e.prototype.getValueInPath=function(e,t){var n=this.pathUtilService.toPathArray(t),r=e;return n.forEach((function(e){if(!(r=r[e]))throw new Error('"'+e+'" of given path not defined in given json')})),r},e}();G.ɵfac=function(e){return new(e||G)(t.ɵɵinject(B))},G.ɵprov=t.ɵɵdefineInjectable({token:G,factory:G.ɵfac});var W=function(){function e(){this.options$=new i.ReplaySubject(1),this.display$=new i.ReplaySubject(1)}return e.prototype.displayModal=function(e){this.options$.next(e),this.display$.next(!0)},e.prototype.closeCurrentModal=function(){this.display$.next(!1)},e}();W.ɵfac=function(e){return new(e||W)},W.ɵprov=t.ɵɵdefineInjectable({token:W,factory:W.ɵfac});var Q=function(){function e(e,t){this.emptyValueService=e,this.componentTypeService=t}return e.prototype.fixRecord=function(e,t){var n=this,r=Object.assign({},e);return Object.keys(r).forEach((function(e){t.properties[e]?n.fix(e,r,t.properties[e]):n.deleteField(r,e)})),r},e.prototype.fix=function(e,t,n){var r=this;if(!n.hidden){var i=t[e];if("object"===n.type){if(!n.properties)throw new Error('"'+e+'"\'s schema has "type": "object" but doesn\'t specify "properties"');if(!(i instanceof Object))throw new Error('"'+e+'" in '+JSON.stringify(i,null,2)+' is specified as "object" by schema but it is not an object in json');Object.keys(i).forEach((function(e){n.properties[e]?r.fix(e,i,n.properties[e]):r.deleteField(i,e)}))}else if("array"===n.type){if(!n.items)throw new Error('"'+e+'"\'s schema has "type": "array" but doesn\'t specify "items"');if(!Array.isArray(i))throw new Error('"'+e+'" in '+JSON.stringify(i,null,2)+' is specified as "array" by schema but it is not an array in json');i.forEach((function(e,t){r.fix(t,i,n.items)}))}}},e.prototype.deleteField=function(e,t){delete e[t],console.warn('"'+t+"\" is removed from input json since it's not in the schema")},e}();Q.ɵfac=function(e){return new(e||Q)(t.ɵɵinject($),t.ɵɵinject(A))},Q.ɵprov=t.ɵɵdefineInjectable({token:Q,factory:Q.ɵfac});var X=function(){function e(e,t){this.jsonUtilService=e,this.componentTypeService=t}return e.prototype.fixSchema=function(e,t){var n=c.cloneDeep(e);return t&&(n=this.enrichSchemaWithConfig(n,t)),n=this.fixRecursively(n)},e.prototype.enrichSchemaWithConfig=function(e,t){return c.mergeWith(e,t,(function(e,t,n){if(("properties"===n||"items"===n)&&!e)return console.warn("config => "+JSON.stringify(t,(function(e,t){return"function"==typeof t?"ƒ()":t}),2)+' should not be under "'+n+'" because schema does not have "'+n+'"'),null;e&&"properties"===n&&Object.keys(t).filter((function(t){return!e[t]})).forEach((function(e){delete t[e],console.warn(e)}))}))},e.prototype.fixRecursively=function(e){var t=this;return e.anyOf?e=this.fixAnyOf(e):e.allOf&&(e=this.fixAllOf(e)),e.order&&(e=this.fixOrder(e)),e.disabled&&(e=this.fixDisabled(e)),e.alwaysShow&&(e=this.fixAlwaysShow(e)),e.alwaysShowRegExp&&(e=this.fixAlwaysShowRegExp(e)),e.properties?Object.keys(e.properties).forEach((function(n){e.properties[n]=t.fixRecursively(e.properties[n])})):e.items&&(e.items=this.fixRecursively(e.items)),e.componentType=this.componentTypeService.getComponentType(e),e},e.prototype.fixDisabled=function(e){return e.items?e.items.disabled=!0:e.properties&&Object.keys(e.properties).forEach((function(t){e.properties[t].disabled=!0})),e},e.prototype.fixOrder=function(e){var t=e.order;return t.forEach((function(n,r){var i=t.length-r;n in e.properties?e.properties[n].priority=i:console.warn(n+" defined in order config does not exist in schema.")})),e},e.prototype.fixAnyOf=function(e){var t=e.anyOf,n={};t.forEach((function(e){Object.keys(e.properties).filter((function(t){return e.properties[t].enum})).forEach((function(e){n[e]||(n[e]=0),n[e]++}))}));var r={};Object.keys(n).forEach((function(e){t.forEach((function(t){r[e]||(r[e]=[]);var n=t.properties[e].enum;n&&(r[e]=r[e].concat(n))}))}));var i=t[0];return Object.keys(i.properties).forEach((function(e){delete i.properties[e].format,delete i.properties[e].pattern})),Object.keys(n).forEach((function(e){var o=Array.from(new Set(r[e]));n[e]===t.length?i.properties[e].enum=o:(delete i.properties[e].enum,i.properties[e].autocompletionConfig={source:o,size:7})})),e.disabled&&(i.disabled=!0),i},e.prototype.fixAllOf=function(e){return c.merge.apply(I,F([{}],e.allOf))},e.prototype.fixAlwaysShowRegExp=function(e){return e.alwaysShow||(e.alwaysShow=[]),Object.keys(e.properties).forEach((function(t){var n=e.properties[t];"object"===n.type&&(n.alwaysShowRegExp=e.alwaysShowRegExp),t.search(e.alwaysShowRegExp)>-1&&e.alwaysShow.push(t)})),e},e.prototype.fixAlwaysShow=function(e){var t=e.alwaysShow;return e.alwaysShow=t.filter((function(t){if(e.properties[t])return!0;console.warn(t+" is configured as alwaysShow but it is not in "+JSON.stringify(Object.keys(e.properties)))})),e},e}();X.ɵfac=function(e){return new(e||X)(t.ɵɵinject(G),t.ɵɵinject(A))},X.ɵprov=t.ɵɵdefineInjectable({token:X,factory:X.ɵfac});var Y=function(){function e(e){var t=this;if(this.appGlobalsService=e,this.ajv=new j({allErrors:!0,jsonPointers:!0}),this.reWebUrl=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|localhost|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),k(this.ajv),this.ajv.addFormat("url",this.reWebUrl),this.appGlobalsService.config&&this.appGlobalsService.config.customFormatValidation){var n=this.appGlobalsService.config.customFormatValidation;Object.keys(n).forEach((function(e){t.ajv.addFormat(e,n[e].formatChecker)}))}}return e.prototype.validateValue=function(e,t){var n=[];return this.ajv.validate(t,e)||this.ajv.errors.forEach((function(e){n.push({message:e.message,type:"Error"})})),n},e}();Y.ɵfac=function(e){return new(e||Y)(t.ɵɵinject(N))},Y.ɵprov=t.ɵɵdefineInjectable({token:Y,factory:Y.ɵfac});var Z=function(){function e(e,t,n,r,i,o){this.emptyValueService=e,this.domUtilService=t,this.jsonStoreService=n,this.jsonSchemaService=r,this.pathUtilService=i,this.keysStoreService=o}return e.prototype.addToRootAction=function(e){this.add(e,!0)},e.prototype.addAction=function(e){this.add(e,!1)},e.prototype.add=function(e,t){var n=this.pathUtilService.getNearestOrRootArrayParentInPath(e,t);this.addNewElementInArray(n,this.jsonSchemaService.forPathArray(n))},e.prototype.addNewElementInArray=function(e,t){var r=t.items,i=this.emptyValueService.generateEmptyValue(r),o=this.jsonStoreService.getIn(e)||n.List();this.jsonStoreService.setIn(e,o.push(i)),e.push(o.size),this.waitThenFocus(this.pathUtilService.toPathString(e))},e.prototype.addBelowToRootAction=function(e){var t=this.pathUtilService.getNearestOrRootArrayParentInPath(e,!0),r=this.jsonSchemaService.forPathArray(t).items,i=this.emptyValueService.generateEmptyValue(r),o=this.jsonStoreService.getIn(t)||n.List();this.jsonStoreService.setIn(t,o.insert(e[1]+1,i)),t.push(e[1]+1),this.waitThenFocus(this.pathUtilService.toPathString(t))},e.prototype.moveUpAction=function(e){this.move(e,-1)},e.prototype.moveDownAction=function(e){this.move(e,1)},e.prototype.moveUpRootAction=function(e){this.move(e,-1,!0)},e.prototype.moveDownRootAction=function(e){this.move(e,1,!0)},e.prototype.move=function(e,t,n){void 0===n&&(n=!1),this.domUtilService.blurFirstEditableChildById(this.pathUtilService.toPathString(e));var r=this.pathUtilService.getElementIndexInForwardOrReversePath(e,n);e=this.jsonStoreService.moveIn(this.pathUtilService.getNearestOrRootArrayParentInPath(e,n),r,t);var i=this.pathUtilService.toPathString(e);this.waitThenFocus(i)},e.prototype.deleteAction=function(e){this.domUtilService.blurFirstEditableChildById(this.pathUtilService.toPathString(e)),this.deleteElement(this.pathUtilService.getNearestOrRootArrayParentInPath(e,!1),this.pathUtilService.getElementIndexInForwardOrReversePath(e,!1))},e.prototype.deleteElement=function(e,t){var n=this.jsonStoreService.getIn(e);this.jsonStoreService.setIn(e,n.remove(t))},e.prototype.navigateUpAction=function(e){this.navigateUpDown(e,-1)},e.prototype.navigateDownAction=function(e){this.navigateUpDown(e,1)},e.prototype.navigateUpDown=function(e,t){var r=this.jsonStoreService.getIn(this.pathUtilService.getNearestOrRootArrayParentInPath(e,!1));if(n.List.isList(r)){var i=this.pathUtilService.getElementIndexInForwardOrReversePath(e,!0);i+t<r.size&&i+t>=0?e[e.length-2]=i+t:e[e.length-2]=r.size-Math.abs(i+t);var o=this.pathUtilService.toPathString(e);this.domUtilService.focusAndSelectFirstEditableChildById(o)}},e.prototype.navigateLeftAction=function(e){this.navigateRightLeft(e,-1)},e.prototype.navigateRightAction=function(e){this.navigateRightLeft(e,1)},e.prototype.navigateRightLeft=function(e,t){var n=this.pathUtilService.toPathString(e);this.domUtilService.focusRightOrLeftParentCell(n,t)},e.prototype.copyAction=function(e){this.copyRowOrSchemaBelow(e,!1)},e.prototype.copyFromRootAction=function(e){this.copyRowOrSchemaBelow(e,!0)},e.prototype.copyRowOrSchemaBelow=function(e,t){var r=this.pathUtilService.getNearestOrRootArrayParentInPath(e,t);if(this.jsonSchemaService.forPathArray(r).items.hasOwnProperty("properties")){var i=this.pathUtilService.getElementIndexInForwardOrReversePath(e,t),o=this.jsonStoreService.getIn(r)||n.List(),a=o.get(i),c=r.concat(i+1),s=this.pathUtilService.toPathString(c);t||(a=a.set(e[e.length-1]),s=""+s+this.pathUtilService.separator+e[e.length-1]),this.jsonStoreService.setIn(r,o.insert(i+1,a)),this.waitThenFocus(s)}},e.prototype.undoAction=function(){var e=this.jsonStoreService.rollbackLastChange();e&&this.waitThenFocus(e)},e.prototype.waitThenFocus=function(e){var t=this;setTimeout((function(){t.domUtilService.focusAndSelectFirstEditableChildById(e,!0)}))},e.prototype.generateShortcutAction=function(e){var t=this;return function(n){n.preventDefault();var r=n.target.getAttribute("data-path");return r&&t[e](t.pathUtilService.toPathArray(r)),!1}},e}();Z.ɵfac=function(e){return new(e||Z)(t.ɵɵinject($),t.ɵɵinject(U),t.ɵɵinject(q),t.ɵɵinject(L),t.ɵɵinject(B),t.ɵɵinject(J))},Z.ɵprov=t.ɵɵdefineInjectable({token:Z,factory:Z.ɵfac});var ee=function(){function e(){this.hrefWithoutHash=this.getHrefWithoutHash()}return e.prototype.getHrefWithoutHash=function(){var e=window.location.href,t=e.lastIndexOf("#");return t>0?e.substring(0,t):e},e}();ee.ɵfac=function(e){return new(e||ee)},ee.ɵprov=t.ɵɵdefineInjectable({token:ee,factory:ee.ɵfac});var te=function(){function e(){this.externalCategorizedProblems$=new i.ReplaySubject(1),this.internalCategorizedProblems$=new i.ReplaySubject(1),this.externalProblemCount$=new i.ReplaySubject(1),this.internalProblemCount$=new i.ReplaySubject(1),this.errorCount$=this.getTotalDistinctProblemCount$ForType("errors"),this.warningCount$=this.getTotalDistinctProblemCount$ForType("warnings"),this.internalProblemMap$=new i.ReplaySubject(1),this.internalProblemMap={},this.internalCategorizedProblemMap={errors:{},warnings:{}},this.externalCategorizedProblemMap={errors:{},warnings:{}},this.externalProblemCount={errors:0,warnings:0},this.internalProblemCount={errors:0,warnings:0},this.externalProblemCount$.next(this.externalProblemCount),this.internalProblemCount$.next(this.internalProblemCount)}return e.prototype.getTotalDistinctProblemCount$ForType=function(e){var t=this.externalProblemCount$.pipe(r.map((function(t){return t[e]}))),n=this.internalProblemCount$.pipe(r.map((function(t){return t[e]})));return i.combineLatest(t,n,(function(e,t){return e+t})).pipe(r.distinctUntilChanged())},Object.defineProperty(e.prototype,"externalProblems",{set:function(e){var t=this.categorizeProblemMap(e),n=t.categorizedProblemMap,r=t.errorCount,i=t.warningCount;this.externalProblemCount={errors:r,warnings:i},this.externalProblemCount$.next(this.externalProblemCount),this.externalCategorizedProblemMap=n,this.externalCategorizedProblems$.next(this.externalCategorizedProblemMap)},enumerable:!1,configurable:!0}),e.prototype.setInternalProblemsForPath=function(e,t){this.internalProblemMap[e]=t,this.internalProblemMap$.next(this.internalProblemMap);var n=this.categorizeValidationProblems(t);this.internalProblemCount.errors+=n.errors.length-this.internalProblemCountForPath(e,"errors"),this.internalProblemCount.warnings+=n.warnings.length-this.internalProblemCountForPath(e,"warnings"),this.internalProblemCount$.next(this.internalProblemCount),this.internalCategorizedProblemMap.errors[e]=n.errors,this.internalCategorizedProblemMap.warnings[e]=n.warnings,this.internalCategorizedProblems$.next(this.internalCategorizedProblemMap)},e.prototype.internalProblemCountForPath=function(e,t){return this.internalCategorizedProblemMap[t][e]?this.internalCategorizedProblemMap[t][e].length:0},e.prototype.hasProblem=function(e){var t=this.internalCategorizedProblemMap.errors[e],n=this.externalCategorizedProblemMap.errors[e];return(t?t.length:0)+(n?n.length:0)>0},e.prototype.categorizeProblemMap=function(e){var t=this,n={errors:{},warnings:{}},r=0,i=0;return Object.keys(e).map((function(n){var r=e[n];return{path:n,categorized:t.categorizeValidationProblems(r)}})).forEach((function(e){n.errors[e.path]=e.categorized.errors,n.warnings[e.path]=e.categorized.warnings,r+=e.categorized.errors.length,i+=e.categorized.warnings.length})),{categorizedProblemMap:n,errorCount:r,warningCount:i}},e.prototype.categorizeValidationProblems=function(e){var t={errors:[],warnings:[]};return e.forEach((function(e){"Error"===e.type?t.errors.push(e):t.warnings.push(e)})),t},e}();te.ɵfac=function(e){return new(e||te)},te.ɵprov=t.ɵɵdefineInjectable({token:te,factory:te.ɵfac});var ne=function(){function e(){this.delimiters=[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}]}return e.prototype.renderMathInText=function(e,t){for(var n=this.splitWithDelimiters(e,this.delimiters),r=document.createDocumentFragment(),i=0;i<n.length;i++)if("text"===n[i].type)r.appendChild(document.createTextNode(n[i].data));else{var o=document.createElement("span"),a=n[i].data;try{p.render(a,o,{displayMode:n[i].display})}catch(e){if(!(e instanceof p.ParseError))throw e;console.error("KaTeX auto-render: Failed to parse "+n[i].data+" with "+e),r.appendChild(document.createTextNode(n[i].rawData));continue}r.appendChild(o)}t.innerHTML="",t.appendChild(r)},e.prototype.findEndOfMath=function(e,t,n){for(var r=n,i=0,o=e.length;r<t.length;){var a=t[r];if(i<=0&&t.slice(r,r+o)===e)return r;"\\"===a?r++:"{"===a?i++:"}"===a&&i--,r++}return-1},e.prototype.splitAtDelimiters=function(e,t,n,r){for(var i=[],o=0;o<e.length;o++)if("text"===e[o].type){var a=e[o].data,c=!0,s=0,l=void 0;for(-1!==(l=a.indexOf(t))&&(s=l,i.push({type:"text",data:a.slice(0,s)}),c=!1);;){if(c){if(-1===(l=a.indexOf(t,s)))break;i.push({type:"text",data:a.slice(s,l)}),s=l}else{if(-1===(l=this.findEndOfMath(n,a,s+t.length)))break;i.push({type:"math",data:a.slice(s+t.length,l),rawData:a.slice(s,l+n.length),display:r}),s=l+n.length}c=!c}i.push({type:"text",data:a.slice(s)})}else i.push(e[o]);return i},e.prototype.splitWithDelimiters=function(e,t){for(var n=[{type:"text",data:e}],r=0;r<t.length;r++){var i=t[r];n=this.splitAtDelimiters(n,i.left,i.right,i.display||!1)}return n},e}();ne.ɵfac=function(e){return new(e||ne)},ne.ɵprov=t.ɵɵdefineInjectable({token:ne,factory:ne.ɵfac});var re=function(){function e(){}return e.prototype.diffByWord=function(e,t){return void 0===t&&(t=""),d.diffWords(e,t)},e}();re.ɵfac=function(e){return new(e||re)},re.ɵprov=t.ɵɵdefineInjectable({token:re,factory:re.ɵfac});var ie=[N,V,A,U,$,z,q,G,J,L,B,W,Q,X,Y,Z,ee,_,te,ne,re,R,H],oe=function(){function e(e,t){this.el=e,this.shortcutActionService=t,this.actionNameToShortcut={add:{key:"alt+a",action:this.shortcutActionService.generateShortcutAction("addAction")},addToRoot:{key:"mod+shift+a",action:this.shortcutActionService.generateShortcutAction("addToRootAction")},addBelowToRoot:{key:"mod+shift+b",action:this.shortcutActionService.generateShortcutAction("addBelowToRootAction")},moveUp:{key:"mod+shift+up",action:this.shortcutActionService.generateShortcutAction("moveUpAction")},moveDown:{key:"mod+shift+down",action:this.shortcutActionService.generateShortcutAction("moveDownAction")},moveUpRoot:{key:"mod+alt+up",action:this.shortcutActionService.generateShortcutAction("moveUpRootAction")},moveDownRoot:{key:"mod+alt+down",action:this.shortcutActionService.generateShortcutAction("moveDownRootAction")},delete:{key:"mod+backspace",action:this.shortcutActionService.generateShortcutAction("deleteAction")},navigateUp:{key:"mod+up",action:this.shortcutActionService.generateShortcutAction("navigateUpAction")},navigateDown:{key:"mod+down",action:this.shortcutActionService.generateShortcutAction("navigateDownAction")},navigateLeft:{key:"mod+left",action:this.shortcutActionService.generateShortcutAction("navigateLeftAction")},navigateRight:{key:"mod+right",action:this.shortcutActionService.generateShortcutAction("navigateRightAction")},copy:{key:"alt+c",action:this.shortcutActionService.generateShortcutAction("copyAction")},copyFromRoot:{key:"mod+alt+r",action:this.shortcutActionService.generateShortcutAction("copyFromRootAction")},undo:{key:"mod+alt+z",action:this.shortcutActionService.generateShortcutAction("undoAction")}},this.mousetrap=new h.Mousetrap(this.el.nativeElement)}return e.prototype.ngOnChanges=function(e){var t=this;if(e.shortcuts){var n=Object.keys(this.actionNameToShortcut);this.shortcuts?n.forEach((function(e){var n=t.actionNameToShortcut[e];t.shortcuts[e]&&(n.key=t.shortcuts[e]),t.mousetrap.bind(n.key,n.action)})):n.forEach((function(e){var n=t.actionNameToShortcut[e];t.mousetrap.bind(n.key,n.action)}))}},e.prototype.ngOnDestroy=function(){var e=this;Object.keys(this.actionNameToShortcut).forEach((function(t){e.mousetrap.unbind(e.actionNameToShortcut[t].key)}))},e}();oe.ɵfac=function(e){return new(e||oe)(t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(Z))},oe.ɵdir=t.ɵɵdefineDirective({type:oe,selectors:[["","shortcuts",""]],inputs:{shortcuts:"shortcuts"},features:[t.ɵɵNgOnChangesFeature]});var ae=["modal"];function ce(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"button",12),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).options.onConfirm()})),t.ɵɵelement(2,"i",13),t.ɵɵtext(3," Confirm "),t.ɵɵelementEnd(),t.ɵɵelementEnd()}}function se(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"div",5),t.ɵɵelementStart(2,"button",6),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(),t.ɵɵreference(1).hide()})),t.ɵɵtext(3,"×"),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"h4",7),t.ɵɵtext(5),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"div",8),t.ɵɵelement(7,"div",9),t.ɵɵelementStart(8,"div",10),t.ɵɵtemplate(9,ce,4,0,"div",11),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵadvance(5),t.ɵɵtextInterpolate(i.options.title),t.ɵɵadvance(2),t.ɵɵproperty("innerHTML",i.options.bodyHtml,t.ɵɵsanitizeHtml),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitch",i.options.type),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","confirm")}}var le=function(){return{backdrop:!1}},pe=function(e){function t(t,n){var r=e.call(this)||this;return r.modalService=t,r.changeDetectorRef=n,r}return M(t,e),t.prototype.ngOnInit=function(){var e=this;this.modalService.display$.pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){t?e.modal.show():e.modal.hide()})),this.modalService.options$.pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.options=t,e.changeDetectorRef.markForCheck()}))},t.prototype.onShow=function(){this.options&&this.options.onShow&&this.options.onShow()},t}(T);pe.ɵfac=function(e){return new(e||pe)(t.ɵɵdirectiveInject(W),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},pe.ɵcmp=t.ɵɵdefineComponent({type:pe,selectors:[["modal-view"]],viewQuery:function(e,n){var r;(1&e&&t.ɵɵviewQuery(ae,!0),2&e)&&(t.ɵɵqueryRefresh(r=t.ɵɵloadQuery())&&(n.modal=r.first))},features:[t.ɵɵInheritDefinitionFeature],decls:4,vars:3,consts:[["bsModal","","tabindex","-1","role","dialog",1,"modal","fade",3,"config","onShown"],["modal","bs-modal"],[1,"modal-dialog","modal-lg"],["class","modal-content",4,"ngIf"],[1,"modal-content"],[1,"modal-header"],["type","button",1,"close",3,"click"],[1,"modal-title"],[1,"modal-body"],[3,"innerHTML"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-check"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0,1),t.ɵɵlistener("onShown",(function(){return n.onShow()})),t.ɵɵelementStart(2,"div",2),t.ɵɵtemplate(3,se,10,4,"div",3),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("config",t.ɵɵpureFunction0(2,le)),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.options))},directives:[f.ModalDirective,u.NgIf,u.NgSwitch,u.NgSwitchCase],styles:[""],changeDetection:0});var de=function(){function e(){}return e.prototype.transform=function(e){return e.sort((function(e,t){return e<t?-1:e>t?1:0}))},e}();de.ɵfac=function(e){return new(e||de)},de.ɵpipe=t.ɵɵdefinePipe({name:"sortAlphabetically",type:de,pure:!0});var ue=function(){function e(){}return e.prototype.transform=function(e,t){var n=new RegExp(t,"i");return e.filter((function(e){return e.match(n)}))},e}();function he(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"li"),t.ɵɵelementStart(1,"a",9),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=n.$implicit;return t.ɵɵnextContext(3).onFieldSelect(e)})),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(i)}}function fe(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"ul",4),t.ɵɵelementStart(1,"li",5),t.ɵɵelementStart(2,"input",6),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).expression=e}))("click",(function(e){return t.ɵɵrestoreView(r),e.stopPropagation()})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelement(3,"li",7),t.ɵɵtemplate(4,he,3,1,"li",8),t.ɵɵpipe(5,"sortAlphabetically"),t.ɵɵpipe(6,"filterByExpression"),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵproperty("ngModel",i.expression),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(5,2,t.ɵɵpipeBind2(6,4,i.addableKeys,i.expression)))}}function me(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",1),t.ɵɵlistener("onShown",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext().onDropdownShown()})),t.ɵɵelementStart(1,"button",2),t.ɵɵprojection(2),t.ɵɵelementEnd(),t.ɵɵtemplate(3,fe,7,7,"ul",3),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵproperty("isDisabled",i.isDisabled)}}ue.ɵfac=function(e){return new(e||ue)},ue.ɵpipe=t.ɵɵdefinePipe({name:"filterByExpression",type:ue,pure:!0});var ge=function(){function e(e,t,n){this.elementRef=e,this.domUtilService=t,this.keysStoreService=n,this.expression="",this.hidden=!1}return e.prototype.ngOnChanges=function(e){var t=this;(e.schema||e.fields)&&(this.addableKeys=n.Set.fromKeys(this.schema.properties).subtract(this.fields).filter((function(e){return!t.schema.properties[e].hidden})),this.hidden=0===this.addableKeys.size)},e.prototype.onDropdownShown=function(){var e=this;setTimeout((function(){return e.domUtilService.focusFirstInputChildByElement(e.elementRef.nativeElement)}))},e.prototype.onFieldSelect=function(e){var t=this.keysStoreService.addKey(this.pathString,e,this.schema);this.domUtilService.focusAndSelectFirstEditableChildById(t),this.expression=""},e}();function ve(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"a",4),t.ɵɵlistener("click",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext().onBadgeClick(e,"Errors")})),t.ɵɵelementStart(1,"span",5),t.ɵɵelement(2,"i",6),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵpropertyInterpolate1("tooltip","",i.errorCount," error(s)")}}function ye(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"a",7),t.ɵɵlistener("click",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext().onBadgeClick(e,"Warnings")})),t.ɵɵelementStart(1,"span",8),t.ɵɵelement(2,"i",9),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵpropertyInterpolate1("tooltip","",i.warningCount," warning(s)")}}function be(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"a",10),t.ɵɵlistener("click",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext().onBadgeClick(e,"Patches")})),t.ɵɵelementStart(1,"span",11),t.ɵɵelement(2,"i",12),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵpropertyInterpolate1("tooltip","",i.patchCount," conflicts(s)")}}ge.ɵfac=function(e){return new(e||ge)(t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(U),t.ɵɵdirectiveInject(J))},ge.ɵcmp=t.ɵɵdefineComponent({type:ge,selectors:[["add-field-dropdown"]],inputs:{schema:"schema",fields:"fields",pathString:"pathString",isDisabled:"isDisabled"},features:[t.ɵɵNgOnChangesFeature],ngContentSelectors:["*"],decls:1,vars:1,consts:[["class","btn-group add-field-dropdown-container","dropdown","","keyboardNav","true",3,"isDisabled","onShown",4,"ngIf"],["dropdown","","keyboardNav","true",1,"btn-group","add-field-dropdown-container",3,"isDisabled","onShown"],["type","button","dropdownToggle","",1,"btn","btn-add-field-dropdown"],["class","dropdown-menu",4,"dropdownMenu"],[1,"dropdown-menu"],[1,"dropdown-filter-container"],["placeholder","filter",3,"ngModel","ngModelChange","click"],[1,"divider","dropdown-divider"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",1,"dropdown-item",3,"click"]],template:function(e,n){1&e&&(t.ɵɵprojectionDef(),t.ɵɵtemplate(0,me,4,1,"div",0)),2&e&&t.ɵɵproperty("ngIf",!n.hidden)},directives:[u.NgIf,m.BsDropdownDirective,m.BsDropdownToggleDirective,m.BsDropdownMenuDirective,g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,u.NgForOf],pipes:[de,ue],styles:[".btn-add-field-dropdown[_ngcontent-%COMP%]{background:transparent;border:0;color:#2f4f4f;float:left;font-size:11px;font-weight:700;line-height:1;margin-bottom:2px;opacity:.4;padding:0 3px;text-shadow:0 1px 0 #fff}.btn-add-field-dropdown[_ngcontent-%COMP%]:hover{color:#00f;opacity:.6}.dropdown-filter-container[_ngcontent-%COMP%]{padding:0 3px}.dropdown-filter-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});var Se=function(e){function n(n,r,i){var o=e.call(this)||this;return o.problemsService=n,o.changeDetectorRef=r,o.jsonStoreService=i,o.badgeClick=new t.EventEmitter,o.errorCount=0,o.warningCount=0,o.patchCount=0,o}return M(n,e),n.prototype.ngOnInit=function(){var e=this;this.problemsService.errorCount$.pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.errorCount=t,e.changeDetectorRef.detectChanges()})),this.problemsService.warningCount$.pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.warningCount=t,e.changeDetectorRef.detectChanges()})),this.jsonStoreService.patchesByPath$.pipe(r.map((function(e){return Object.keys(e).map((function(t){return e[t].length})).reduce((function(e,t){return e+t}),0)}))).pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.patchCount=t,e.changeDetectorRef.markForCheck()}))},n.prototype.onBadgeClick=function(e,t){e.preventDefault(),this.badgeClick.emit(t)},n}(T);Se.ɵfac=function(e){return new(e||Se)(t.ɵɵdirectiveInject(te),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(q))},Se.ɵcmp=t.ɵɵdefineComponent({type:Se,selectors:[["bottom-console-badges"]],outputs:{badgeClick:"badgeClick"},features:[t.ɵɵInheritDefinitionFeature],decls:4,vars:3,consts:[[1,"badges-container"],["class","error","placement","right",3,"tooltip","click",4,"ngIf"],["class","warning","placement","right",3,"tooltip","click",4,"ngIf"],["class","patch","placement","right",3,"tooltip","click",4,"ngIf"],["placement","right",1,"error",3,"tooltip","click"],[1,"error","fa-stack","fa-lg"],[1,"fa","fa-times","fa-stack-1x","fa-inverse"],["placement","right",1,"warning",3,"tooltip","click"],[1,"warning","fa-stack","fa-lg"],[1,"fa","fa-exclamation","fa-stack-1x","fa-inverse"],["placement","right",1,"patch",3,"tooltip","click"],[1,"patch","fa-stack","fa-lg"],[1,"fa","fa-bolt","fa-stack-1x","fa-inverse"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,ve,3,1,"a",1),t.ɵɵtemplate(2,ye,3,1,"a",2),t.ɵɵtemplate(3,be,3,1,"a",3),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.errorCount>0),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.warningCount>0),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.patchCount>0))},directives:[u.NgIf,v.TooltipDirective],styles:[".error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:2px solid #d14024}.error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#d14024;padding-bottom:2px}.warning[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:2px solid #fbd503}.warning[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fbd503}.patch[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:2px solid #f96509}.patch[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f96509}a[_ngcontent-%COMP%]{cursor:pointer;padding-top:7px;text-decoration:none}a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:all .35s ease-in-out}a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{font-size:1.1em}.badges-container[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;width:100%}.badges-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;margin-top:5px;width:30px}.badges-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-of-type{border-top:2px solid #283948;margin-top:10px}.badges-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{align-items:center;border-radius:20%;display:flex;height:30px}@media screen and (max-width:1440px){.badges-container[_ngcontent-%COMP%]{flex-direction:column}}"],changeDetection:0});var Ce=function(){function e(){}return e.prototype.transform=function(e,t){var n=t.alwaysShow||[];return e.union(n)},e}();Ce.ɵfac=function(e){return new(e||Ce)},Ce.ɵpipe=t.ɵɵdefinePipe({name:"addAlwaysShowFields",type:Ce,pure:!0});var xe=function(){function e(){}return e.prototype.transform=function(e,t,n){var r=t.properties;if(e)return e.filter((function(e){if(!r[e])throw new Error('"'+e+'" is not specified as property in \n'+JSON.stringify(r,void 0,2));return!r[e].hidden||n}))},e}();function we(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"a",3),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext().collapse()})),t.ɵɵtext(1," [x]"),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵproperty("hidden",i.isCollapsed)}}function Pe(e,n){if(1&e&&(t.ɵɵelementStart(0,"li"),t.ɵɵelement(1,"tree-menu-item",7),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("label",r)("value",i.value.get(r))("schema",i.schema.properties[r])("path",i.getChildPath(r))("depth",i.depth+1)}}function Ee(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,Pe,2,5,"li",6),t.ɵɵpipe(2,"sortAlphabetically"),t.ɵɵpipe(3,"addAlwaysShowFields"),t.ɵɵpipe(4,"filterHiddenFields"),t.ɵɵpipe(5,"async"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(2,2,t.ɵɵpipeBind2(3,4,t.ɵɵpipeBind3(4,7,r.keys,r.schema,t.ɵɵpipeBind1(5,11,r.adminMode$)),r.schema)))("ngForTrackBy",r.trackByElement)}}function Ie(e,n){if(1&e&&(t.ɵɵelementStart(0,"li"),t.ɵɵelement(1,"tree-menu-item",7),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=n.index,o=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("label",i)("value",r)("schema",o.schema.items)("path",o.getChildPath(i))("depth",o.depth+1)}}function je(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,Ie,2,5,"li",6),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",r.value)("ngForTrackBy",r.trackByElement)}}function ke(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵelementStart(1,"ul"),t.ɵɵtemplate(2,Ee,6,13,"div",5),t.ɵɵtemplate(3,je,2,2,"div",5),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngSwitch",r.schema.type)("hidden",r.isCollapsed),t.ɵɵadvance(2),t.ɵɵproperty("ngSwitchCase","object"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","array")}}xe.ɵfac=function(e){return new(e||xe)},xe.ɵpipe=t.ɵɵdefinePipe({name:"filterHiddenFields",type:xe,pure:!0});var Oe=function(){function e(e,t,n,r){this.windowHrefService=e,this.domUtilService=t,this.pathUtilService=n,this.appGlobalsService=r,this.isCollapsed=!0}return e.prototype.ngOnInit=function(){this.href=this.windowHrefService.hrefWithoutHash+"#"+this.path},e.prototype.ngOnChanges=function(e){e.value&&this.value&&"object"===this.schema.type&&(this.keys=this.value.keySeq().toSet())},e.prototype.toggle=function(e){e.preventDefault(),this.isCollapsed=!this.isCollapsed,this.domUtilService.focusAndSelectFirstEditableChildById(this.path,!0)},e.prototype.collapse=function(){this.isCollapsed=!0},Object.defineProperty(e.prototype,"isCollapsable",{get:function(){var e=this.schema.type;return this.isNotLeaf&&("object"===e||"array"===e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxDepth",{get:function(){return this.appGlobalsService.config.menuMaxDepth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNotLeaf",{get:function(){return void 0===this.maxDepth||this.depth<this.maxDepth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adminMode$",{get:function(){return this.appGlobalsService.adminMode$},enumerable:!1,configurable:!0}),e.prototype.getChildPath=function(e){return""+this.path+this.pathUtilService.separator+e},e.prototype.trackByElement=function(e,t){return t},e}();function Me(e,n){if(1&e&&(t.ɵɵelementStart(0,"li"),t.ɵɵelement(1,"tree-menu-item",3),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("label",r)("value",i.record.get(r))("schema",i.schema.properties[r])("path",i.getChildPath(r))("depth",1)}}Oe.ɵfac=function(e){return new(e||Oe)(t.ɵɵdirectiveInject(ee),t.ɵɵdirectiveInject(U),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(N))},Oe.ɵcmp=t.ɵɵdefineComponent({type:Oe,selectors:[["tree-menu-item"]],inputs:{label:"label",value:"value",schema:"schema",path:"path",depth:"depth"},features:[t.ɵɵNgOnChangesFeature],decls:5,vars:4,consts:[[3,"href","click"],[3,"hidden","click",4,"ngIf"],[3,"ngSwitch","hidden",4,"ngIf"],[3,"hidden","click"],[3,"ngSwitch","hidden"],[4,"ngSwitchCase"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"label","value","schema","path","depth"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"a",0),t.ɵɵlistener("click",(function(e){return n.toggle(e)})),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵtemplate(3,we,2,1,"a",1),t.ɵɵtemplate(4,ke,4,4,"div",2),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("href",n.href,t.ɵɵsanitizeUrl),t.ɵɵadvance(1),t.ɵɵtextInterpolate(n.label),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.isCollapsable),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.isNotLeaf))},directives:[u.NgIf,u.NgSwitch,u.NgSwitchCase,u.NgForOf,Oe],pipes:[de,Ce,xe,u.AsyncPipe],styles:["a[_ngcontent-%COMP%]{color:#e0dfdf}"],changeDetection:0});var De=function(){function e(e,t,n){this.domUtilService=e,this.pathUtilService=t,this.appGlobalsService=n,this.prefixOrPath=""}return e.prototype.ngOnChanges=function(e){e.record&&(this.keys=this.record.keySeq().toSet())},e.prototype.getChildPath=function(e){return""+this.pathUtilService.separator+e},e.prototype.trackByElement=function(e,t){return t},Object.defineProperty(e.prototype,"adminMode$",{get:function(){return this.appGlobalsService.adminMode$},enumerable:!1,configurable:!0}),e}();function Fe(e,n){1&e&&(t.ɵɵelementStart(0,"ul",4),t.ɵɵprojection(1),t.ɵɵelementEnd())}De.ɵfac=function(e){return new(e||De)(t.ɵɵdirectiveInject(U),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(N))},De.ɵcmp=t.ɵɵdefineComponent({type:De,selectors:[["tree-menu"]],inputs:{record:"record",schema:"schema"},features:[t.ɵɵNgOnChangesFeature],decls:7,vars:13,consts:[[1,"tree-menu-container"],[1,"menu-item-container"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"label","value","schema","path","depth"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"ul",1),t.ɵɵtemplate(2,Me,2,5,"li",2),t.ɵɵpipe(3,"sortAlphabetically"),t.ɵɵpipe(4,"addAlwaysShowFields"),t.ɵɵpipe(5,"filterHiddenFields"),t.ɵɵpipe(6,"async"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(3,2,t.ɵɵpipeBind2(4,4,t.ɵɵpipeBind3(5,7,n.keys,n.schema,t.ɵɵpipeBind1(6,11,n.adminMode$)),n.schema)))("ngForTrackBy",n.trackByElement))},directives:[u.NgForOf,Oe],pipes:[de,Ce,xe,u.AsyncPipe],styles:["div.tree-menu-container[_ngcontent-%COMP%]{overflow-y:auto;padding:8px 2px 0 0;text-align:center}ul.menu-item-container[_ngcontent-%COMP%]{list-style:none;padding-left:0;padding-top:8px;text-align:left}ul.menu-item-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:2px}"],changeDetection:0});var Te=function(){};Te.ɵfac=function(e){return new(e||Te)},Te.ɵcmp=t.ɵɵdefineComponent({type:Te,selectors:[["title-dropdown"]],inputs:{title:"title",isDisabled:"isDisabled"},ngContentSelectors:["*"],decls:5,vars:2,consts:[["dropdown","",1,"title-dropdown-container",3,"isDisabled"],["dropdownToggle","",1,"btn","title-dropdown-toggle"],[1,"caret"],["class","dropdown-menu",4,"dropdownMenu"],[1,"dropdown-menu"]],template:function(e,n){1&e&&(t.ɵɵprojectionDef(),t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"button",1),t.ɵɵtext(2),t.ɵɵelement(3,"span",2),t.ɵɵelementEnd(),t.ɵɵtemplate(4,Fe,2,0,"ul",3),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("isDisabled",n.isDisabled),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",n.title," "))},directives:[m.BsDropdownDirective,m.BsDropdownToggleDirective,m.BsDropdownMenuDirective],styles:[".title-dropdown-toggle[_ngcontent-%COMP%]{background:transparent;border:none;color:#c1c1c1;font-size:13px;font-weight:700;padding:0 3px}.title-dropdown-toggle[_ngcontent-%COMP%]:focus{outline:0}.title-dropdown-toggle[_ngcontent-%COMP%]:hover{color:#6b6b6b}.dropdown-menu[_ngcontent-%COMP%]{left:auto;min-width:120px;top:auto}.title-dropdown-container[_ngcontent-%COMP%]{position:relative}"],changeDetection:0});var Ne=function(){function e(e,t,n,r,i){this.changeDetectionRef=e,this.domSanitizer=t,this.findReplaceAllService=n,this.jsonStoreService=r,this.modalService=i}return e.prototype.onKeypress=function(e){"Enter"===e&&this.findAndReplace()},e.prototype.findAndReplace=function(){var e=this;if(this.find&&this.replace){var t=this.jsonStoreService.getIn(this.path),n=this.findReplaceAllService.findReplaceInImmutable(t,this.schema,this.find,this.replace,this.exactPhrase);this.replaced=n.replaced;var r=JSON.stringify(n.diffHtml,void 0,2);this.modalService.displayModal({title:"After Replace",bodyHtml:this.domSanitizer.bypassSecurityTrustHtml('<pre class="max-height-70-vh"><code>'+r+"</code></pre>"),type:"confirm",onConfirm:function(){e.modalService.closeCurrentModal(),e.jsonStoreService.setIn(e.path,e.replaced),e.cleanParameters()}})}},e.prototype.cleanParameters=function(){this.find="",this.replace="",this.exactPhrase=!1,this.changeDetectionRef.markForCheck()},e}();Ne.ɵfac=function(e){return new(e||Ne)(t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(b.DomSanitizer),t.ɵɵdirectiveInject(z),t.ɵɵdirectiveInject(q),t.ɵɵdirectiveInject(W))},Ne.ɵcmp=t.ɵɵdefineComponent({type:Ne,selectors:[["find-replace"]],inputs:{path:"path",schema:"schema"},decls:10,vars:3,consts:[[1,"find-replace-container"],[1,"top-container-item"],["placeholder","Find",3,"ngModel","ngModelChange","keypress"],["placeholder","Replace",3,"ngModel","ngModelChange","keypress"],[1,"bottom-container-item"],["type","checkbox",3,"ngModel","ngModelChange","keypress"],[1,"fa","fa-arrow-circle-right",3,"click"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelementStart(2,"input",2),t.ɵɵlistener("ngModelChange",(function(e){return n.find=e}))("keypress",(function(e){return n.onKeypress(e.key)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div"),t.ɵɵelementStart(4,"input",3),t.ɵɵlistener("ngModelChange",(function(e){return n.replace=e}))("keypress",(function(e){return n.onKeypress(e.key)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"div",4),t.ɵɵelementStart(6,"label"),t.ɵɵtext(7," Exact phrase "),t.ɵɵelementStart(8,"input",5),t.ɵɵlistener("ngModelChange",(function(e){return n.exactPhrase=e}))("keypress",(function(e){return n.onKeypress(e.key)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(9,"i",6),t.ɵɵlistener("click",(function(){return n.findAndReplace()})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵproperty("ngModel",n.find),t.ɵɵadvance(2),t.ɵɵproperty("ngModel",n.replace),t.ɵɵadvance(4),t.ɵɵproperty("ngModel",n.exactPhrase))},directives:[g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,g.CheckboxControlValueAccessor],styles:[".find-replace-container[_ngcontent-%COMP%]{margin:4px 3px 3px 2px}.find-replace-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:13px}.top-container-item[_ngcontent-%COMP%]{margin-bottom:3px}.bottom-container-item[_ngcontent-%COMP%]{margin-top:5px}.bottom-container-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:right;font-size:20px;padding-right:2px}label[_ngcontent-%COMP%]{color:#7e7e7e;font-size:12px;font-weight:400}.find-replace-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .horizontal-padding[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}"],changeDetection:0});var Be=function(e){function t(t,n,r,i,o){var a=e.call(this)||this;return a.appGlobalsService=t,a.problemsService=n,a.pathUtilService=r,a.changeDetectorRef=i,a.jsonStoreService=o,a.pathCache={},a.externalErrors=[],a.replaceJsonPatches=[],a.addJsonPatches=[],a}return M(t,e),t.prototype.ngOnInit=function(){var e=this;this.problemsService.externalCategorizedProblems$.pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.externalErrors=t.errors[e.pathString]||[],e.changeDetectorRef.markForCheck()})),this.jsonStoreService.patchesByPath$.pipe(r.map((function(t){return t[e.pathString]}))).pipe(r.map((function(t){return e.groupJsonPatchesByOp(t)}))).pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.removeJsonPatch=t.remove[0],e.addJsonPatches=t.add,e.replaceJsonPatches=t.replace,e.changeDetectorRef.markForCheck()}))},t.prototype.groupJsonPatchesByOp=function(e){var t={add:[],remove:[],replace:[]};return e&&e.forEach((function(e){t[e.op].push(e)})),t},t.prototype.ngOnChanges=function(e){e.path&&(this.pathString=this.pathUtilService.toPathString(this.path))},t.prototype.getPathForChild=function(e){return this.pathCache[e]&&this.pathCache[e][this.path.length-1]===this.path[this.path.length-1]||(this.pathCache[e]=this.path.concat(e)),this.pathCache[e]},t.prototype.hasErrors=function(){return this.externalErrors.length>0},Object.defineProperty(t.prototype,"disabled",{get:function(){return this.schema.disabled&&!this.appGlobalsService.adminMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"redLeftBorderClass",{get:function(){return this.removeJsonPatch?"red-left-border":""},enumerable:!1,configurable:!0}),t.prototype.trackByElement=function(e,t){return t},t.prototype.trackByIndex=function(e,t){return e},t}(T);Be.ɵfac=function(e){return new(e||Be)(t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(te),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(q))},Be.ɵcmp=t.ɵɵdefineComponent({type:Be,selectors:[["ng-component"]],features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2});var Ve=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,i,o,r)||this;return a.appGlobalsService=t,a.problemsService=n,a.jsonStoreService=r,a.pathUtilService=i,a.changeDetectorRef=o,a}return M(t,e),t.prototype.moveElement=function(e,t){this.jsonStoreService.moveIn(this.path,e,t)},t.prototype.deleteElement=function(e){var t=this.path.concat(e);this.jsonStoreService.removeIn(t),this.values=this.jsonStoreService.getIn(this.path,n.List())},t.prototype.getPathStringForChild=function(e){return""+this.pathString+this.pathUtilService.separator+e},t.prototype.hasPatchOrChildrenHavePatch=function(){return this.jsonStoreService.hasPatchOrChildrenHavePatch(this.pathString)},t}(Be);function Ae(e,n){if(1&e&&t.ɵɵelement(0,"add-new-element-button",5),2&e){var r=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext();t.ɵɵproperty("path",i.getPathForChild(r))("schema",i.schema.properties[r])}}function _e(e,n){if(1&e&&t.ɵɵelement(0,"patch-actions",6),2&e){var r=t.ɵɵnextContext(2);t.ɵɵproperty("patch",r.removeJsonPatch)}}function Re(e,n){if(1&e&&(t.ɵɵelementStart(0,"td",1),t.ɵɵelement(1,"any-type-field",2),t.ɵɵpipe(2,"selfOrEmpty"),t.ɵɵtemplate(3,Ae,1,2,"add-new-element-button",3),t.ɵɵtemplate(4,_e,1,1,"patch-actions",4),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=n.first,o=t.ɵɵnextContext();t.ɵɵstyleProp("width",o.schema.properties[r].columnWidth+"%"),t.ɵɵproperty("ngClass",i?o.redLeftBorderClass:""),t.ɵɵadvance(1),t.ɵɵproperty("value",t.ɵɵpipeBind2(2,8,o.value.get(r),o.schema.properties[r]))("schema",o.schema.properties[r])("path",o.getPathForChild(r)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf","array"===o.schema.properties[r].type),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o.removeJsonPatch&&i)}}var Ue=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,i,o,r)||this;return a.appGlobalsService=t,a.problemsService=n,a.jsonStoreService=r,a.pathUtilService=i,a.changeDetectorRef=o,a}return M(t,e),t}(Be);function $e(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",4),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext().onMove.emit(-1)})),t.ɵɵelement(1,"i",5),t.ɵɵelementEnd()}}function ze(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",6),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext().onMove.emit(1)})),t.ɵɵelement(1,"i",7),t.ɵɵelementEnd()}}Ue.ɵfac=function(e){return new(e||Ue)(t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(te),t.ɵɵdirectiveInject(q),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},Ue.ɵcmp=t.ɵɵdefineComponent({type:Ue,selectors:[["","table-item-field",""]],inputs:{value:"value",schema:"schema",path:"path",keys:"keys"},features:[t.ɵɵInheritDefinitionFeature],attrs:["table-item-field",""],ngContentSelectors:["*"],decls:2,vars:2,consts:[[3,"width","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],[3,"value","schema","path"],[3,"path","schema",4,"ngIf"],[3,"patch",4,"ngIf"],[3,"path","schema"],[3,"patch"]],template:function(e,n){1&e&&(t.ɵɵprojectionDef(),t.ɵɵtemplate(0,Re,5,11,"td",0),t.ɵɵprojection(1)),2&e&&t.ɵɵproperty("ngForOf",n.keys)("ngForTrackBy",n.trackByElement)},styles:[""],changeDetection:0});var Ke=function(){this.onDelete=new t.EventEmitter,this.onMove=new t.EventEmitter};function Le(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",1),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext().onAddNewClick()})),t.ɵɵelement(1,"i",5),t.ɵɵelementEnd()}}Ke.ɵfac=function(e){return new(e||Ke)},Ke.ɵcmp=t.ɵɵdefineComponent({type:Ke,selectors:[["list-action-group"]],inputs:{canMove:"canMove",isDisabled:"isDisabled"},outputs:{onDelete:"onDelete",onMove:"onMove"},decls:5,vars:4,consts:[["type","button",1,"editor-btn-delete",3,"click"],[1,"fa","fa-times"],["type","button","class","editor-btn-move-up",3,"click",4,"ngIf"],["type","button","class","editor-btn-move-down",3,"click",4,"ngIf"],["type","button",1,"editor-btn-move-up",3,"click"],[1,"fa","fa-chevron-up"],["type","button",1,"editor-btn-move-down",3,"click"],[1,"fa","fa-chevron-down"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"button",0),t.ɵɵlistener("click",(function(){return n.onDelete.emit()})),t.ɵɵelement(2,"i",1),t.ɵɵelementEnd(),t.ɵɵtemplate(3,$e,2,0,"button",2),t.ɵɵtemplate(4,ze,2,0,"button",3),t.ɵɵelementEnd()),2&e&&(t.ɵɵclassProp("disabled",n.isDisabled),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.canMove),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.canMove))},directives:[u.NgIf],styles:[""],encapsulation:2,changeDetection:0});var He=function(){function e(e){this.jsonStoreService=e}return e.prototype.onAcceptClick=function(){this.jsonStoreService.applyPatch(this.patch)},e.prototype.onRejectClick=function(){this.jsonStoreService.rejectPatch(this.patch)},e.prototype.onAddNewClick=function(){this.patch.op="add-as-new",this.jsonStoreService.applyPatch(this.patch)},e}();He.ɵfac=function(e){return new(e||He)(t.ɵɵdirectiveInject(q))},He.ɵcmp=t.ɵɵdefineComponent({type:He,selectors:[["patch-actions"]],inputs:{patch:"patch",addActionEnabled:"addActionEnabled"},decls:6,vars:2,consts:[["tabindex","-1",1,"patch-actions-container",3,"ngClass"],[3,"click"],[1,"fa","fa-check-circle"],[1,"fa","fa-times-circle"],[3,"click",4,"ngIf"],[1,"fa","fa-plus-circle"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"button",1),t.ɵɵlistener("click",(function(){return n.onAcceptClick()})),t.ɵɵelement(2,"i",2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"button",1),t.ɵɵlistener("click",(function(){return n.onRejectClick()})),t.ɵɵelement(4,"i",3),t.ɵɵelementEnd(),t.ɵɵtemplate(5,Le,2,0,"button",4),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("ngClass",n.patch.op),t.ɵɵadvance(5),t.ɵɵproperty("ngIf",n.addActionEnabled))},directives:[u.NgClass,u.NgIf],styles:[".patch-actions-container[_ngcontent-%COMP%]{display:inline-block;padding-left:2px}.patch-actions-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background-color:transparent;border:none;padding:1px 3px 1.5px}.patch-actions-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{font-size:18px}.patch-actions-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   .fa-check-circle[_ngcontent-%COMP%]{color:#27ae60}.patch-actions-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   .fa-times-circle[_ngcontent-%COMP%]{color:#e74c3c}.patch-actions-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   .fa-plus-circle[_ngcontent-%COMP%]{color:#f1c40f}"],changeDetection:0});var Je=function(){function e(){}return e.prototype.transform=function(e){return Array.isArray(e)?"array":typeof e},e}();Je.ɵfac=function(e){return new(e||Je)},Je.ɵpipe=t.ɵɵdefinePipe({name:"typeOf",type:Je,pure:!1});var qe=function(){function e(e){this.compareKeysBySchemaService=e}return e.prototype.transform=function(e,t){var n=this;return e.sort((function(e,r){return n.compareKeysBySchemaService.compare(e,r,t)}))},e}();qe.ɵfac=function(e){return new(e||qe)(t.ɵɵdirectiveInject(H))},qe.ɵpipe=t.ɵɵdefinePipe({name:"sortKeysBySchema",type:qe,pure:!1});var Ge=function(){function e(){}return e.prototype.transform=function(e){return e?Object.keys(e):null},e}();function We(e,t){}function Qe(e,t){}Ge.ɵfac=function(e){return new(e||Ge)},Ge.ɵpipe=t.ɵɵdefinePipe({name:"keys",type:Ge,pure:!1});var Xe=function(e,t){return{object:e,schema:t}};function Ye(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,Qe,0,0,"ng-template",2),t.ɵɵelementContainerEnd()),2&e){var r=t.ɵɵnextContext(),i=r.value,o=r.schema;t.ɵɵnextContext();var a=t.ɵɵreference(7);t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",a)("ngTemplateOutletContext",t.ɵɵpureFunction2(2,Xe,i,o))}}function Ze(e,t){}var et=function(e,t){return{array:e,schema:t}};function tt(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,Ze,0,0,"ng-template",2),t.ɵɵelementContainerEnd()),2&e){var r=t.ɵɵnextContext(),i=r.value,o=r.schema;t.ɵɵnextContext();var a=t.ɵɵreference(9);t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",a)("ngTemplateOutletContext",t.ɵɵpureFunction2(2,et,i,o))}}function nt(e,t){}var rt=function(e){return{primitive:e}};function it(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,nt,0,0,"ng-template",2),t.ɵɵelementContainerEnd()),2&e){var r=t.ɵɵnextContext().value;t.ɵɵnextContext();var i=t.ɵɵreference(11);t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",t.ɵɵpureFunction1(2,rt,r))}}function ot(e,n){if(1&e&&(t.ɵɵelementContainerStart(0,8),t.ɵɵpipe(1,"typeOf"),t.ɵɵtemplate(2,Ye,2,5,"ng-container",9),t.ɵɵtemplate(3,tt,2,5,"ng-container",9),t.ɵɵtemplate(4,it,2,4,"ng-container",10),t.ɵɵelementContainerEnd()),2&e){var r=n.value;t.ɵɵproperty("ngSwitch",t.ɵɵpipeBind1(1,3,r)),t.ɵɵadvance(2),t.ɵɵproperty("ngSwitchCase","object"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","array")}}function at(e,t){}var ct=function(e,t){return{value:e,schema:t}};function st(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr"),t.ɵɵelementStart(1,"td"),t.ɵɵelementStart(2,"label"),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"td"),t.ɵɵtemplate(5,at,0,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext(),o=i.object,a=i.schema;t.ɵɵnextContext();var c=t.ɵɵreference(5);t.ɵɵadvance(3),t.ɵɵtextInterpolate(r),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",c)("ngTemplateOutletContext",t.ɵɵpureFunction2(3,ct,o[r],a.properties[r]))}}function lt(e,n){if(1&e&&(t.ɵɵelementStart(0,"table"),t.ɵɵtemplate(1,st,6,6,"tr",11),t.ɵɵpipe(2,"sortKeysBySchema"),t.ɵɵpipe(3,"keys"),t.ɵɵelementEnd()),2&e){var r=n.object,i=n.schema;t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind2(2,1,t.ɵɵpipeBind1(3,4,r),i))}}function pt(e,t){}function dt(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr",13),t.ɵɵelementStart(1,"td"),t.ɵɵtemplate(2,pt,0,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext().schema;t.ɵɵnextContext();var o=t.ɵɵreference(5);t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",o)("ngTemplateOutletContext",t.ɵɵpureFunction2(2,ct,r,i.items))}}function ut(e,n){if(1&e&&(t.ɵɵelementStart(0,"table"),t.ɵɵtemplate(1,dt,3,5,"tr",12),t.ɵɵelementEnd()),2&e){var r=n.array;t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",r)}}function ht(e,n){if(1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var r=n.primitive;t.ɵɵadvance(1),t.ɵɵtextInterpolate(r)}}var ft=function(){function e(e){this.jsonSchemaService=e}return e.prototype.ngOnChanges=function(e){e.patch&&(this.schema=this.jsonSchemaService.forPathString(this.patch.path))},Object.defineProperty(e.prototype,"leftBorderClass",{get:function(){return"add"===this.patch.op?"green-left-border":"orange-left-border"},enumerable:!1,configurable:!0}),e}();ft.ɵfac=function(e){return new(e||ft)(t.ɵɵdirectiveInject(L))},ft.ɵcmp=t.ɵɵdefineComponent({type:ft,selectors:[["add-or-replace-patch"]],inputs:{patch:"patch"},features:[t.ɵɵNgOnChangesFeature],decls:12,vars:8,consts:[["tabindex","-1",1,"patch-container",3,"ngClass","id"],[1,"grow"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"align-self-end",3,"patch"],["anyTypeTemplate",""],["objectTemplate",""],["arrayTemplate",""],["primitiveTemplate",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngFor","ngForOf"],["class","array-item",4,"ngFor","ngForOf"],[1,"array-item"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵtemplate(2,We,0,0,"ng-template",2),t.ɵɵelementEnd(),t.ɵɵelement(3,"patch-actions",3),t.ɵɵelementEnd(),t.ɵɵtemplate(4,ot,5,5,"ng-template",null,4,t.ɵɵtemplateRefExtractor),t.ɵɵtemplate(6,lt,4,6,"ng-template",null,5,t.ɵɵtemplateRefExtractor),t.ɵɵtemplate(8,ut,2,1,"ng-template",null,6,t.ɵɵtemplateRefExtractor),t.ɵɵtemplate(10,ht,2,1,"ng-template",null,7,t.ɵɵtemplateRefExtractor)),2&e){var r=t.ɵɵreference(5);t.ɵɵproperty("ngClass",n.leftBorderClass)("id",n.patch.path),t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",r)("ngTemplateOutletContext",t.ɵɵpureFunction2(5,ct,n.patch.value,n.schema)),t.ɵɵadvance(1),t.ɵɵproperty("patch",n.patch)}},directives:[u.NgClass,u.NgTemplateOutlet,He,u.NgSwitch,u.NgSwitchCase,u.NgSwitchDefault,u.NgForOf],pipes:[Je,qe,Ge],styles:["td[_ngcontent-%COMP%]{padding-right:10px!important;vertical-align:top}.align-self-end[_ngcontent-%COMP%]{align-self:flex-end}.patch-container[_ngcontent-%COMP%]{display:flex;padding-left:4px}.green-left-border[_ngcontent-%COMP%]{border-left:9px solid #2ecc71}.grow[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0});var mt=function(){function e(){}return e.prototype.transform=function(e){return e.replace(/\_/g," ")},e}();function gt(e,n){if(1&e&&(t.ɵɵelementStart(0,"th"),t.ɵɵtext(1),t.ɵɵpipe(2,"underscoreToSpace"),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext();t.ɵɵstyleProp("width",i.schema.items.properties[r].columnWidth+"%"),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,3,r)," ")}}function vt(e,n){if(1&e&&(t.ɵɵelementStart(0,"add-field-dropdown",9),t.ɵɵpipe(1,"async"),t.ɵɵelement(2,"i",10),t.ɵɵelement(3,"i",11),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("fields",t.ɵɵpipeBind1(1,4,r.keys$))("pathString",r.pathString)("schema",r.schema.items)("isDisabled",r.disabled)}}function yt(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"td",4),t.ɵɵelementStart(1,"list-action-group",14),t.ɵɵlistener("onMove",(function(e){t.ɵɵrestoreView(r);var n=t.ɵɵnextContext().index;return t.ɵɵnextContext().moveElement(n,e)}))("onDelete",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext().index;return t.ɵɵnextContext().deleteElement(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵclassProp("sortable",i.schema.sortable),t.ɵɵadvance(1),t.ɵɵproperty("canMove",i.schema.sortable)("isDisabled",i.disabled)}}function bt(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr",12),t.ɵɵpipe(1,"async"),t.ɵɵtemplate(2,yt,2,4,"td",13),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=n.index,o=t.ɵɵnextContext();t.ɵɵproperty("id",o.getPathStringForChild(i))("value",r)("schema",o.schema.items)("path",o.getPathForChild(i))("keys",t.ɵɵpipeBind1(1,6,o.keys$)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",o.values.size>0)}}function St(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr"),t.ɵɵelement(1,"patch-actions",15),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("patch",r.removeJsonPatch)}}function Ct(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",16),t.ɵɵelement(1,"add-or-replace-patch",15),t.ɵɵelementEnd()),2&e){var r=n.$implicit;t.ɵɵadvance(1),t.ɵɵproperty("patch",r)}}function xt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelement(1,"add-or-replace-patch",15),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("patch",r.replaceJsonPatches[0])}}mt.ɵfac=function(e){return new(e||mt)},mt.ɵpipe=t.ɵɵdefinePipe({name:"underscoreToSpace",type:mt,pure:!0});var wt=function(e){function t(t,n,r,i,o,a){var c=e.call(this,t,n,r,i,a)||this;return c.appGlobalsService=t,c.problemsService=n,c.jsonStoreService=r,c.pathUtilService=i,c.keysStoreService=o,c.changeDetectorRef=a,c}return M(t,e),Object.defineProperty(t.prototype,"keys$",{get:function(){return this.keysStoreService.forPath(this.pathString)},enumerable:!1,configurable:!0}),t}(Ve);function Pt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",10),t.ɵɵelement(1,"add-nested-field-dropdown",11),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("pathString",r.pathString)("schema",r.schema)("isDisabled",r.disabled)}}function Et(e,n){if(1&e&&(t.ɵɵelementStart(0,"li",15),t.ɵɵelement(1,"add-new-element-button",18),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("path",i.getPathForChild(r))("schema",i.schema.properties[r])}}function It(e,t){}function jt(e,n){if(1&e&&(t.ɵɵelementStart(0,"li",20),t.ɵɵtemplate(1,It,0,0,"ng-template",21),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",i.appGlobalsService.templates[r])}}function kt(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,jt,2,1,"li",19),t.ɵɵelementContainerEnd()),2&e){var r=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",i.getTitleDropdownItemTemplateNamesForChild(r))}}function Ot(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tr"),t.ɵɵelementStart(1,"td",12),t.ɵɵelementStart(2,"div"),t.ɵɵelementStart(3,"title-dropdown",13),t.ɵɵpipe(4,"underscoreToSpace"),t.ɵɵtemplate(5,Et,2,2,"li",14),t.ɵɵelementStart(6,"li",15),t.ɵɵelementStart(7,"button",16),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=n.$implicit;return t.ɵɵnextContext().deleteField(e)})),t.ɵɵtext(8,"Delete"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(9,kt,2,1,"ng-container",5),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(10,"td"),t.ɵɵelement(11,"any-type-field",17),t.ɵɵpipe(12,"selfOrEmpty"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,o=t.ɵɵnextContext();t.ɵɵadvance(3),t.ɵɵproperty("title",t.ɵɵpipeBind1(4,7,i))("isDisabled",o.isPropertyDisabled(i)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf","array"===o.schema.properties[i].type),t.ɵɵadvance(4),t.ɵɵproperty("ngIf",o.getTitleDropdownItemTemplateNamesForChild(i)),t.ɵɵadvance(2),t.ɵɵproperty("value",t.ɵɵpipeBind2(12,9,o.value.get(i),o.schema.properties[i]))("schema",o.schema.properties[i])("path",o.getPathForChild(i))}}function Mt(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr"),t.ɵɵelementStart(1,"td",12),t.ɵɵelement(2,"title-dropdown",13),t.ɵɵpipe(3,"underscoreToSpace"),t.ɵɵpipe(4,"lastPathElement"),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"td"),t.ɵɵelement(6,"add-or-replace-patch",22),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=n.$implicit;t.ɵɵadvance(2),t.ɵɵproperty("title",t.ɵɵpipeBind1(3,3,t.ɵɵpipeBind1(4,5,r.path)))("isDisabled",!0),t.ɵɵadvance(4),t.ɵɵproperty("patch",r)}}function Dt(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr"),t.ɵɵelement(1,"patch-actions",22),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("patch",r.removeJsonPatch)}}function Ft(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelement(1,"add-or-replace-patch",22),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("patch",r.replaceJsonPatches[0])}}wt.ɵfac=function(e){return new(e||wt)(t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(te),t.ɵɵdirectiveInject(q),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(J),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},wt.ɵcmp=t.ɵɵdefineComponent({type:wt,selectors:[["table-list-field"]],inputs:{values:"values",schema:"schema",path:"path"},features:[t.ɵɵInheritDefinitionFeature],decls:12,vars:14,consts:[[3,"id","ngClass"],[1,"table","editable-inner-table"],[1,"thead-inverse"],[3,"width",4,"ngFor","ngForOf","ngForTrackBy"],[1,"button-holder"],[3,"fields","pathString","schema","isDisabled",4,"ngIf"],["table-item-field","",3,"id","value","schema","path","keys",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","add-patch",4,"ngFor","ngForOf"],[3,"fields","pathString","schema","isDisabled"],[1,"fa","fa-plus"],[1,"fa","fa-caret-down"],["table-item-field","",3,"id","value","schema","path","keys"],["class","button-holder",3,"sortable",4,"ngIf"],[3,"canMove","isDisabled","onMove","onDelete"],[3,"patch"],[1,"add-patch"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"table",1),t.ɵɵelementStart(2,"thead",2),t.ɵɵelementStart(3,"tr"),t.ɵɵtemplate(4,gt,3,5,"th",3),t.ɵɵpipe(5,"async"),t.ɵɵelementStart(6,"th",4),t.ɵɵtemplate(7,vt,4,6,"add-field-dropdown",5),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(8,bt,3,8,"tr",6),t.ɵɵtemplate(9,St,2,1,"tr",7),t.ɵɵelementEnd(),t.ɵɵtemplate(10,Ct,2,1,"div",8),t.ɵɵtemplate(11,xt,2,1,"div",7),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("id",n.pathString)("ngClass",n.redLeftBorderClass),t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(5,12,n.keys$))("ngForTrackBy",n.trackByElement),t.ɵɵadvance(2),t.ɵɵclassProp("sortable",n.schema.sortable),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.values.size>0),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.values)("ngForTrackBy",n.trackByIndex),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.removeJsonPatch),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.addJsonPatches),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.replaceJsonPatches&&n.replaceJsonPatches[0]))},directives:[u.NgClass,u.NgForOf,u.NgIf,ge,Ue,Ke,He,ft],pipes:[u.AsyncPipe,mt],styles:["table.editable-inner-table[_ngcontent-%COMP%]{border:none}table.editable-inner-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border:none;color:#c1c1c1;vertical-align:middle}.add-patch[_ngcontent-%COMP%]{margin:8px 0}"],changeDetection:0});var Tt=function(e){function t(t,n,r,i,o,a){var c=e.call(this,t,n,i,o,r)||this;return c.appGlobalsService=t,c.problemsService=n,c.jsonStoreService=r,c.pathUtilService=i,c.changeDetectorRef=o,c.keysStoreService=a,c.isComplexListFieldItem=!1,c}return M(t,e),Object.defineProperty(t.prototype,"keys$",{get:function(){return this.keysStoreService.forPath(this.pathString)},enumerable:!1,configurable:!0}),t.prototype.deleteField=function(e){var t=this.path.concat(e);this.jsonStoreService.removeIn(t)},t.prototype.isPropertyDisabled=function(e){return this.schema.properties[e].disabled&&!this.appGlobalsService.adminMode},t.prototype.getTitleDropdownItemTemplateNamesForChild=function(e){return this.schema.properties[e].titleDropdownItemTemplateNames},t}(Be);function Nt(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",10),t.ɵɵelementStart(1,"button",16),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(3).onFoundNavigate(-1)})),t.ɵɵtext(2,"❮"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("disabled",i.currentFound<=0)}}function Bt(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",10),t.ɵɵelementStart(1,"button",16),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(3).onFoundNavigate(1)})),t.ɵɵtext(2,"❯"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("disabled",i.currentFound>=i.foundIndices.length-1)}}function Vt(e,n){1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1," Nothing found "),t.ɵɵelementEnd())}function At(e,n){if(1&e&&(t.ɵɵelementStart(0,"span"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(4);t.ɵɵadvance(1),t.ɵɵtextInterpolate2(" ",r.currentFound+1," of ",r.foundIndices.length," ")}}function _t(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",17),t.ɵɵtemplate(1,Vt,2,0,"span",18),t.ɵɵtemplate(2,At,2,2,"span",19),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(3);t.ɵɵproperty("ngSwitch",r.foundIndices.length),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase",0)}}function Rt(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"div",9),t.ɵɵelementStart(2,"span",10),t.ɵɵelementStart(3,"button",11),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onFindClick()})),t.ɵɵelement(4,"i",12),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"input",13),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).findExpression=e}))("keypress",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onFindInputKeypress(e.key)})),t.ɵɵelementEnd(),t.ɵɵtemplate(6,Nt,3,1,"span",14),t.ɵɵtemplate(7,Bt,3,1,"span",14),t.ɵɵtemplate(8,_t,3,2,"span",15),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵadvance(5),t.ɵɵproperty("ngModel",i.findExpression),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.shouldDisplayFoundNavigation),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.shouldDisplayFoundNavigation),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.foundIndices)}}function Ut(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",20),t.ɵɵelementStart(1,"label",21),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).shouldDisplayOnlyEditFormItems=!1})),t.ɵɵtext(2,"All"),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"label",21),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).shouldDisplayOnlyEditFormItems=!0})),t.ɵɵtext(4,"To Edit"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵclassProp("active",!i.shouldDisplayOnlyEditFormItems),t.ɵɵadvance(2),t.ɵɵclassProp("active",i.shouldDisplayOnlyEditFormItems)}}function $t(e,t){}function zt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,$t,0,0,"ng-template",22),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",r.headerItemTemplate)}}function Kt(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"label",23),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelement(3,"br"),t.ɵɵelementStart(4,"pagination",24),t.ɵɵlistener("pageChanged",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onPageChange(e.page)})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵadvance(2),t.ɵɵtextInterpolate2(" ",i.paginatableItems.size," ",i.path[i.path.length-1]," "),t.ɵɵadvance(2),t.ɵɵproperty("totalItems",i.paginatableItems.size)("ngModel",i.currentPage)("maxSize",i.navigator.maxVisiblePageCount)("itemsPerPage",i.navigator.itemsPerPage)("boundaryLinks",!0)("rotate",!1)("firstText","❮❮")("previousText","❮")("nextText","❯")("lastText","❯❯")}}function Lt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",7),t.ɵɵtemplate(1,Rt,9,4,"div",6),t.ɵɵtemplate(2,Ut,5,4,"div",8),t.ɵɵtemplate(3,zt,2,1,"div",6),t.ɵɵtemplate(4,Kt,5,12,"div",6),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.navigator),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.shouldDisplayViewTemplate),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.headerItemTemplate),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.navigator)}}function Ht(e,t){}Tt.ɵfac=function(e){return new(e||Tt)(t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(te),t.ɵɵdirectiveInject(q),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(J))},Tt.ɵcmp=t.ɵɵdefineComponent({type:Tt,selectors:[["object-field"]],inputs:{value:"value",schema:"schema",path:"path",isComplexListFieldItem:"isComplexListFieldItem"},features:[t.ɵɵInheritDefinitionFeature],decls:14,vars:16,consts:[[3,"id"],["class","pull-right",4,"ngIf"],[1,"table",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"button-holder"],[3,"fields","pathString","schema","isDisabled"],[1,"fa","fa-plus"],[1,"fa","fa-caret-down"],[1,"pull-right"],[3,"pathString","schema","isDisabled"],[1,"label-holder"],[3,"title","isDisabled"],["class","title-dropdown-item",4,"ngIf"],[1,"title-dropdown-item"],["type","button",1,"editor-btn-delete","editor-btn-delete-text",3,"click"],[3,"value","schema","path"],[3,"path","schema"],["class","title-dropdown-item custom-title-dropdown-item",4,"ngFor","ngForOf"],[1,"title-dropdown-item","custom-title-dropdown-item"],[3,"ngTemplateOutlet"],[3,"patch"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,Pt,2,3,"div",1),t.ɵɵelementStart(2,"table",2),t.ɵɵtemplate(3,Ot,13,12,"tr",3),t.ɵɵpipe(4,"async"),t.ɵɵtemplate(5,Mt,7,7,"tr",4),t.ɵɵtemplate(6,Dt,2,1,"tr",5),t.ɵɵelementStart(7,"tr"),t.ɵɵelementStart(8,"td",6),t.ɵɵelementStart(9,"add-field-dropdown",7),t.ɵɵpipe(10,"async"),t.ɵɵelement(11,"i",8),t.ɵɵelement(12,"i",9),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(13,Ft,2,1,"div",5),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("id",n.pathString),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.isComplexListFieldItem),t.ɵɵadvance(1),t.ɵɵproperty("ngClass",n.redLeftBorderClass),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(4,12,n.keys$))("ngForTrackBy",n.trackByElement),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",n.addJsonPatches),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.removeJsonPatch),t.ɵɵadvance(3),t.ɵɵproperty("fields",t.ɵɵpipeBind1(10,14,n.keys$))("pathString",n.pathString)("schema",n.schema)("isDisabled",n.disabled),t.ɵɵadvance(4),t.ɵɵproperty("ngIf",n.replaceJsonPatches&&n.replaceJsonPatches[0]))},styles:["table.table[_ngcontent-%COMP%]{background-color:#f9f9f9}"],changeDetection:0});var Jt=function(e){return{item:e}};function qt(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span"),t.ɵɵtemplate(1,Ht,0,0,"ng-template",26),t.ɵɵelementStart(2,"a",27),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext();return e.editFormDisplayedByUser=!n.shouldDisplayEditableFieldsForItem(e)})),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext().$implicit,o=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",o.customTemplate)("ngTemplateOutletContext",t.ɵɵpureFunction1(3,Jt,o.values.get(i.index))),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",o.shouldDisplayEditableFieldsForItem(i)?"Hide Fields":"Show Fields"," ")}}function Gt(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span"),t.ɵɵelement(1,"object-field",28),t.ɵɵelementStart(2,"div",29),t.ɵɵelementStart(3,"div",30),t.ɵɵelementStart(4,"list-action-group",31),t.ɵɵlistener("onMove",(function(e){t.ɵɵrestoreView(r);var n=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext().moveElement(n.index,e)}))("onDelete",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext().deleteElement(e.index)})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext().$implicit,o=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("value",o.values.get(i.index))("schema",o.schema.items)("path",o.getPathForChild(i.index))("isComplexListFieldItem",!0),t.ɵɵadvance(3),t.ɵɵproperty("canMove",o.sortable)("isDisabled",o.disabled||o.hasPatchOrChildrenHavePatch())}}function Wt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"div",25),t.ɵɵtemplate(2,qt,4,5,"span",6),t.ɵɵtemplate(3,Gt,5,6,"span",6),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵproperty("ngIf",i.shouldDisplayViewTemplate&&0!=i.values.get(r.index).keySeq().size),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.shouldDisplayEditableFieldsForItem(r))}}function Qt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",32),t.ɵɵelement(1,"patch-actions",33),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("patch",r.removeJsonPatch)}}function Xt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",25),t.ɵɵelement(1,"add-or-replace-patch",33),t.ɵɵelementEnd()),2&e){var r=n.$implicit;t.ɵɵadvance(1),t.ɵɵproperty("patch",r)}}function Yt(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelement(1,"add-or-replace-patch",33),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("patch",r.replaceJsonPatches[0])}}var Zt=function(e){function t(t,n,r,i,o,a,c){var s=e.call(this,t,n,r,o,a)||this;return s.appGlobalsService=t,s.problemsService=n,s.jsonStoreService=r,s.domUtilService=i,s.pathUtilService=o,s.changeDetectorRef=a,s.listPageChangerService=c,s.currentFound=0,s.currentPage=1,s._shouldDisplayOnlyEditFormItems=!1,s}return M(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.navigator=this.schema.longListNavigatorConfig,this.paginatableItems=this.getPaginatableItems(),this.paginatedItems=this.getPaginatableItemsForPage(this.currentPage),this.navigator&&this.listPageChangerService.registerPaginatedList(this.pathString,this.navigator.itemsPerPage).pipe(r.skipWhile((function(e){return e===t.currentPage}))).pipe(r.takeUntil(this.isDestroyed)).subscribe((function(e){return t.onPageChange(e)}))},t.prototype.ngOnChanges=function(t){e.prototype.ngOnChanges.call(this,t);var n=t.values;if(n&&!n.isFirstChange()){var r=n.previousValue.size,i=n.currentValue.size;if(i!==r&&this.navigator){var o=n.previousValue.equals(n.currentValue.pop()),a=this.getPageForIndex(i-1);i>r&&this.currentPage!==a&&o&&(this.currentPage=a)}this.paginatableItems=this.getPaginatableItems(),this.paginatedItems=this.getPaginatableItemsForPage(this.currentPage)}},t.prototype.hasProblemOrPatch=function(e){var t=this.getPathStringForChild(e);return this.problemsService.hasProblem(t)||this.jsonStoreService.hasPatchOrChildrenHavePatch(t)},Object.defineProperty(t.prototype,"headerItemTemplate",{get:function(){return this.appGlobalsService.templates[this.navigator.headerItemTemplateName]},enumerable:!1,configurable:!0}),t.prototype.onFindClick=function(){var e=this;if(this.foundIndices=[],this.currentFound=0,this.navigator.findSingle){var t=this.values.findIndex((function(t){return e.navigator.findSingle(t,e.findExpression)}));t>-1&&this.foundIndices.push(t)}0===this.foundIndices.length&&this.navigator.findMultiple&&this.values.forEach((function(t,n){e.navigator.findMultiple(t,e.findExpression)&&e.foundIndices.push(n)})),this.foundIndices.length>0?(this.navigateToItem(this.foundIndices[0]),this.shouldDisplayFoundNavigation=!0):this.shouldDisplayFoundNavigation=!1},t.prototype.onFindInputKeypress=function(e){"Enter"===e&&this.onFindClick()},t.prototype.onFoundNavigate=function(e){this.currentFound+=e,this.navigateToItem(this.foundIndices[this.currentFound])},t.prototype.navigateToItem=function(e){var t=this,n=this.paginatableItems.get(e);n.editFormDisplayedByUser||(n.editFormDisplayedByUser=!0,this.changeDetectorRef.markForCheck());var r=this.path.concat(e),i=this.pathUtilService.toPathString(r);setTimeout((function(){return t.domUtilService.focusAndSelectFirstEditableChildById(i)}))},t.prototype.onPageChange=function(e){this.currentPage=e,this.paginatedItems=this.getPaginatableItemsForPage(e)},t.prototype.getPaginatableItemsForPage=function(e){if(this.navigator){var t=(e-1)*this.navigator.itemsPerPage,n=e*this.navigator.itemsPerPage;return this.paginatableItems.slice(t,n)}return this.paginatableItems},t.prototype.getPaginatableItems=function(){var e=this,t=this.schema.viewTemplateConfig;return this.values.map((function(n,r){var i=e.paginatableItems?e.paginatableItems.get(r):null,o=null==i?null:i.editFormDisplayedByUser;return{index:r,shouldDisplayEditForm:!t||t.showEditForm(n),editFormDisplayedByUser:o}})).filter((function(t){return!e.shouldDisplayOnlyEditFormItems||t.shouldDisplayEditForm}))},t.prototype.getPageForIndex=function(e){return Math.floor(e/this.navigator.itemsPerPage+1)},Object.defineProperty(t.prototype,"customTemplate",{get:function(){return this.appGlobalsService.templates[this.schema.viewTemplateConfig.itemTemplateName]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldDisplayViewTemplate",{get:function(){return void 0!==this.schema.viewTemplateConfig},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sortable",{get:function(){return this.schema.sortable&&!this.shouldDisplayOnlyEditFormItems},enumerable:!1,configurable:!0}),t.prototype.shouldDisplayEditableFieldsForItem=function(e){return(null!=e.editFormDisplayedByUser?e.editFormDisplayedByUser:e.shouldDisplayEditForm)||this.hasProblemOrPatch(e.index)},Object.defineProperty(t.prototype,"shouldDisplayOnlyEditFormItems",{get:function(){return this._shouldDisplayOnlyEditFormItems},set:function(e){this.currentPage=1,this._shouldDisplayOnlyEditFormItems=e,this.paginatableItems=this.getPaginatableItems(),this.paginatedItems=this.getPaginatableItemsForPage(this.currentPage)},enumerable:!1,configurable:!0}),t}(Ve);function en(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"td",8),t.ɵɵelementStart(1,"list-action-group",9),t.ɵɵlistener("onMove",(function(e){t.ɵɵrestoreView(r);var n=t.ɵɵnextContext().index;return t.ɵɵnextContext().moveElement(n,e)}))("onDelete",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext().index;return t.ɵɵnextContext().deleteElement(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵclassProp("sortable",i.schema.sortable),t.ɵɵadvance(1),t.ɵɵproperty("canMove",i.schema.sortable)("isDisabled",i.disabled)}}function tn(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr"),t.ɵɵelementStart(1,"td"),t.ɵɵelement(2,"any-type-field",6),t.ɵɵelementEnd(),t.ɵɵtemplate(3,en,2,4,"td",7),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=n.index,o=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵproperty("value",r)("schema",o.schema.items)("path",o.getPathForChild(i)),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o.values.size>0)}}function nn(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr"),t.ɵɵelement(1,"patch-actions",10),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("patch",r.removeJsonPatch)}}function rn(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr"),t.ɵɵelement(1,"add-or-replace-patch",10),t.ɵɵelementEnd()),2&e){var r=n.$implicit;t.ɵɵadvance(1),t.ɵɵproperty("patch",r)}}function on(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr"),t.ɵɵelement(1,"add-or-replace-patch",10),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("patch",r.replaceJsonPatches[0])}}Zt.ɵfac=function(e){return new(e||Zt)(t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(te),t.ɵɵdirectiveInject(q),t.ɵɵdirectiveInject(U),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(R))},Zt.ɵcmp=t.ɵɵdefineComponent({type:Zt,selectors:[["complex-list-field"]],inputs:{values:"values",schema:"schema",path:"path"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:7,vars:8,consts:[[3,"id"],["class","top-bar-container",4,"ngIf"],[3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","text-right",4,"ngIf"],["class","complex-list-field-wrapper",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"top-bar-container"],["class","btn-group",4,"ngIf"],[1,"input-group","input-group-sm"],[1,"input-group-btn"],["type","button",1,"btn","btn-default","find-button",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["type","search","placeholder","Find",1,"form-control",3,"ngModel","ngModelChange","keypress"],["class","input-group-btn",4,"ngIf"],["class","input-group-addon transparent borderless",3,"ngSwitch",4,"ngIf"],["type","button",1,"btn","btn-default",3,"disabled","click"],[1,"input-group-addon","transparent","borderless",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"btn-group"],[1,"btn","btn-switch",3,"click"],[3,"ngTemplateOutlet"],[1,"item-count-label"],[1,"pagination-sm","pagination-top",3,"totalItems","ngModel","maxSize","itemsPerPage","boundaryLinks","rotate","firstText","previousText","nextText","lastText","pageChanged"],[1,"complex-list-field-wrapper"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["href","javascript:void(0)",3,"click"],[3,"value","schema","path","isComplexListFieldItem"],[1,"row","element-button-container"],[1,"col-md-12","text-right"],[3,"canMove","isDisabled","onMove","onDelete"],[1,"text-right"],[3,"patch"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,Lt,5,4,"div",1),t.ɵɵelementStart(2,"div",2),t.ɵɵtemplate(3,Wt,4,2,"div",3),t.ɵɵtemplate(4,Qt,2,1,"div",4),t.ɵɵelementEnd(),t.ɵɵtemplate(5,Xt,2,1,"div",5),t.ɵɵtemplate(6,Yt,2,1,"div",6),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("id",n.pathString),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.navigator||n.shouldDisplayViewTemplate),t.ɵɵadvance(1),t.ɵɵproperty("ngClass",n.redLeftBorderClass),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.paginatedItems)("ngForTrackBy",n.trackByElement),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.removeJsonPatch),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.addJsonPatches),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.replaceJsonPatches&&n.replaceJsonPatches[0]))},directives:[u.NgIf,u.NgClass,u.NgForOf,g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,u.NgSwitch,u.NgSwitchCase,u.NgSwitchDefault,u.NgTemplateOutlet,S.PaginationComponent,Tt,Ke,He,ft],styles:[".complex-list-field-wrapper[_ngcontent-%COMP%]{box-shadow:0 0 3px 1px rgba(0,0,0,.25);margin:10px 15px 15px 10px;padding:5px}.top-bar-container[_ngcontent-%COMP%]{align-items:center;background-color:#fff;box-shadow:inset 0 .5px 0 0 #fff,0 1px 2px 0 #b3b3b3;display:flex;justify-content:space-between;padding:0 15px;position:-webkit-sticky;position:sticky;top:46px;width:100%;z-index:1}.item-count-label[_ngcontent-%COMP%]{position:relative;top:-19px}.transparent[_ngcontent-%COMP%]{background:transparent}.borderless[_ngcontent-%COMP%]{border:none}.find-button[_ngcontent-%COMP%]{color:#2f4f4f}.find-button[_ngcontent-%COMP%]   .fa-search[_ngcontent-%COMP%]{opacity:.83}.element-button-container[_ngcontent-%COMP%]{padding-top:8px}.element-button-container[_ngcontent-%COMP%]   .text-right[_ngcontent-%COMP%]{padding:0}label.btn[_ngcontent-%COMP%]{color:#fff!important}"],changeDetection:0});var an=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i,o)||this;return a.appGlobalsService=t,a.problemsService=n,a.jsonStoreService=r,a.pathUtilService=i,a.changeDetectorRef=o,a}return M(t,e),t}(Ve);an.ɵfac=function(e){return new(e||an)(t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(te),t.ɵɵdirectiveInject(q),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},an.ɵcmp=t.ɵɵdefineComponent({type:an,selectors:[["primitive-list-field"]],inputs:{values:"values",schema:"schema",path:"path"},features:[t.ɵɵInheritDefinitionFeature],decls:9,vars:10,consts:[[3,"id","ngClass"],[1,"wide"],[1,"table"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value","schema","path"],["class","button-holder",3,"sortable",4,"ngIf"],[1,"button-holder"],[3,"canMove","isDisabled","onMove","onDelete"],[3,"patch"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"div",1),t.ɵɵelementStart(2,"table",2),t.ɵɵtemplate(3,tn,4,4,"tr",3),t.ɵɵpipe(4,"selfOrEmpty"),t.ɵɵtemplate(5,nn,2,1,"tr",4),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"table",2),t.ɵɵtemplate(7,rn,2,1,"tr",5),t.ɵɵtemplate(8,on,2,1,"tr",4),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("id",n.pathString)("ngClass",n.redLeftBorderClass),t.ɵɵadvance(3),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind2(4,7,n.values,n.schema))("ngForTrackBy",n.trackByIndex),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.removeJsonPatch),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",n.addJsonPatches),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.replaceJsonPatches&&n.replaceJsonPatches[0]))},styles:["td[_ngcontent-%COMP%]{padding:0!important}"],changeDetection:0});var cn=function(){function e(e){this.elementRef=e,this.contentModelChange=new t.EventEmitter}return e.prototype.ngOnChanges=function(e){e.contentModel&&this.refresh()},e.prototype.onBlur=function(){this.emitContentModelChange()},e.prototype.onKeypress=function(e){"Enter"===e.key&&this.emitContentModelChange()},e.prototype.emitContentModelChange=function(){var e=this.elementRef.nativeElement.innerText;this.contentModelChange.emit(e)},e.prototype.refresh=function(){this.elementRef.nativeElement.innerText=this.contentModel},e}();cn.ɵfac=function(e){return new(e||cn)(t.ɵɵdirectiveInject(t.ElementRef))},cn.ɵdir=t.ɵɵdefineDirective({type:cn,selectors:[["","contentModel",""]],hostBindings:function(e,n){1&e&&t.ɵɵlistener("blur",(function(){return n.onBlur()}))("keypress",(function(e){return n.onKeypress(e)}))},inputs:{contentModel:"contentModel"},outputs:{contentModelChange:"contentModelChange"},features:[t.ɵɵNgOnChangesFeature]});var sn=["latexPreview"],ln=function(){function e(e,n){this.domUtilService=e,this.katexService=n,this.blur=new t.EventEmitter,this.onKeypress=new t.EventEmitter,this.valueChange=new t.EventEmitter}return e.prototype.ngOnChanges=function(e){var t=e.value;t&&(this.contentModel=this.value,this.latexPreviewEnabled&&!t.firstChange&&this.renderLatex())},e.prototype.ngOnInit=function(){this.shouldShowLatexPreview&&(this.latexPreviewShown=!0)},e.prototype.ngAfterViewInit=function(){this.shouldShowLatexPreview&&this.renderLatex()},e.prototype.onBlur=function(){this.shouldShowLatexPreview&&(this.latexPreviewShown=!0,this.value=this.contentModel),this.blur.emit()},e.prototype.renderLatex=function(){this.katexService.renderMathInText(this.value,this.latexPreviewEl.nativeElement)},e.prototype.hideLatexPreview=function(e){this.latexPreviewShown=!1,setTimeout((function(){return e.focus()}))},e.prototype.contentModelChange=function(e){this.contentModel=e,this.valueChange.emit(e)},Object.defineProperty(e.prototype,"shouldShowLatexPreview",{get:function(){return this.latexPreviewEnabled&&Boolean(this.value)},enumerable:!1,configurable:!0}),e}();ln.ɵfac=function(e){return new(e||ln)(t.ɵɵdirectiveInject(U),t.ɵɵdirectiveInject(ne))},ln.ɵcmp=t.ɵɵdefineComponent({type:ln,selectors:[["string-input"]],viewQuery:function(e,n){var r;(1&e&&t.ɵɵviewQuery(sn,!0),2&e)&&(t.ɵɵqueryRefresh(r=t.ɵɵloadQuery())&&(n.latexPreviewEl=r.first))},inputs:{value:"value",disabled:"disabled",pathString:"pathString",placeholder:"placeholder",tabIndex:"tabIndex",latexPreviewEnabled:"latexPreviewEnabled"},outputs:{blur:"blur",onKeypress:"onKeypress",valueChange:"valueChange"},features:[t.ɵɵNgOnChangesFeature],decls:4,vars:9,consts:[[3,"tabindex","contentModel","contentModelChange","blur","keypress"],["contentEditable",""],[3,"click","blur"],["latexPreview",""]],template:function(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",0,1),t.ɵɵlistener("contentModelChange",(function(e){return n.contentModelChange(e)}))("blur",(function(){return n.onBlur()}))("keypress",(function(e){return n.onKeypress.emit(e)})),t.ɵɵelementEnd(),t.ɵɵelementStart(2,"div",2,3),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵreference(1);return n.hideLatexPreview(e)}))("blur",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵreference(1);return n.hideLatexPreview(e)})),t.ɵɵelementEnd()}2&e&&(t.ɵɵclassProp("hidden",n.latexPreviewShown),t.ɵɵproperty("tabindex",n.tabIndex)("contentModel",n.contentModel),t.ɵɵattribute("contenteditable",!n.disabled)("data-path",n.pathString)("placeholder",n.placeholder||"⁣⁣"),t.ɵɵadvance(2),t.ɵɵclassProp("hidden",!n.latexPreviewEnabled||!n.latexPreviewShown))},directives:[cn],styles:[""],changeDetection:0});var pn=["filterInput"],dn=["dropdown"];function un(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"input",7,8),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext().expression=e}))("keyup.enter",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext().onEnterKeyUp()}))("blur",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext().onInputBlur(e)})),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵproperty("placeholder",i.placeholder)("ngModel",i.expression),t.ɵɵattribute("data-path",i.pathString)}}function hn(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"li",11),t.ɵɵelementStart(1,"a",12),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=n.$implicit;return t.ɵɵnextContext(2).onItemClick(e)})),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(i)}}function fn(e,n){if(1&e&&(t.ɵɵelementStart(0,"ul",9),t.ɵɵtemplate(1,hn,3,1,"li",10),t.ɵɵpipe(2,"filterByExpression"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind2(2,1,r.displayValues,r.expression))}}function mn(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",13),t.ɵɵlistener("focus",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext().showDropdown()})),t.ɵɵtext(1),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵproperty("tabindex",i.tabIndex),t.ɵɵadvance(1),t.ɵɵtextInterpolate(i.biDisplayValueMap.getValue(i.value))}}var gn=function(){function e(){this.onSelect=new t.EventEmitter,this.onBlur=new t.EventEmitter}return e.prototype.ngOnChanges=function(e){var t=this;e.value&&(this.placeholder=this.value||this.placeholder||""),(e.displayValueMap||e.items)&&(this.displayValueMap=this.displayValueMap||Object.create(null),this.biDisplayValueMap=new C.BiDirectionalMap(this.displayValueMap),this.items.filter((function(e){return!t.displayValueMap[e]})).forEach((function(e){t.biDisplayValueMap.set(e,e)})),this.displayValues=Array.from(this.biDisplayValueMap.values()))},e.prototype.onItemClick=function(e){var t=this.biDisplayValueMap.getKey(e);this.onSelect.emit(t),this.dropdown.hide()},e.prototype.onEnterKeyUp=function(){this.shortcutMap&&this.shortcutMap[this.expression]&&this.onItemClick(this.shortcutMap[this.expression]),this.dropdown.hide()},e.prototype.showDropdown=function(){var e=this;this.dropdown.show(),this.expression="",setTimeout((function(){e.filterInputElRef.nativeElement.focus()}))},e.prototype.onInputBlur=function(e){var t=e.relatedTarget;t&&"dropdown-item"===t.className||this.dropdown.hide(),this.onBlur.emit()},e}();function vn(e,t){}gn.ɵfac=function(e){return new(e||gn)},gn.ɵcmp=t.ɵɵdefineComponent({type:gn,selectors:[["searchable-dropdown"]],viewQuery:function(e,n){var r;(1&e&&(t.ɵɵviewQuery(pn,!0),t.ɵɵviewQuery(dn,!0)),2&e)&&(t.ɵɵqueryRefresh(r=t.ɵɵloadQuery())&&(n.filterInputElRef=r.first),t.ɵɵqueryRefresh(r=t.ɵɵloadQuery())&&(n.dropdown=r.first))},inputs:{items:"items",shortcutMap:"shortcutMap",displayValueMap:"displayValueMap",value:"value",pathString:"pathString",tabIndex:"tabIndex",placeholder:"placeholder"},outputs:{onSelect:"onSelect",onBlur:"onBlur"},features:[t.ɵɵNgOnChangesFeature],decls:8,vars:2,consts:[["dropdown","","keyboardNav","true",1,"btn-group"],["dropdown","bs-dropdown"],[1,"toggle-container"],["class","value",3,"placeholder","ngModel","ngModelChange","keyup.enter","blur",4,"ngIf","ngIfElse"],[1,"fa","fa-caret-down",3,"click"],["class","dropdown-menu","role","menu",4,"dropdownMenu"],["valueDisplayTemplate",""],[1,"value",3,"placeholder","ngModel","ngModelChange","keyup.enter","blur"],["filterInput",""],["role","menu",1,"dropdown-menu"],["role","menuitem",4,"ngFor","ngForOf"],["role","menuitem"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"value",3,"tabindex","focus"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",0,1),t.ɵɵelementStart(2,"div",2),t.ɵɵtemplate(3,un,2,3,"input",3),t.ɵɵelementStart(4,"i",4),t.ɵɵlistener("click",(function(){return n.showDropdown()})),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(5,fn,3,4,"ul",5),t.ɵɵelementEnd(),t.ɵɵtemplate(6,mn,2,2,"ng-template",null,6,t.ɵɵtemplateRefExtractor)),2&e){var r=t.ɵɵreference(1),i=t.ɵɵreference(7);t.ɵɵadvance(3),t.ɵɵproperty("ngIf",r.isOpen)("ngIfElse",i)}},directives:[m.BsDropdownDirective,u.NgIf,m.BsDropdownMenuDirective,g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,u.NgForOf],pipes:[ue],styles:["div.btn-group[_ngcontent-%COMP%]{width:100%}.dropdown-menu[_ngcontent-%COMP%]{left:0!important}.toggle-container[_ngcontent-%COMP%]{display:inline-flex;width:100%}.toggle-container[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1}.dropdown-toggle[_ngcontent-%COMP%]{box-shadow:none!important}"],changeDetection:0});var yn=function(e,t,n,r){return{item:e,index:t,match:n,query:r}};function bn(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",4),t.ɵɵlistener("mousedown",(function(){t.ɵɵrestoreView(r);var e=n.match;return t.ɵɵnextContext().onMatchWrapperMouseDown(e)})),t.ɵɵtemplate(1,vn,0,0,"ng-template",5),t.ɵɵelementEnd()}if(2&e){var i=n.match,o=t.ɵɵnextContext(),a=t.ɵɵreference(3);t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",o.customItemTemplate||a)("ngTemplateOutletContext",t.ɵɵpureFunction4(2,yn,i.item,o.i,i,o.query))}}function Sn(e,n){if(1&e&&t.ɵɵtext(0),2&e){var r=n.match;t.ɵɵtextInterpolate1(" ",r.value,"\n")}}var Cn=function(){function e(e,n){this.remoteAutocompletionService=e,this.appGlobalsService=n,this.onValueChange=new t.EventEmitter,this.onCompletionSelect=new t.EventEmitter,this.onKeypress=new t.EventEmitter,this.onBlur=new t.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.autocompletionConfig.url?(this.typeaheadOptionField=this.getDotSeparatedOptionField()||"text",this.dataSource=i.Observable.create((function(t){e.value&&e.value.length>0&&t.next(e.value)})).mergeMap((function(t){return e.remoteAutocompletionService.getAutocompletionResults(e.autocompletionConfig,t)}))):(this.typeaheadOptionField=this.getDotSeparatedOptionField()||"",this.dataSource=this.autocompletionConfig.source)},Object.defineProperty(e.prototype,"customItemTemplate",{get:function(){return this.appGlobalsService.templates[this.autocompletionConfig.itemTemplateName]},enumerable:!1,configurable:!0}),e.prototype.getDotSeparatedOptionField=function(){var t=this.autocompletionConfig.optionField;return t&&t.replace(e.slashesRegExp,".")},e.prototype.onModelChange=function(e){this.value=e,this.onValueChange.emit(e)},e.prototype.onMatchSelect=function(e){this.onCompletionSelect.emit(e.item)},e.prototype.onMatchWrapperMouseDown=function(e){this.onModelChange(e.value),this.onMatchSelect(e)},e}();Cn.slashesRegExp=new RegExp("/","g"),Cn.ɵfac=function(e){return new(e||Cn)(t.ɵɵdirectiveInject(V),t.ɵɵdirectiveInject(N))},Cn.ɵcmp=t.ɵɵdefineComponent({type:Cn,selectors:[["autocomplete-input"]],inputs:{autocompletionConfig:"autocompletionConfig",value:"value",pathString:"pathString",tabIndex:"tabIndex",placeholder:"placeholder"},outputs:{onValueChange:"onValueChange",onCompletionSelect:"onCompletionSelect",onKeypress:"onKeypress",onBlur:"onBlur"},decls:6,vars:9,consts:[["matchWrapper",""],["defaultItemTemplate",""],[1,"autocomplete-container"],[3,"ngModel","typeahead","typeaheadOptionsLimit","typeaheadOptionField","typeaheadItemTemplate","typeaheadWaitMs","tabindex","placeholder","ngModelChange","keypress","blur","typeaheadOnSelect"],[2,"width","100%","height","100%","padding","3px 20px",3,"mousedown"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){if(1&e&&(t.ɵɵtemplate(0,bn,2,7,"ng-template",null,0,t.ɵɵtemplateRefExtractor),t.ɵɵtemplate(2,Sn,1,1,"ng-template",null,1,t.ɵɵtemplateRefExtractor),t.ɵɵelementStart(4,"div",2),t.ɵɵelementStart(5,"input",3),t.ɵɵlistener("ngModelChange",(function(e){return n.onModelChange(e)}))("keypress",(function(e){return n.onKeypress.emit(e)}))("blur",(function(){return n.onBlur.emit()}))("typeaheadOnSelect",(function(e){return n.onMatchSelect(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵreference(1);t.ɵɵadvance(5),t.ɵɵpropertyInterpolate("placeholder",n.placeholder),t.ɵɵproperty("ngModel",n.value)("typeahead",n.dataSource)("typeaheadOptionsLimit",n.autocompletionConfig.size)("typeaheadOptionField",n.typeaheadOptionField)("typeaheadItemTemplate",r)("typeaheadWaitMs",200)("tabindex",n.tabIndex),t.ɵɵattribute("data-path",n.pathString)}},directives:[g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,x.TypeaheadDirective,u.NgTemplateOutlet],styles:[""],changeDetection:0});var xn=function(e,t){return{added:e,removed:t}};function wn(e,n){if(1&e&&(t.ɵɵelementStart(0,"span",1),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var r=n.$implicit;t.ɵɵproperty("ngClass",t.ɵɵpureFunction2(2,xn,r.added,r.removed)),t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.value)}}var Pn=function(){function e(e){this.textDiffService=e}return Object.defineProperty(e.prototype,"diffs",{get:function(){return this.textDiffService.diffByWord(this.currentText,this.newText)},enumerable:!1,configurable:!0}),e}();function En(e,n){if(1&e&&(t.ɵɵelementStart(0,"li"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var r=n.$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",r.message," ")}}function In(e,n){if(1&e&&(t.ɵɵelementStart(0,"li"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var r=n.$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",r.message," ")}}function jn(e,n){if(1&e&&(t.ɵɵelementStart(0,"ul",10),t.ɵɵtemplate(1,En,2,1,"li",11),t.ɵɵtemplate(2,In,2,1,"li",11),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",r.internalErrors),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",r.externalErrors)}}function kn(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"string-input",15),t.ɵɵlistener("valueChange",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onValueChange(e)}))("blur",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onBlur()}))("onKeypress",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onKeypress(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("pathString",i.pathString)("value",i.value)("disabled",i.disabled)("tabIndex",i.tabIndex)("latexPreviewEnabled",i.schema.latexPreviewEnabled)("placeholder",i.schema.title)}}function On(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"searchable-dropdown",16),t.ɵɵlistener("onSelect",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onSearchableDropdownSelect(e)}))("onBlur",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onBlur()})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("pathString",i.pathString)("value",i.value)("placeholder",i.schema.title)("items",i.schema.enum)("shortcutMap",i.schema.enumShorcutMap)("displayValueMap",i.schema.enumDisplayValueMap)("tabIndex",i.tabIndex)}}function Mn(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"autocomplete-input",17),t.ɵɵlistener("onBlur",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onBlur()}))("onKeypress",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onKeypress(e)}))("onValueChange",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onValueChange(e)}))("onCompletionSelect",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onCompletionSelect(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("pathString",i.pathString)("value",i.value)("autocompletionConfig",i.schema.autocompletionConfig)("placeholder",i.schema.title)("tabIndex",i.tabIndex)}}function Dn(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"input",18),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).value=e}))("blur",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onBlur()}))("keypress",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onKeypress(e)})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngModel",i.value)("tabindex",i.tabIndex)("placeholder",i.schema.title),t.ɵɵattribute("data-path",i.pathString)}}function Fn(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"input",19),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).value=e}))("ngModelChange",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).onBlur()})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngModel",i.value)("placeholder",i.schema.title)}}function Tn(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ## Not recognized type: ",r.valueType," ")}}function Nn(e,n){if(1&e&&(t.ɵɵelementStart(0,"td",12),t.ɵɵtemplate(1,kn,2,6,"div",13),t.ɵɵtemplate(2,On,2,7,"div",13),t.ɵɵtemplate(3,Mn,2,5,"div",13),t.ɵɵtemplate(4,Dn,2,4,"div",13),t.ɵɵtemplate(5,Fn,2,2,"div",13),t.ɵɵtemplate(6,Tn,2,1,"div",14),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(),i=t.ɵɵreference(4);t.ɵɵclassProp("disabled",r.disabled),t.ɵɵpropertyInterpolate("placement",r.tooltipPosition),t.ɵɵproperty("tooltip",i)("isDisabled",!r.hasErrors()),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","string"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","enum"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","autocomplete"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","integer"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","boolean")}}function Bn(e,n){if(1&e&&(t.ɵɵelementStart(0,"a",20),t.ɵɵelement(1,"i",21),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("href",r.schema.linkBuilder(r.value),t.ɵɵsanitizeUrl)}}function Vn(e,n){if(1&e&&(t.ɵɵelementStart(0,"a",20),t.ɵɵelement(1,"i",21),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("href",r.value,t.ɵɵsanitizeUrl)}}function An(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr"),t.ɵɵelement(1,"patch-actions",22),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("patch",r.removeJsonPatch)}}Pn.ɵfac=function(e){return new(e||Pn)(t.ɵɵdirectiveInject(re))},Pn.ɵcmp=t.ɵɵdefineComponent({type:Pn,selectors:[["text-diff"]],inputs:{newText:"newText",currentText:"currentText"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,n){1&e&&t.ɵɵtemplate(0,wn,2,5,"span",0),2&e&&t.ɵɵproperty("ngForOf",n.diffs)},directives:[u.NgForOf,u.NgClass],styles:[".added[_ngcontent-%COMP%]{color:green;font-weight:700}.removed[_ngcontent-%COMP%]{color:red;text-decoration:line-through}"],changeDetection:0});var _n=function(e,t){return{currentValue:e,patchValue:t}};function Rn(e,n){if(1&e&&(t.ɵɵelementStart(0,"button",23),t.ɵɵtext(1),t.ɵɵelement(2,"i",24),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(),i=t.ɵɵreference(13);t.ɵɵproperty("popover",i)("popoverContext",t.ɵɵpureFunction2(3,_n,r.value,r.replaceJsonPatches[0].value)),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",r.value," ")}}function Un(e,n){if(1&e&&(t.ɵɵelement(0,"text-diff",25),t.ɵɵelement(1,"patch-actions",26)),2&e){var r=n.currentValue,i=n.patchValue,o=t.ɵɵnextContext();t.ɵɵproperty("currentText",r.toString())("newText",i?i.toString():""),t.ɵɵadvance(1),t.ɵɵproperty("patch",o.replaceJsonPatches[0])("addActionEnabled",o.isPathToAnIndex)}}var $n=function(e){function t(t,n,r,i,o,a,c,s,l){var p=e.call(this,r,i,c,l,o)||this;return p.schemaValidationService=t,p.componentTypeService=n,p.appGlobalsService=r,p.problemsService=i,p.jsonStoreService=o,p.keysStoreService=a,p.pathUtilService=c,p.domUtilService=s,p.changeDetectorRef=l,p.internalErrors=[],p}return M(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.value!==this.schema.default&&(this.lastCommitedValue=this.value),this.problemsService.internalCategorizedProblems$.pipe(r.takeUntil(this.isDestroyed)).subscribe((function(e){t.internalErrors=e.errors[t.pathString]||[]})),this.appGlobalsService.adminMode$.pipe(r.takeUntil(this.isDestroyed)).subscribe((function(e){t.changeDetectorRef.markForCheck()})),this.validate()},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.internalErrors.length>0&&this.problemsService.setInternalProblemsForPath(this.pathString,[])},t.prototype.commitValueChange=function(){var e=this;this.validate(),this.lastCommitedValue=this.value,this.jsonStoreService.setIn(this.path,this.value),this.schema.onValueChange&&setTimeout((function(){return e.schema.onValueChange(e.path,e.value,e.jsonStoreService,e.keysStoreService)}))},t.prototype.onBlur=function(){this.domUtilService.clearHighlight(),this.value!==this.lastCommitedValue&&this.commitValueChange()},t.prototype.onKeypress=function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),document.activeElement.blur())},t.prototype.onValueChange=function(e){this.value=e},t.prototype.onSearchableDropdownSelect=function(e){this.onValueChange(e),this.commitValueChange()},t.prototype.onCompletionSelect=function(e){this.commitValueChange();var t=this.schema.autocompletionConfig.onCompletionSelect;t&&t(this.path,e,this.jsonStoreService,this.keysStoreService)},Object.defineProperty(t.prototype,"tabIndex",{get:function(){return this.disabled?-1:1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tooltipPosition",{get:function(){return this.pathString.startsWith(this.appGlobalsService.firstElementPathForCurrentTab)?"bottom":"top"},enumerable:!1,configurable:!0}),t.prototype.hasErrors=function(){return e.prototype.hasErrors.call(this)||this.internalErrors.length>0},Object.defineProperty(t.prototype,"errorClass",{get:function(){return!this.replaceJsonPatches[0]&&this.hasErrors()?"error":""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPathToAnIndex",{get:function(){return"number"==typeof this.path[this.path.length-1]},enumerable:!1,configurable:!0}),t.prototype.validate=function(){null!=this.value&&""!==this.value&&0===this.externalErrors.length&&(this.internalErrors=this.schemaValidationService.validateValue(this.value,this.schema),this.problemsService.setInternalProblemsForPath(this.pathString,this.internalErrors))},t}(Be);function zn(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelement(1,"primitive-field",2),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("value",r.ref)("schema",r.schema.properties.$ref)("path",r.refPath)}}function Kn(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"button",4),t.ɵɵlistener("click",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(3).onPreviewClick(e)})),t.ɵɵelement(1,"i",5),t.ɵɵelementEnd()}}function Ln(e,t){}$n.ɵfac=function(e){return new(e||$n)(t.ɵɵdirectiveInject(Y),t.ɵɵdirectiveInject(A),t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(te),t.ɵɵdirectiveInject(q),t.ɵɵdirectiveInject(J),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(U),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},$n.ɵcmp=t.ɵɵdefineComponent({type:$n,selectors:[["primitive-field"]],inputs:{schema:"schema",path:"path",value:"value"},features:[t.ɵɵInheritDefinitionFeature],decls:14,vars:9,consts:[[3,"id","ngClass"],[1,"primitive-field-container",3,"ngSwitch"],[3,"ngClass"],["errorsTooltipTemplate",""],["class","value-container","container","body",3,"disabled","tooltip","isDisabled","placement",4,"ngIf","ngIfElse"],[1,"link-button-container"],["class","no-decoration","target","_blank",3,"href",4,"ngIf"],[4,"ngIf"],["patchTemplate",""],["mergePopover",""],[1,"tooltip-left-align"],[4,"ngFor","ngForOf"],["container","body",1,"value-container",3,"tooltip","isDisabled","placement"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"pathString","value","disabled","tabIndex","latexPreviewEnabled","placeholder","valueChange","blur","onKeypress"],[3,"pathString","value","placeholder","items","shortcutMap","displayValueMap","tabIndex","onSelect","onBlur"],[3,"pathString","value","autocompletionConfig","placeholder","tabIndex","onBlur","onKeypress","onValueChange","onCompletionSelect"],["type","number",3,"ngModel","tabindex","placeholder","ngModelChange","blur","keypress"],["type","checkbox",3,"ngModel","placeholder","ngModelChange"],["target","_blank",1,"no-decoration",3,"href"],["aria-hidden","true",1,"fa","fa-link"],[3,"patch"],["type","button","popoverTitle","Merge","container","body",1,"btn","btn-default","btn-merge","orange-left-border",3,"popover","popoverContext"],[1,"fa","fa-bolt"],[3,"currentText","newText"],[3,"patch","addActionEnabled"]],template:function(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"table",1),t.ɵɵelementStart(2,"tr",2),t.ɵɵtemplate(3,jn,3,2,"ng-template",null,3,t.ɵɵtemplateRefExtractor),t.ɵɵtemplate(5,Nn,7,10,"td",4),t.ɵɵelementStart(6,"td",5),t.ɵɵtemplate(7,Bn,2,1,"a",6),t.ɵɵtemplate(8,Vn,2,1,"a",6),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(9,An,2,1,"tr",7),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(10,Rn,3,6,"ng-template",null,8,t.ɵɵtemplateRefExtractor),t.ɵɵtemplate(12,Un,2,4,"ng-template",null,9,t.ɵɵtemplateRefExtractor)),2&e){var r=t.ɵɵreference(11);t.ɵɵproperty("id",n.pathString)("ngClass",n.redLeftBorderClass),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitch",n.schema.componentType),t.ɵɵadvance(1),t.ɵɵproperty("ngClass",n.errorClass),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",!n.replaceJsonPatches[0])("ngIfElse",r),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",n.schema.linkBuilder),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.schema.linkBuilder&&"url"===n.schema.format),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.removeJsonPatch)}},directives:[u.NgClass,u.NgSwitch,u.NgIf,u.NgForOf,v.TooltipDirective,u.NgSwitchCase,u.NgSwitchDefault,ln,gn,Cn,g.NumberValueAccessor,g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,g.CheckboxControlValueAccessor,He,w.PopoverDirective,Pn],styles:["td.value-container input,td.value-container span[contenteditable=true]{background-color:transparent;border:none;display:inline-block;transition:all .5s ease;vertical-align:middle;width:100%}table.primitive-field-container{width:100%}td.link-button-container{width:22px}td.value-container{padding:3px 3px 3px 6px!important;width:100%}td.value-container:hover{background-color:#ffa!important}a.no-decoration{text-decoration:none}[contenteditable=true]{min-height:18px;word-break:break-word}[contenteditable=true]:empty:before{color:#a9a9a9;content:attr(placeholder);display:block}.tooltip-left-align{margin-left:12px;padding:0}.btn-merge{background:transparent;border:none;text-align:left;white-space:normal;width:100%}.orange-left-border{border-left:9px solid #e67e22;border-radius:0}.fa-bolt{color:#e67e22}"],encapsulation:2,changeDetection:0});var Hn=function(e){return{response:e}};function Jn(e,n){if(1&e&&t.ɵɵtemplate(0,Ln,0,0,"ng-template",7),2&e){var r=t.ɵɵnextContext(4);t.ɵɵproperty("ngTemplateOutlet",r.customTemplate)("ngTemplateOutletContext",t.ɵɵpureFunction1(2,Hn,r.refData))}}function qn(e,n){1&e&&t.ɵɵelement(0,"i",8)}function Gn(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,Jn,1,4,void 0,1),t.ɵɵtemplate(2,qn,1,0,"i",6),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.refData),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!r.refData)}}function Wn(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,Kn,2,0,"button",3),t.ɵɵtemplate(2,Gn,3,2,"div",1),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!r.shouldDisplayTemplate),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.shouldDisplayTemplate)}}function Qn(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"a",9),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("href",r.anchorHref,t.ɵɵsanitizeUrl),t.ɵɵadvance(1),t.ɵɵtextInterpolate(r.anchorDisplay)}}function Xn(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,Wn,3,2,"div",1),t.ɵɵtemplate(2,Qn,3,2,"div",1),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",r.isTemplateEnabled),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!r.isTemplateEnabled)}}var Yn=function(){function e(e,t,n,r){this.http=e,this.changeDetectorRef=t,this.appGlobalsService=n,this.pathUtilService=r,this.isPreviewButtonHidden=!1}return e.prototype.ngOnChanges=function(e){if(this.refConfig){var t=e.value,n=e.schema;t&&this.refConfig&&this.refConfig.anchorBuilder&&this.ref&&(this.anchorAttributes=this.refConfig.anchorBuilder(this.ref)),n&&n.isFirstChange()&&(this.requestOptions=this.createRequestOptionsWithConfig()),t&&this.isTemplateEnabled&&(this.refConfig.lazy?this.isPreviewButtonHidden=!1:this.fetchRef())}e.path&&(this.pathString=this.pathUtilService.toPathString(this.path),this.refPath=this.path.concat("$ref"))},e.prototype.onPreviewClick=function(){this.isPreviewButtonHidden=!0,this.fetchRef()},Object.defineProperty(e.prototype,"customTemplate",{get:function(){return this.appGlobalsService.templates[this.refConfig.templateName]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"refConfig",{get:function(){return this.schema.refFieldConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return this.value.get("$ref")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchorHref",{get:function(){return this.anchorAttributes?this.anchorAttributes.href:this.ref},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchorDisplay",{get:function(){return this.anchorAttributes?this.anchorAttributes.display:this.ref},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTemplateEnabled",{get:function(){return void 0!==this.refConfig&&void 0!==this.refConfig.templateName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldDisplayTemplate",{get:function(){return this.isPreviewButtonHidden||!this.refConfig.lazy},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shouldDisplayInputField",{get:function(){return void 0!==this.refConfig&&this.refConfig.displayInputField},enumerable:!1,configurable:!0}),e.prototype.fetchRef=function(){var e=this;this.refData=void 0,this.http.get(this.ref,this.requestOptions).pipe(r.map((function(e){return e.json()}))).subscribe((function(t){e.refData=t,e.changeDetectorRef.markForCheck()}))},e.prototype.createRequestOptionsWithConfig=function(){var e=new Headers;return this.refConfig.headers&&this.refConfig.headers.forEach((function(t){return e.append(t.name,t.value)})),{headers:e}},e}();function Zn(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelement(1,"table-list-field",3),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("values",r.value)("schema",r.schema)("path",r.path)}}function er(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelement(1,"complex-list-field",3),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("values",r.value)("schema",r.schema)("path",r.path)}}function tr(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelement(1,"primitive-list-field",3),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("values",r.value)("schema",r.schema)("path",r.path)}}function nr(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelement(1,"object-field",4),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("value",r.value)("schema",r.schema)("path",r.path)}}function rr(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelement(1,"ref-field",4),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("value",r.value)("schema",r.schema)("path",r.path)}}function ir(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelement(1,"primitive-field",4),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("value",r.value)("schema",r.schema)("path",r.path)}}Yn.ɵfac=function(e){return new(e||Yn)(t.ɵɵdirectiveInject(a.HttpClient),t.ɵɵdirectiveInject(t.ChangeDetectorRef),t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(B))},Yn.ɵcmp=t.ɵɵdefineComponent({type:Yn,selectors:[["ref-field"]],inputs:{schema:"schema",value:"value",path:"path"},features:[t.ɵɵNgOnChangesFeature],decls:3,vars:3,consts:[[3,"id"],[4,"ngIf"],[3,"value","schema","path"],["class","btn-preview-template",3,"click",4,"ngIf"],[1,"btn-preview-template",3,"click"],[1,"fa","fa-eye"],["class","fa fa-spinner fa-spin align-center",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"fa","fa-spinner","fa-spin","align-center"],["target","_blank",1,"break-word",3,"href"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,zn,2,3,"div",1),t.ɵɵtemplate(2,Xn,3,2,"div",1),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("id",n.pathString),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.shouldDisplayInputField),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.ref))},directives:[u.NgIf,$n,u.NgTemplateOutlet],styles:["button.btn-preview-template[_ngcontent-%COMP%]{background:transparent;border:0;height:100%;width:100%}.align-center[_ngcontent-%COMP%]{text-align:center;width:100%}.break-word[_ngcontent-%COMP%]{word-break:break-word}"],changeDetection:0});var or=function(){};or.ɵfac=function(e){return new(e||or)},or.ɵcmp=t.ɵɵdefineComponent({type:or,selectors:[["any-type-field"]],inputs:{schema:"schema",path:"path",value:"value"},decls:7,vars:6,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"values","schema","path"],[3,"value","schema","path"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,Zn,2,3,"div",1),t.ɵɵtemplate(2,er,2,3,"div",1),t.ɵɵtemplate(3,tr,2,3,"div",1),t.ɵɵtemplate(4,nr,2,3,"div",1),t.ɵɵtemplate(5,rr,2,3,"div",1),t.ɵɵtemplate(6,ir,2,3,"div",2),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("ngSwitch",n.schema.componentType),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","table-list"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","complex-list"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","primitive-list"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","object"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","ref"))},directives:[u.NgSwitch,u.NgSwitchCase,u.NgSwitchDefault,wt,Zt,an,Tt,Yn,$n],styles:[""],changeDetection:0});var ar=function(){function e(e,t,n,r,i){this.domUtilService=e,this.emptyValueService=t,this.jsonStoreService=n,this.pathUtilService=r,this.keyStoreService=i}return e.prototype.addNewElement=function(){var e=this,t=this.schema.items,n=this.emptyValueService.generateEmptyValue(t),r=this.jsonStoreService.getIn(this.path),i=r?r.size:0,o=this.path.concat(i);this.jsonStoreService.addIn(o,n);var a=this.pathUtilService.toPathString(o);setTimeout((function(){e.domUtilService.focusAndSelectFirstEditableChildById(a)}))},e}();ar.ɵfac=function(e){return new(e||ar)(t.ɵɵdirectiveInject(U),t.ɵɵdirectiveInject($),t.ɵɵdirectiveInject(q),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(J))},ar.ɵcmp=t.ɵɵdefineComponent({type:ar,selectors:[["add-new-element-button"]],inputs:{path:"path",schema:"schema"},decls:3,vars:2,consts:[[1,"button-container"],["type","button",1,"btn-new-field",3,"click"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"button",1),t.ɵɵlistener("click",(function(){return n.addNewElement()})),t.ɵɵtext(2,"Add new"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&t.ɵɵclassProp("disabled",n.schema.disabled)},styles:["div.button-container[_ngcontent-%COMP%]{display:inline-block;width:100%}.btn-new-field[_ngcontent-%COMP%]{background:transparent;border:0;bottom:-5px;font-size:13px;font-weight:700;left:-5px;opacity:.5;padding:0;text-shadow:0 1px 0 #fff}.btn-new-field[_ngcontent-%COMP%]:hover{color:green!important;opacity:.6}"],changeDetection:0});var cr=function(){function e(e){this.emptyValueService=e}return e.prototype.transform=function(e,t){return e||this.emptyValueService.generateEmptyValue(t)},e}();cr.ɵfac=function(e){return new(e||cr)(t.ɵɵdirectiveInject($))},cr.ɵpipe=t.ɵɵdefinePipe({name:"selfOrEmpty",type:cr,pure:!0});var sr=function(){function e(e,t){this.appGlobalsService=e,this.pathUtilService=t}return e.prototype.transform=function(e,t){return this.appGlobalsService.tabNameToFirstTopLevelElement[t]=""+this.pathUtilService.separator+e.first(),e},e}();function lr(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"td"),t.ɵɵelementStart(1,"slide-toggle",7),t.ɵɵlistener("valueChange",(function(e){t.ɵɵrestoreView(r);var i=n.$implicit;return t.ɵɵnextContext(2).onToggleValueChange(i,e)})),t.ɵɵpipe(2,"selfOrEmpty"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,o=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("id","/"+i)("value",t.ɵɵpipeBind2(2,5,o.value.get(i),o.schema.properties[i]))("onText",i)("offText",i)("onColor",o.schema.properties[i].toggleColor)}}function pr(e,n){if(1&e&&(t.ɵɵelementStart(0,"tr",5),t.ɵɵtemplate(1,lr,3,8,"td",6),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",r.keysByType.toggles)("ngForTrackBy",r.trackByElement)}}function dr(e,n){if(1&e&&(t.ɵɵelementStart(0,"li",12),t.ɵɵelement(1,"add-new-element-button",16),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("path",i.getPathForChild(r))("schema",i.schema.properties[r])}}function ur(e,t){}function hr(e,n){if(1&e&&(t.ɵɵelementStart(0,"li",19),t.ɵɵtemplate(1,ur,0,0,"ng-template",20),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext(4);t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",i.appGlobalsService.templates[r])}}function fr(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,hr,2,1,"li",18),t.ɵɵelementContainerEnd()),2&e){var r=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",i.getTitleDropdownItemTemplateNamesForChild(r))}}function mr(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",2),t.ɵɵelementStart(1,"tr"),t.ɵɵelementStart(2,"td",9),t.ɵɵelementStart(3,"title-dropdown",10),t.ɵɵpipe(4,"underscoreToSpace"),t.ɵɵtemplate(5,dr,2,2,"li",11),t.ɵɵelementStart(6,"li",12),t.ɵɵelementStart(7,"button",13),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=n.$implicit;return t.ɵɵnextContext(2).deleteField(e)})),t.ɵɵtext(8,"Delete"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(9,fr,2,1,"ng-container",4),t.ɵɵelement(10,"li",14),t.ɵɵelementStart(11,"li",15),t.ɵɵlistener("click",(function(e){return t.ɵɵrestoreView(r),e.stopPropagation()})),t.ɵɵelement(12,"find-replace",16),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"tr"),t.ɵɵelementStart(14,"td"),t.ɵɵelement(15,"any-type-field",17),t.ɵɵpipe(16,"selfOrEmpty"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,o=t.ɵɵnextContext(2);t.ɵɵadvance(3),t.ɵɵproperty("title",t.ɵɵpipeBind1(4,9,i))("isDisabled",o.isDisabled(i)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf","array"===o.schema.properties[i].type),t.ɵɵadvance(4),t.ɵɵproperty("ngIf",o.getTitleDropdownItemTemplateNamesForChild(i)),t.ɵɵadvance(3),t.ɵɵproperty("path",o.getPathForChild(i))("schema",o.schema.properties[i]),t.ɵɵadvance(3),t.ɵɵproperty("value",t.ɵɵpipeBind2(16,11,o.value.get(i),o.schema.properties[i]))("schema",o.schema.properties[i])("path",o.getPathForChild(i))}}function gr(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,mr,17,14,"div",8),t.ɵɵpipe(2,"setFirstElementPath"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind2(2,2,r.keysByType.others,r.tabName))("ngForTrackBy",r.trackByElement)}}sr.ɵfac=function(e){return new(e||sr)(t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(B))},sr.ɵpipe=t.ɵɵdefinePipe({name:"setFirstElementPath",type:sr,pure:!0});var vr=function(){function e(e,t,n,r){this.jsonStoreService=e,this.appGlobalsService=t,this.tabsUtilService=n,this.keysStoreService=r,this.pathCache={}}return e.prototype.ngOnChanges=function(e){var t=this;if(e.keys){var n=void 0;if(this.tabName){var r=this.tabsUtilService.getSchemaKeyToTabName(this.appGlobalsService.config.tabsConfig,this.schema);n=this.keys.filter((function(e){return r[e]===t.tabName}))}else n=this.keys;this.keysByType=n.groupBy((function(e){return t.isToggle(e)?"toggles":"others"})).toObject()}},e.prototype.deleteField=function(e){this.jsonStoreService.removeIn(this.getPathForChild(e))},e.prototype.getPathForChild=function(e){return this.pathCache[e]||(this.pathCache[e]=[e]),this.pathCache[e]},e.prototype.onToggleValueChange=function(e,t){this.jsonStoreService.setIn(this.getPathForChild(e),t)},e.prototype.isToggle=function(e){return void 0!==this.schema.properties[e].toggleColor},e.prototype.isDisabled=function(e){return this.schema.properties[e].disabled&&!this.appGlobalsService.adminMode},e.prototype.trackByElement=function(e,t){return t},e.prototype.getTitleDropdownItemTemplateNamesForChild=function(e){return this.schema.properties[e].titleDropdownItemTemplateNames},e}();vr.ɵfac=function(e){return new(e||vr)(t.ɵɵdirectiveInject(q),t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(_),t.ɵɵdirectiveInject(J))},vr.ɵcmp=t.ɵɵdefineComponent({type:vr,selectors:[["sub-record"]],inputs:{value:"value",schema:"schema",tabName:"tabName",keys:"keys",pathString:"pathString"},features:[t.ɵɵNgOnChangesFeature],decls:5,vars:2,consts:[[1,"record-fields-container"],[1,"table"],[1,"field-wrapper"],["class","align-right",4,"ngIf"],[4,"ngIf"],[1,"align-right"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","value","onText","offText","onColor","valueChange"],["class","field-wrapper",4,"ngFor","ngForOf","ngForTrackBy"],[1,"label-holder"],[3,"title","isDisabled"],["class","title-dropdown-item",4,"ngIf"],[1,"title-dropdown-item"],["type","button",1,"editor-btn-delete","editor-btn-delete-text",3,"click"],[1,"divider"],[1,"title-dropdown-item",3,"click"],[3,"path","schema"],[3,"value","schema","path"],["class","title-dropdown-item custom-title-dropdown-item",4,"ngFor","ngForOf"],[1,"title-dropdown-item","custom-title-dropdown-item"],[3,"ngTemplateOutlet"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"table",1),t.ɵɵelementStart(2,"div",2),t.ɵɵtemplate(3,pr,2,2,"tr",3),t.ɵɵelementEnd(),t.ɵɵtemplate(4,gr,3,5,"div",4),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(3),t.ɵɵproperty("ngIf",n.keysByType.toggles),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.keysByType.others))},directives:[u.NgIf,u.NgForOf,Te,Ne,or,ar,u.NgTemplateOutlet],pipes:[cr,sr,mt],styles:["tr.align-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:100%}tr.align-right[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   slide-toggle[_ngcontent-%COMP%]{float:right}"],changeDetection:0});var yr=function(){function e(e){this.domSanitizer=e}return e.prototype.transform=function(e){return this.domSanitizer.bypassSecurityTrustResourceUrl(e)},e}();yr.ɵfac=function(e){return new(e||yr)(t.ɵɵdirectiveInject(b.DomSanitizer))},yr.ɵpipe=t.ɵɵdefinePipe({name:"sanitizeUrl",type:yr,pure:!0});var br=function(){};function Sr(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",7),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext(2).$implicit;return t.ɵɵnextContext().openUrlInNewWindow(e.url)})),t.ɵɵelement(1,"i",8),t.ɵɵelementEnd()}}function Cr(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",4),t.ɵɵtemplate(1,Sr,2,0,"ng-template",5),t.ɵɵelement(2,"html-view",6),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext().$implicit;t.ɵɵadvance(2),t.ɵɵproperty("url",r.url)}}function xr(e,n){if(1&e&&(t.ɵɵelementStart(0,"tab",1),t.ɵɵelementStart(1,"div",2),t.ɵɵtemplate(2,Cr,3,1,"div",3),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var r=n.$implicit;t.ɵɵproperty("heading",r.name),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitch",r.type),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","html")}}br.ɵfac=function(e){return new(e||br)},br.ɵcmp=t.ɵɵdefineComponent({type:br,selectors:[["html-view"]],inputs:{url:"url"},decls:2,vars:3,consts:[[1,"fit-parent",3,"data"]],template:function(e,n){1&e&&(t.ɵɵelement(0,"object",0),t.ɵɵpipe(1,"sanitizeUrl")),2&e&&t.ɵɵproperty("data",t.ɵɵpipeBind1(1,1,n.url),t.ɵɵsanitizeResourceUrl)},pipes:[yr],styles:[".fit-parent[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0});var wr=function(){function e(){}return e.prototype.openUrlInNewWindow=function(e){window.open(e,"Preview","left=20,top=20,width=750,height=750")},e.prototype.trackByIndex=function(e,t){return e},e}();function Pr(e,n){if(1&e&&(t.ɵɵelement(0,"i",3),t.ɵɵtext(1),t.ɵɵpipe(2,"titlecase"),t.ɵɵelementStart(3,"span",4),t.ɵɵtext(4),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngClass",r.iconClassName),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,3,r.problemType)," "),t.ɵɵadvance(3),t.ɵɵtextInterpolate(r.problemCount)}}function Er(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"li",6),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext().focusAndSelectPath(e)})),t.ɵɵelement(1,"i",3),t.ɵɵtext(2),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,o=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngClass",o.iconClassName),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",i.message," ")}}function Ir(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,Er,3,2,"li",5),t.ɵɵelementContainerEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",i.internalProblemMap[r])}}function jr(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"li",6),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext().$implicit;return t.ɵɵnextContext().focusAndSelectPath(e)})),t.ɵɵelement(1,"i",3),t.ɵɵtext(2),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,o=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngClass",o.iconClassName),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",i.message," ")}}function kr(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,jr,3,2,"li",5),t.ɵɵelementContainerEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",i.externalProblemMap[r])}}wr.ɵfac=function(e){return new(e||wr)},wr.ɵcmp=t.ɵɵdefineComponent({type:wr,selectors:[["editor-previewer"]],inputs:{previews:"previews"},decls:3,vars:2,consts:[[3,"heading",4,"ngFor","ngForOf","ngForTrackBy"],[3,"heading"],[3,"ngSwitch"],["class","preview-container",4,"ngSwitchCase"],[1,"preview-container"],["tabHeading",""],[3,"url"],[1,"preview-link",3,"click"],[1,"fa","fa-external-link"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"tabset"),t.ɵɵtemplate(2,xr,3,3,"tab",0),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",n.previews)("ngForTrackBy",n.trackByIndex))},directives:[y.TabsetComponent,u.NgForOf,y.TabDirective,u.NgSwitch,u.NgSwitchCase,y.TabHeadingDirective,br],styles:["div.preview-container[_ngcontent-%COMP%]{height:95vh;width:100%}span.preview-link[_ngcontent-%COMP%]{color:#337ab7;cursor:pointer}span.preview-link[_ngcontent-%COMP%]:hover{color:#6495ed}"],changeDetection:0});var Or=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.domUtilService=t,o.pathUtilService=n,o.problemsService=r,o.changeDetectorRef=i,o.problemCount=0,o}return M(t,e),t.prototype.ngOnInit=function(){var e=this;this.problemsService.externalCategorizedProblems$.pipe(r.map((function(t){return t[e.problemType]}))).pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.externalProblemMap=t,e.changeDetectorRef.markForCheck()})),this.problemsService.internalCategorizedProblems$.pipe(r.map((function(t){return t[e.problemType]}))).pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.internalProblemMap=t,e.changeDetectorRef.markForCheck()})),("errors"===this.problemType?this.problemsService.errorCount$:this.problemsService.warningCount$).pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.problemCount=t})),this.iconClassName="errors"===this.problemType?"fa fa-times":"fa fa-exclamation-triangle"},t.prototype.focusAndSelectPath=function(e){this.domUtilService.focusAndSelectFirstEditableChildById(e,!0)},t}(T);function Mr(e,n){if(1&e&&(t.ɵɵelement(0,"i",4),t.ɵɵtext(1," Conflicts "),t.ɵɵelementStart(2,"span",5),t.ɵɵtext(3),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(3),t.ɵɵtextInterpolate(r.patches.length)}}function Dr(e,t){}function Fr(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",6),t.ɵɵtemplate(1,Dr,0,0,"ng-template",7),t.ɵɵelementStart(2,"button",8),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext().acceptAll()})),t.ɵɵtext(3,"Accept All"),t.ɵɵelement(4,"i",9),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"button",10),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext().rejectAll()})),t.ɵɵtext(6,"Reject All"),t.ɵɵelement(7,"i",11),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",i.customHeaderTemplate)}}function Tr(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"span",15),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext().$implicit,n=t.ɵɵnextContext();return n.focusPatch(n.patchesByPath[e][0])})),t.ɵɵelement(1,"i",4),t.ɵɵtext(2),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext().$implicit,o=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate2(" ",o.patchesByPath[i][0].path," - ",o.patchesByPath[i][0].op," ")}}function Nr(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"li",20),t.ɵɵelementStart(1,"span",15),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=n.$implicit;return t.ɵɵnextContext(3).focusPatch(e)})),t.ɵɵelement(2,"i",4),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit;t.ɵɵadvance(3),t.ɵɵtextInterpolate2(" ",i.path," - ",i.op," ")}}function Br(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"span",15),t.ɵɵlistener("click",(function(){return t.ɵɵrestoreView(r),t.ɵɵreference(5).toggle()})),t.ɵɵelement(2,"i",16),t.ɵɵtext(3),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"ul",17,18),t.ɵɵtemplate(6,Nr,4,2,"li",19),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()}if(2&e){var i=t.ɵɵnextContext().$implicit,o=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵattribute("aria-controls",i+"-collapse"),t.ɵɵadvance(2),t.ɵɵtextInterpolate2(" ",i," (",o.patchesByPath[i].length,") "),t.ɵɵadvance(1),t.ɵɵproperty("collapse",!0),t.ɵɵattribute("id",i+"-collapse"),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",o.patchesByPath[i])}}function Vr(e,n){if(1&e&&(t.ɵɵelementStart(0,"li",12),t.ɵɵtemplate(1,Tr,3,2,"span",13),t.ɵɵtemplate(2,Br,7,6,"ng-container",14),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngIf",1===i.patchesByPath[r].length),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.patchesByPath[r].length>1)}}Or.ɵfac=function(e){return new(e||Or)(t.ɵɵdirectiveInject(U),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(te),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},Or.ɵcmp=t.ɵɵdefineComponent({type:Or,selectors:[["problems-console-tab"]],inputs:{problemType:"problemType"},features:[t.ɵɵInheritDefinitionFeature],decls:6,vars:6,consts:[["tabHeading",""],[1,"list-group"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"badge"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",3,"click"]],template:function(e,n){1&e&&(t.ɵɵtemplate(0,Pr,5,5,"ng-template",0),t.ɵɵelementStart(1,"ul",1),t.ɵɵtemplate(2,Ir,2,1,"ng-container",2),t.ɵɵpipe(3,"keys"),t.ɵɵtemplate(4,kr,2,1,"ng-container",2),t.ɵɵpipe(5,"keys"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(3,2,n.internalProblemMap)),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(5,4,n.externalProblemMap)))},directives:[y.TabHeadingDirective,u.NgForOf,u.NgClass],pipes:[Ge,u.TitleCasePipe],styles:[".list-group-item[_ngcontent-%COMP%]:hover{background-color:#faebcc}.list-group-item[_ngcontent-%COMP%]:hover > .title[_ngcontent-%COMP%]{text-decoration:underline}.list-group-item[_ngcontent-%COMP%]:hover.nested{background-color:#e2dcd1}.list-group-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#0074d9;cursor:pointer}",".fa-exclamation-triangle[_ngcontent-%COMP%]{color:#f1c40f}.fa-times[_ngcontent-%COMP%]{color:#d14024}"],changeDetection:0});var Ar=function(e){function t(t,n,r,i,o){var a=e.call(this)||this;return a.domUtilService=t,a.appGlobalsService=n,a.pathUtilService=r,a.jsonStoreService=i,a.changeDetectorRef=o,a.patchesByPath={},a}return M(t,e),t.prototype.ngOnInit=function(){var e=this;this.jsonStoreService.patchesByPath$.pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.patchesByPath=t,e.changeDetectorRef.markForCheck()}))},t.prototype.focusPatch=function(e){this.domUtilService.focusPatch(e)},Object.defineProperty(t.prototype,"patches",{get:function(){var e=this;return Object.keys(this.patchesByPath).reduce((function(t,n){return t.concat(e.patchesByPath[n])}),[])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customHeaderTemplate",{get:function(){return this.appGlobalsService.templates.patchesHeaderTemplate},enumerable:!1,configurable:!0}),t.prototype.acceptAll=function(){var e=this;this.patches.forEach((function(t){return e.jsonStoreService.applyPatch(t)}))},t.prototype.rejectAll=function(){var e=this;this.patches.forEach((function(t){return e.jsonStoreService.rejectPatch(t)}))},t}(T);function _r(e,n){1&e&&t.ɵɵelement(0,"i",6)}function Rr(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",1),t.ɵɵelementStart(1,"tabset"),t.ɵɵelementStart(2,"tab",2),t.ɵɵelement(3,"problems-console-tab",3),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"tab",2),t.ɵɵelement(5,"problems-console-tab",3),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"tab",2),t.ɵɵelement(7,"patches-console-tab"),t.ɵɵelementEnd(),t.ɵɵelementStart(8,"tab",4),t.ɵɵlistener("select",(function(){return t.ɵɵrestoreView(r),t.ɵɵnextContext().closePanel()})),t.ɵɵtemplate(9,_r,1,0,"ng-template",5),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵproperty("active",i.isActive("Errors")),t.ɵɵadvance(1),t.ɵɵproperty("problemType","errors"),t.ɵɵadvance(1),t.ɵɵproperty("active",i.isActive("Warnings")),t.ɵɵadvance(1),t.ɵɵproperty("problemType","warnings"),t.ɵɵadvance(1),t.ɵɵproperty("active",i.isActive("Patches")),t.ɵɵadvance(2),t.ɵɵproperty("customClass","pull-right")}}Ar.ɵfac=function(e){return new(e||Ar)(t.ɵɵdirectiveInject(U),t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(q),t.ɵɵdirectiveInject(t.ChangeDetectorRef))},Ar.ɵcmp=t.ɵɵdefineComponent({type:Ar,selectors:[["patches-console-tab"]],features:[t.ɵɵInheritDefinitionFeature],decls:6,vars:6,consts:[["tabHeading",""],["class","header-container",4,"ngIf"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"fa","fa-bolt"],[1,"badge"],[1,"header-container"],[3,"ngTemplateOutlet"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-check","icon-padding-left"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-times","icon-padding-left"],[1,"list-group-item"],["role","button","class","title",3,"click",4,"ngIf"],[4,"ngIf"],["role","button",1,"title",3,"click"],[1,"fa","fa-expand"],[1,"list-group",3,"collapse"],["collapse","bs-collapse"],["class","list-group-item nested",4,"ngFor","ngForOf"],[1,"list-group-item","nested"]],template:function(e,n){1&e&&(t.ɵɵtemplate(0,Mr,4,1,"ng-template",0),t.ɵɵtemplate(1,Fr,8,1,"div",1),t.ɵɵelementStart(2,"ul",2),t.ɵɵtemplate(3,Vr,3,2,"li",3),t.ɵɵpipe(4,"sortAlphabetically"),t.ɵɵpipe(5,"keys"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.patches&&n.patches.length>0),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(4,2,t.ɵɵpipeBind1(5,4,n.patchesByPath))))},directives:[y.TabHeadingDirective,u.NgIf,u.NgForOf,u.NgTemplateOutlet,P.CollapseDirective],pipes:[de,Ge],styles:[".list-group-item[_ngcontent-%COMP%]:hover{background-color:#faebcc}.list-group-item[_ngcontent-%COMP%]:hover > .title[_ngcontent-%COMP%]{text-decoration:underline}.list-group-item[_ngcontent-%COMP%]:hover.nested{background-color:#e2dcd1}.list-group-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#0074d9;cursor:pointer}",".fa-bolt[_ngcontent-%COMP%]{color:#e67e22}.icon-padding-left[_ngcontent-%COMP%]{padding-left:8px}.header-container[_ngcontent-%COMP%]{padding:8px}.header-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px}"],changeDetection:0});var Ur=function(){function e(){this.isOpen=!1,this.activeTab="",this.onCollapse=new t.EventEmitter}return e.prototype.closePanel=function(){this.onCollapse.emit(!1)},e.prototype.isActive=function(e){return e===this.activeTab},e}();function $r(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",9),t.ɵɵelementStart(1,"add-field-dropdown",10),t.ɵɵpipe(2,"async"),t.ɵɵelement(3,"i",11),t.ɵɵelementEnd(),t.ɵɵelementStart(4,"span",12),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext();return e.isPreviewerHidden=!e.isPreviewerHidden})),t.ɵɵelement(5,"i",13),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"bottom-console-badges",14),t.ɵɵlistener("badgeClick",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext().openBottomConsole(e)})),t.ɵɵelementEnd(),t.ɵɵelementStart(7,"span",15),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=t.ɵɵnextContext();return e.isSidebarCollapsed=!e.isSidebarCollapsed})),t.ɵɵelement(8,"i",16),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("fields",t.ɵɵpipeBind1(2,7,i.keys$))("pathString",i.pathString)("schema",i.fixedSchema),t.ɵɵadvance(3),t.ɵɵpropertyInterpolate("tooltip",i.isPreviewerHidden?"Show Preview":"Hide Preview"),t.ɵɵadvance(1),t.ɵɵproperty("ngClass",i.isPreviewerHidden?"fa-eye":"fa-eye-slash"),t.ɵɵadvance(3),t.ɵɵclassProp("rotate",!i.isSidebarCollapsed)}}function zr(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",20),t.ɵɵelementStart(1,"input",21),t.ɵɵlistener("ngModelChange",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext(2).appGlobalsService.adminMode=e})),t.ɵɵelementEnd(),t.ɵɵelementStart(2,"label",22),t.ɵɵtext(3,"Enable Admin Mode"),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngModel",i.appGlobalsService.adminMode)}}function Kr(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",17),t.ɵɵelement(1,"tree-menu",18),t.ɵɵelement(2,"hr"),t.ɵɵtemplate(3,zr,4,1,"div",19),t.ɵɵelement(4,"hr"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngClass",r.isSidebarCollapsed?"close":"open"),t.ɵɵadvance(1),t.ɵɵproperty("record",r._record)("schema",r.fixedSchema),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",r.config.enableAdminModeSwitch)}}function Lr(e,n){if(1&e&&(t.ɵɵelementStart(0,"add-field-dropdown",23),t.ɵɵpipe(1,"async"),t.ɵɵtext(2,"Add field"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("fields",t.ɵɵpipeBind1(1,3,r.keys$))("pathString",r.pathString)("schema",r.fixedSchema)}}function Hr(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"tab",25),t.ɵɵlistener("select",(function(){t.ɵɵrestoreView(r);var e=n.$implicit;return t.ɵɵnextContext(2).activeTabName=e})),t.ɵɵelement(1,"sub-record",26),t.ɵɵpipe(2,"async"),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,o=t.ɵɵnextContext(2);t.ɵɵproperty("heading",i)("active",o.isActiveTab(i)),t.ɵɵadvance(1),t.ɵɵproperty("value",o._record)("tabName",i)("schema",o.fixedSchema)("keys",t.ɵɵpipeBind1(2,7,o.keys$))("pathString",o.pathString)}}function Jr(e,n){if(1&e&&(t.ɵɵelementStart(0,"tabset"),t.ɵɵtemplate(1,Hr,3,9,"tab",24),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",r.tabNames)("ngForTrackBy",r.trackByElement)}}function qr(e,n){if(1&e&&(t.ɵɵelement(0,"sub-record",27),t.ɵɵpipe(1,"async")),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("value",r._record)("schema",r.fixedSchema)("keys",t.ɵɵpipeBind1(1,4,r.keys$))("pathString",r.pathString)}}function Gr(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",28),t.ɵɵelement(1,"editor-previewer",29),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵproperty("ngClass",r.isPreviewerHidden?"minimizePreview":"maximizePreview"),t.ɵɵadvance(1),t.ɵɵproperty("hidden",r.isPreviewerHidden)("previews",r.previews)}}function Wr(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"bottom-console",30),t.ɵɵlistener("onCollapse",(function(e){return t.ɵɵrestoreView(r),t.ɵɵnextContext().isBottomConsoleOpen=e})),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext();t.ɵɵproperty("activeTab",i.bottomConsoleActiveTab)("isOpen",i.isBottomConsoleOpen)}}Ur.ɵfac=function(e){return new(e||Ur)},Ur.ɵcmp=t.ɵɵdefineComponent({type:Ur,selectors:[["bottom-console"]],inputs:{isOpen:"isOpen",activeTab:"activeTab"},outputs:{onCollapse:"onCollapse"},decls:1,vars:1,consts:[["class","bottom-console-container",4,"ngIf"],[1,"bottom-console-container"],[3,"active"],[3,"problemType"],[3,"customClass","select"],["tabHeading",""],[1,"fa","fa-window-close"]],template:function(e,n){1&e&&t.ɵɵtemplate(0,Rr,10,6,"div",0),2&e&&t.ɵɵproperty("ngIf",n.isOpen)},directives:[u.NgIf,y.TabsetComponent,y.TabDirective,Or,Ar,y.TabHeadingDirective],styles:[""],changeDetection:0});var Qr=function(e,t){return{maximizeEditor:e,compact:t}},Xr=function(e){function i(n,r,i,o,a,c,s,l,p,d){var u=e.call(this)||this;return u.appGlobalsService=n,u.problemsService=r,u.jsonStoreService=i,u.jsonUtilService=o,u.jsonSchemaService=a,u.keysStoreService=c,u.recordFixerService=s,u.schemaFixerService=l,u.tabsUtilService=p,u.pathUtilService=d,u.recordChange=new t.EventEmitter,u.jsonPatchesChange=new t.EventEmitter,u.validationProblems=new t.EventEmitter,u.pathString="",u.isBottomConsoleOpen=!1,u.isPreviewerHidden=!1,u.isSidebarCollapsed=!0,u.bottomConsoleActiveTab="",u}return M(i,e),i.prototype.ngOnInit=function(){var e=this;this.isPreviewerHidden=this.config.isPreviewerHiddenOnStart,this.appGlobalsService.adminMode$.pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.keysStoreService.buildKeysMap(e._record,e.fixedSchema)})),this.jsonStoreService.json$.pipe(r.skipWhile((function(t){return t===e._record}))).pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e._record=t,e.lastEmittedRecord=t.toJS(),e.recordChange.emit(e.lastEmittedRecord)})),this.jsonStoreService.jsonPatches$.pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.jsonPatchesChange.emit(t)})),this.problemsService.internalProblemMap$.pipe(r.takeUntil(this.isDestroyed)).subscribe((function(t){e.validationProblems.emit(t)}))},i.prototype.ngOnChanges=function(e){var t=this;e.schema&&!this.schema&&this.throwInputUndefined("schema"),e.record&&!this.record&&this.throwInputUndefined("record"),e.config&&!this.config&&(this.config={},console.warn("[config] is undefined, make sure that is intended."));var r=e.record&&this.record!==this.lastEmittedRecord,i=e.schema||e.config;i&&(this.fixedSchema=this.schemaFixerService.fixSchema(this.schema,this.config.schemaOptions),this.jsonSchemaService.setSchema(this.fixedSchema)),(i||r)&&(this.record=this.recordFixerService.fixRecord(this.record,this.fixedSchema),this.lastEmittedRecord=this.record,this._record=n.fromJS(this.record),this.jsonStoreService.setJson(this._record),this.keysStoreService.buildKeysMap(this._record,this.fixedSchema)),e.config&&(this.appGlobalsService.config=this.config,this.config.tabsConfig&&(this.tabNames=this.tabsUtilService.getTabNames(this.config.tabsConfig),this.tabsUtilService.activeTabName$.subscribe((function(e){t.appGlobalsService.activeTabName=e})),this.appGlobalsService.activeTabName=this.config.tabsConfig.defaultTabName),this.customShortcutKeys=this.config.shortcuts),(r||e.config)&&this.extractPreviews(),e.jsonPatches&&this.jsonPatches&&this.jsonStoreService.setJsonPatches(this.jsonPatches),e.problemMap&&(this.problemsService.externalProblems=this.problemMap),e.templates&&(this.appGlobalsService.templates=this.templates||{})},i.prototype.throwInputUndefined=function(e){throw new Error("["+e+"] is undefined!\n      if you are fetching "+e+' async then please consider using:\n        <json-editor *ngIf="'+e+'" ['+e+']="'+e+'" ...> </json-editor>\n      in order to wait for it to be fetched before initializing json-editor')},i.prototype.extractPreviews=function(){var e=this;this.isPreviewerDisabled||(this.previews=[],this.config.previews.forEach((function(t){var n;if(t.url)n=t.url;else if(t.getUrl)n=t.getUrl(e.record);else{if(!t.urlPath)throw new Error("Either url, urlPath or getUrl should be set for a preview");try{n=e.jsonUtilService.getValueInPath(e.record,t.urlPath)}catch(e){console.warn("Path "+t.urlPath+" in preview config is not present in the input record")}}n&&e.previews.push({name:t.name,type:t.type,url:n})})))},Object.defineProperty(i.prototype,"keys$",{get:function(){return this.keysStoreService.forPath(this.pathString)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isPreviewerDisabled",{get:function(){return void 0===this.config.previews||0===this.config.previews.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeTabName",{set:function(e){this.appGlobalsService.activeTabName=e},enumerable:!1,configurable:!0}),i.prototype.isActiveTab=function(e){return this.appGlobalsService.activeTabName===e},Object.defineProperty(i.prototype,"shorterEditorContainerClass",{get:function(){return this.isBottomConsoleOpen?"shorter-editor-container":""},enumerable:!1,configurable:!0}),i.prototype.openBottomConsole=function(e){this.isBottomConsoleOpen=!0,this.bottomConsoleActiveTab=e},i.prototype.trackByElement=function(e,t){return t},i}(T);Xr.ɵfac=function(e){return new(e||Xr)(t.ɵɵdirectiveInject(N),t.ɵɵdirectiveInject(te),t.ɵɵdirectiveInject(q),t.ɵɵdirectiveInject(G),t.ɵɵdirectiveInject(L),t.ɵɵdirectiveInject(J),t.ɵɵdirectiveInject(Q),t.ɵɵdirectiveInject(X),t.ɵɵdirectiveInject(_),t.ɵɵdirectiveInject(B))},Xr.ɵcmp=t.ɵɵdefineComponent({type:Xr,selectors:[["json-editor"]],inputs:{config:"config",record:"record",schema:"schema",problemMap:"problemMap",jsonPatches:"jsonPatches",templates:"templates"},outputs:{recordChange:"recordChange",jsonPatchesChange:"jsonPatchesChange",validationProblems:"validationProblems"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:10,vars:13,consts:[["id","ng2-json-editor",1,"editor-container",3,"ngClass"],["class","collapsed-menu-container",4,"ngIf"],["class","menu-container",3,"ngClass",4,"ngIf"],["id","middle-main-container",1,"middle","main-container",3,"shortcuts","ngClass"],[3,"fields","pathString","schema",4,"ngIf"],[4,"ngIf"],[3,"value","schema","keys","pathString",4,"ngIf"],["id","right-main-container","class","main-container right",3,"ngClass",4,"ngIf"],[3,"activeTab","isOpen","onCollapse",4,"ngIf"],[1,"collapsed-menu-container"],[1,"add-field-button",3,"fields","pathString","schema"],["tooltip","Add Field","placement","right",1,"fa","fa-plus","fa-2x"],["id","preview-toggle-icon","placement","right",1,"preview-icon",3,"tooltip","click"],[1,"fa","fa-1x",3,"ngClass"],[3,"badgeClick"],[1,"open-sidebar-container",3,"click"],[1,"fa","fa-angle-right","fa-4x"],[1,"menu-container",3,"ngClass"],[3,"record","schema"],["class","admin-mode","tooltip","Allows editing all fields (use with care)",4,"ngIf"],["tooltip","Allows editing all fields (use with care)",1,"admin-mode"],["id","admin-mode-checkbox","type","checkbox",3,"ngModel","ngModelChange"],["for","admin-mode-checkbox",1,"admin-mode"],[3,"fields","pathString","schema"],[3,"heading","active","select",4,"ngFor","ngForOf","ngForTrackBy"],[3,"heading","active","select"],[3,"value","tabName","schema","keys","pathString"],[3,"value","schema","keys","pathString"],["id","right-main-container",1,"main-container","right",3,"ngClass"],[3,"hidden","previews"],[3,"activeTab","isOpen","onCollapse"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,$r,9,9,"div",1),t.ɵɵtemplate(2,Kr,5,4,"div",2),t.ɵɵelementStart(3,"div",3),t.ɵɵtemplate(4,Lr,3,5,"add-field-dropdown",4),t.ɵɵtemplate(5,Jr,2,2,"tabset",5),t.ɵɵtemplate(6,qr,2,6,"sub-record",6),t.ɵɵelementEnd(),t.ɵɵtemplate(7,Gr,2,3,"div",7),t.ɵɵelementEnd(),t.ɵɵtemplate(8,Wr,1,2,"bottom-console",8),t.ɵɵelement(9,"modal-view")),2&e&&(t.ɵɵproperty("ngClass",n.shorterEditorContainerClass),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.config.compact),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.config.compact),t.ɵɵadvance(1),t.ɵɵproperty("shortcuts",n.customShortcutKeys)("ngClass",t.ɵɵpureFunction2(10,Qr,n.isPreviewerHidden,n.config.compact)),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.config.compact),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.config.tabsConfig),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.config.tabsConfig),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.isPreviewerDisabled),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!n.config.compact))},directives:[u.NgClass,u.NgIf,oe,pe,ge,v.TooltipDirective,Se,De,g.CheckboxControlValueAccessor,g.NgControlStatus,g.NgModel,y.TabsetComponent,u.NgForOf,y.TabDirective,vr,wr,Ur],pipes:[u.AsyncPipe],styles:['body,html{background-color:#ecf0f1;height:100%;overflow-x:hidden}.editor-container{display:flex;flex-direction:row;height:100%;width:100%}.editor-container,.editor-container .row{margin-left:0;margin-right:0}.bs-tooltip-right{width:120px!important}.shorter-editor-container{height:75%}#ng2-json-editor .dropdown-menu{max-height:400px;overflow-y:auto}#ng2-json-editor .hidden{display:none}#ng2-json-editor th{background-color:#ecf0f1;color:#8e8e8e;font-weight:400;font-weight:700;padding:1px 0 1px 6px}#ng2-json-editor th .dropdown-filter-container{font-weight:400}#ng2-json-editor td{background-color:#f9f9f9;border:none;padding:0}#ng2-json-editor td>*{vertical-align:middle}#ng2-json-editor td.label-holder{background-color:#dae8ef;border-top:1px solid #bdc3c7;padding:3px;white-space:nowrap;width:1%}#ng2-json-editor td.label-holder button{color:#595959}#ng2-json-editor td.error,#ng2-json-editor tr.error td{background-color:#e74c3c!important;color:#fff;transition:all .4s}#ng2-json-editor tbody{border:none}#ng2-json-editor table{margin-bottom:0!important}#ng2-json-editor .main-container.compact{border-left:none}#ng2-json-editor .main-container{border-left:1px solid #a5adb5;font-size:13px;height:100%;overflow:auto}#ng2-json-editor .main-container .tab-container>.nav-tabs{font-size:14px}#ng2-json-editor .main-container>add-field-dropdown div.dropdown{width:100vh}#ng2-json-editor .main-container>add-field-dropdown ul.dropdown-menu{padding-bottom:15px;right:0}#ng2-json-editor .main-container>add-field-dropdown button.btn-add-field-dropdown{background:#fff;font-size:16px;line-height:normal;opacity:.9;padding:5px;width:100%}#ng2-json-editor .main-container>add-field-dropdown button.btn-add-field-dropdown:hover{color:#000;opacity:1}#ng2-json-editor .add-field-dropdown-container{width:100%}#ng2-json-editor .middle.main-container{padding:0}#ng2-json-editor .menu-container{background-color:#2c3e50;display:flex;flex-direction:column;height:100%;justify-content:space-between;opacity:0;overflow-x:hidden;transition:width .1s ease-in;visibility:hidden;width:0}#ng2-json-editor .menu-container div.dropdown{width:100vh}#ng2-json-editor .menu-container ul.dropdown-menu{padding-bottom:15px;right:0}#ng2-json-editor .menu-container button.btn-add-field-dropdown{background:#fff;font-size:16px;line-height:normal;opacity:.9;padding:5px;width:100%}#ng2-json-editor .menu-container button.btn-add-field-dropdown:hover{color:#000;opacity:1}#ng2-json-editor .menu-container.open{opacity:1;padding-left:5px;visibility:visible;width:280px}#ng2-json-editor .collapsed-menu-container{align-items:center;background-color:#1d2d3d;display:flex;flex:0 0 50px;flex-direction:column;height:100%;justify-content:flex-end;position:relative}#ng2-json-editor .collapsed-menu-container .add-field-button{cursor:pointer;display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;margin-bottom:25px;position:absolute;top:0;width:100%}#ng2-json-editor .collapsed-menu-container .add-field-button .btn-add-field-dropdown{background-color:transparent;display:flex;justify-content:center;margin-top:10px;opacity:1;width:100%}#ng2-json-editor .collapsed-menu-container .add-field-button .btn-add-field-dropdown:active,#ng2-json-editor .collapsed-menu-container .add-field-button .btn-add-field-dropdown:focus,#ng2-json-editor .collapsed-menu-container .add-field-button .btn-add-field-dropdown:hover{outline:none}#ng2-json-editor .collapsed-menu-container .add-field-button .btn-add-field-dropdown i{color:#ddd}#ng2-json-editor .collapsed-menu-container .add-field-button .btn-add-field-dropdown i:hover{color:#fff}#ng2-json-editor .collapsed-menu-container .preview-icon{align-items:center;border:2px solid #ddd;border-radius:20%;cursor:pointer;display:flex;flex-direction:column;height:30px;justify-content:center;width:30px}#ng2-json-editor .collapsed-menu-container .preview-icon .fa{color:#ddd}#ng2-json-editor .collapsed-menu-container .preview-icon .fa:hover{color:#fff}#ng2-json-editor .collapsed-menu-container .open-sidebar-container{border-right:2px solid #283948;border-top:2px solid #283948;color:#ddd;cursor:pointer;display:flex;justify-content:center;margin-top:20px;width:100%}#ng2-json-editor .collapsed-menu-container .open-sidebar-container:hover{color:#fff;text-shadow:3px 3px 14px #2a5d88}#ng2-json-editor .collapsed-menu-container .open-sidebar-container .fa-angle-right{-ms-transition:all .5s ease-in-out;-webkit-transition:all .5s ease-in-out;transition:all .5s ease-in-out}#ng2-json-editor .collapsed-menu-container .open-sidebar-container .fa-angle-right.rotate{-ms-transform:rotate(-180deg);-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}#ng2-json-editor .middle.main-container{flex-basis:60%}#ng2-json-editor .middle.main-container.maximizeEditor{flex-grow:2}#ng2-json-editor .right.main-container{flex-basis:40%;flex-shrink:0}#ng2-json-editor .right.main-container.minimizePreview{flex-basis:0%}#ng2-json-editor .right.main-container .btn-toggle{position:fixed;right:0}#ng2-json-editor .editor-btn-delete{background:transparent;border:0;font-weight:700;line-height:1;opacity:.2;padding:0 0 3px 3px;text-shadow:0 1px 0 #fff}#ng2-json-editor .editor-btn-delete:hover{color:red;opacity:.6}#ng2-json-editor .editor-btn-delete.editor-btn-delete-text{font-size:13px;opacity:.5;padding:0}#ng2-json-editor .custom-title-dropdown-item button{background:transparent;border:0;font-size:13px;font-weight:700;line-height:1;opacity:.2;opacity:.5;padding:0;text-shadow:0 1px 0 #fff}#ng2-json-editor .custom-title-dropdown-item button:hover{color:#337ab7;opacity:.6}#ng2-json-editor .editor-btn-move-down{padding-bottom:0}#ng2-json-editor .editor-btn-move-down,#ng2-json-editor .editor-btn-move-up{background:transparent;border:0;font-size:11px;opacity:.2;padding:0}#ng2-json-editor .editor-btn-move-down:hover,#ng2-json-editor .editor-btn-move-up:hover{opacity:.6}#ng2-json-editor ul.pagination-top{margin:-16px 0 0}#ng2-json-editor td.button-holder,#ng2-json-editor th.button-holder{text-align:center;vertical-align:middle;width:40.33px}#ng2-json-editor td.button-holder.sortable,#ng2-json-editor th.button-holder.sortable{width:46px}#ng2-json-editor th.button-holder .add-field-dropdown-container{width:100%}#ng2-json-editor th.button-holder .btn-add-field-dropdown{float:right}#ng2-json-editor label{color:#c1c1c1}#ng2-json-editor .highlight{border:2px solid #ff0!important}#ng2-json-editor table.editable-inner-table{table-layout:fixed}#ng2-json-editor table.editable-inner-table>tbody>tr{border-bottom:1px solid #fff!important}#ng2-json-editor table.editable-inner-table add-new-element-button .button-container{padding-left:6px}#ng2-json-editor table.editable-inner-table label{display:inline;font-weight:400;padding-left:5px}#ng2-json-editor table.editable-inner-table .dropdown-menu{left:inherit;min-width:100px;right:0}#ng2-json-editor .title-dropdown-item button{padding-left:20px!important;padding-right:20px!important;text-align:left;width:100%}#ng2-json-editor .title-dropdown-item:hover{background:#f5f5f5}#ng2-json-editor .tooltip.top .tooltip-arrow{border-top-color:transparent}#ng2-json-editor .tooltip{width:90%}#ng2-json-editor button.btn-toggle{float:right;margin-right:5px;margin-top:5px}#ng2-json-editor .autocomplete-container .dropdown{left:0!important;position:relative!important;top:0!important}#ng2-json-editor div.admin-mode{padding-top:8px;width:100%}#ng2-json-editor label.admin-mode{color:#e0dfdf;font-size:13px;font-weight:400;padding-left:4px;width:90%}#ng2-json-editor hr{border-top:1px solid #757575;margin-bottom:5px;margin-top:5px}#ng2-json-editor .btn.btn-success{background-color:#16a085;border-color:#16a085;color:#fff}#ng2-json-editor .btn.btn-success:active,#ng2-json-editor .btn.btn-success:focus,#ng2-json-editor .btn.btn-success:hover{background-color:#19b698!important;color:#fff}#ng2-json-editor .btn .fa{margin-right:2px}#ng2-json-editor .nav{margin-bottom:3px}#ng2-json-editor .nav-tabs>li.active>a,#ng2-json-editor .nav-tabs>li.active>a:focus,#ng2-json-editor .nav-tabs>li.active>a:hover{background-color:#fff;border-top:1px solid #2c3e50}#ng2-json-editor .nav-tabs>li>a:hover{border:1px solid transparent;border-top-color:#2c3e50;transition:all .4s}#ng2-json-editor .nav.nav-tabs{border-bottom:5px solid #fff;box-shadow:0 2px 5px 0 rgba(0,0,0,.24)}#ng2-json-editor .nav-tabs>li>a{border-radius:0;border-right:1px solid #e0e2e2;margin-right:0}#ng2-json-editor .disabled{cursor:not-allowed}#ng2-json-editor .disabled div{pointer-events:none}#ng2-json-editor .disabled div a,#ng2-json-editor .disabled div button,#ng2-json-editor .disabled div i,#ng2-json-editor .disabled div input,#ng2-json-editor .disabled div string-input>div{opacity:.5}#ng2-json-editor .disabled button{pointer-events:none}#ng2-json-editor .pagination>.active>a{background-color:#31617b;border-color:#31617b}#ng2-json-editor .btn.btn-switch{background-color:#7da0b3}#ng2-json-editor .btn.btn-switch.active{background-color:#31617b}.bottom-console-container{height:25%;overflow:hidden}.bottom-console-container .tab-content{height:90%;overflow:scroll}.red-left-border{border-left:9px solid #e74c3c!important}.max-height-90-vh{max-height:90vh}.max-height-70-vh{max-height:70vh}complex-list-field add-field-dropdown{display:none}.nav-tabs{background:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1}typeahead-container a[href="#"]{padding:0!important}'],encapsulation:2,changeDetection:0});var Yr=function(){function e(e){this.pathUtilService=e}return e.prototype.transform=function(e){return e.substring(e.lastIndexOf("/")+1)},e}();function Zr(e,n){1&e&&t.ɵɵelement(0,"li",10)}function ei(e,n){if(1&e&&(t.ɵɵelementStart(0,"li",11),t.ɵɵtext(1),t.ɵɵpipe(2,"lastPathElement"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext(2).$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(2,1,r))}}function ti(e,n){if(1&e){var r=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"li"),t.ɵɵelementStart(1,"a",12),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(r);var e=n.$implicit,i=t.ɵɵnextContext(2).$implicit;return t.ɵɵnextContext(2).onFieldSelect(i,e)})),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit;t.ɵɵadvance(2),t.ɵɵtextInterpolate(i)}}function ni(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,Zr,1,0,"li",8),t.ɵɵtemplate(2,ei,3,3,"li",9),t.ɵɵtemplate(3,ti,3,1,"li",6),t.ɵɵpipe(4,"sortAlphabetically"),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext().first;t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!i),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!i),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(4,3,r))}}function ri(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,ni,5,5,"div",7),t.ɵɵelementEnd()),2&e){var r=n.$implicit,i=t.ɵɵnextContext(2);t.ɵɵadvance(1),t.ɵɵproperty("ngIf",i.addableKeysForPath(r))}}function ii(e,n){if(1&e&&(t.ɵɵelementStart(0,"ul",5),t.ɵɵtemplate(1,ri,2,1,"div",6),t.ɵɵpipe(2,"sortAlphabetically"),t.ɵɵpipe(3,"keys"),t.ɵɵelementEnd()),2&e){var r=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(2,1,t.ɵɵpipeBind1(3,3,r.nestedKeysMap)))}}Yr.ɵfac=function(e){return new(e||Yr)(t.ɵɵdirectiveInject(B))},Yr.ɵpipe=t.ɵɵdefinePipe({name:"lastPathElement",type:Yr,pure:!0});var oi=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.keysStoreService=t,o.jsonSchemaService=n,o.pathUtilService=r,o.domUtilService=i,o}return M(t,e),t.prototype.ngOnChanges=function(e){var t=this;if(e.pathString){this.nestedKeysMap={},this.nestedKeysMap[this.pathString]=this.keysStoreService.keysMap[this.pathString];var n=this.pathString+this.pathUtilService.separator;Object.keys(this.keysStoreService.keysMap).filter((function(e){return e.startsWith(n)})).forEach((function(e){t.nestedKeysMap[e]=t.keysStoreService.keysMap[e]})),this.keysChangeSubscription&&this.keysChangeSubscription.unsubscribe(),this.keysChangeSubscription=this.keysStoreService.onKeysChange.pipe(r.filter((function(e){return e.path.startsWith(t.pathString)}))).pipe(r.takeUntil(this.isDestroyed)).subscribe((function(e){t.nestedKeysMap[e.path]=e.keys}))}},t.prototype.addableKeysForPath=function(e){var t=this.nestedKeysMap[e],r=this.jsonSchemaService.forPathString(e),i=r.properties||r.items.properties,o=n.Set(Object.keys(i).filter((function(e){return!i[e].hidden}))).subtract(t);return o.size>0?o:void 0},t.prototype.onFieldSelect=function(e,t){var n=this.jsonSchemaService.forPathString(e);"table-list"===n.componentType&&(n=n.items);var r=this.keysStoreService.addKey(e,t,n);this.keysStoreService.keysMap[r]&&(this.nestedKeysMap[r]=this.keysStoreService.keysMap[r]),this.domUtilService.focusAndSelectFirstEditableChildById(r)},t}(T);oi.ɵfac=function(e){return new(e||oi)(t.ɵɵdirectiveInject(J),t.ɵɵdirectiveInject(L),t.ɵɵdirectiveInject(B),t.ɵɵdirectiveInject(U))},oi.ɵcmp=t.ɵɵdefineComponent({type:oi,selectors:[["add-nested-field-dropdown"]],inputs:{schema:"schema",pathString:"pathString",isDisabled:"isDisabled"},features:[t.ɵɵInheritDefinitionFeature,t.ɵɵNgOnChangesFeature],decls:5,vars:1,consts:[["dropdown","","keyboardNav","true",1,"btn-group","add-field-dropdown-container",3,"isDisabled"],["type","button","dropdownToggle","",1,"btn","btn-add-field-dropdown"],[1,"fa","fa-plus"],[1,"fa","fa-caret-down"],["class","dropdown-menu",4,"dropdownMenu"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","divider dropdown-divider",4,"ngIf"],["class","dropdown-header title",4,"ngIf"],[1,"divider","dropdown-divider"],[1,"dropdown-header","title"],["href","javascript:void(0)",1,"dropdown-item",3,"click"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵelementStart(1,"button",1),t.ɵɵelement(2,"i",2),t.ɵɵelement(3,"i",3),t.ɵɵelementEnd(),t.ɵɵtemplate(4,ii,4,5,"ul",4),t.ɵɵelementEnd()),2&e&&t.ɵɵproperty("isDisabled",n.isDisabled)},directives:[m.BsDropdownDirective,m.BsDropdownToggleDirective,m.BsDropdownMenuDirective,u.NgForOf,u.NgIf],pipes:[de,Ge,Yr],styles:[".btn-add-field-dropdown[_ngcontent-%COMP%]{background:transparent;border:0;color:#2f4f4f;float:left;font-size:11px;font-weight:700;line-height:1;margin-bottom:2px;opacity:.4;padding:0 3px;text-shadow:0 1px 0 #fff}.btn-add-field-dropdown[_ngcontent-%COMP%]:hover{color:#00f;opacity:.6}.dropdown-filter-container[_ngcontent-%COMP%]{padding:0 3px}.dropdown-filter-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}",".dropdown-header.title[_ngcontent-%COMP%]{font-size:13.5px;font-weight:700;padding-left:10px}.dropdown-divider[_ngcontent-%COMP%]{margin:4px 0}.dropdown-menu[_ngcontent-%COMP%]{left:auto;right:0}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > .dropdown-item[_ngcontent-%COMP%]{clear:both;color:#333;display:block;font-weight:400;line-height:1.42857;padding:3px 20px;white-space:nowrap}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;color:#262626;text-decoration:none}"],changeDetection:0});var ai=function(){function e(){}return e.prototype.transform=function(e,t){return n.Set.fromKeys(e).subtract(t)},e}();ai.ɵfac=function(e){return new(e||ai)},ai.ɵpipe=t.ɵɵdefinePipe({name:"differentKeys",type:ai,pure:!0});var ci=function(){};ci.ɵmod=t.ɵɵdefineNgModule({type:ci}),ci.ɵinj=t.ɵɵdefineInjector({factory:function(e){return new(e||ci)},providers:ie,imports:[[v.TooltipModule.forRoot(),P.CollapseModule.forRoot(),w.PopoverModule.forRoot(),m.BsDropdownModule.forRoot(),S.PaginationModule.forRoot(),f.ModalModule.forRoot(),y.TabsModule.forRoot(),x.TypeaheadModule.forRoot(),u.CommonModule,g.FormsModule,a.HttpClientModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(ci,{declarations:[Ce,ai,ue,xe,yr,cr,mt,sr,de,Ge,Yr,Je,qe,oe,cn,ge,oi,ar,or,Cn,Zt,Tt,wr,Ne,pe,an,$n,Yn,gn,Ke,wt,Ue,Te,Oe,De,Xr,vr,br,Se,Ur,ln,Pn,He,Ar,Or,ft],imports:[v.TooltipModule,P.CollapseModule,w.PopoverModule,m.BsDropdownModule,S.PaginationModule,f.ModalModule,y.TabsModule,x.TypeaheadModule,u.CommonModule,g.FormsModule,a.HttpClientModule],exports:[Xr]}),t.ɵɵsetComponentScope(Tt,[v.TooltipDirective,P.CollapseDirective,w.PopoverDirective,m.BsDropdownMenuDirective,m.BsDropdownToggleDirective,m.BsDropdownDirective,S.PagerComponent,S.PaginationComponent,f.ModalBackdropComponent,f.ModalDirective,y.TabDirective,y.TabsetComponent,y.TabHeadingDirective,y.NgTranscludeDirective,x.TypeaheadContainerComponent,x.TypeaheadDirective,u.NgClass,u.NgComponentOutlet,u.NgForOf,u.NgIf,u.NgTemplateOutlet,u.NgStyle,u.NgSwitch,u.NgSwitchCase,u.NgSwitchDefault,u.NgPlural,u.NgPluralCase,g.ɵangular_packages_forms_forms_y,g.NgSelectOption,g.ɵangular_packages_forms_forms_x,g.DefaultValueAccessor,g.NumberValueAccessor,g.RangeValueAccessor,g.CheckboxControlValueAccessor,g.SelectControlValueAccessor,g.SelectMultipleControlValueAccessor,g.RadioControlValueAccessor,g.NgControlStatus,g.NgControlStatusGroup,g.RequiredValidator,g.MinLengthValidator,g.MaxLengthValidator,g.PatternValidator,g.CheckboxRequiredValidator,g.EmailValidator,g.NgModel,g.NgModelGroup,g.NgForm,oe,cn,ge,oi,ar,or,Cn,Zt,Tt,wr,Ne,pe,an,$n,Yn,gn,Ke,wt,Ue,Te,Oe,De,Xr,vr,br,Se,Ur,ln,Pn,He,Ar,Or,ft],[u.AsyncPipe,u.UpperCasePipe,u.LowerCasePipe,u.JsonPipe,u.SlicePipe,u.DecimalPipe,u.PercentPipe,u.TitleCasePipe,u.CurrencyPipe,u.DatePipe,u.I18nPluralPipe,u.I18nSelectPipe,u.KeyValuePipe,Ce,ai,ue,xe,yr,cr,mt,sr,de,Ge,Yr,Je,qe]),t.ɵɵsetComponentScope(an,[v.TooltipDirective,P.CollapseDirective,w.PopoverDirective,m.BsDropdownMenuDirective,m.BsDropdownToggleDirective,m.BsDropdownDirective,S.PagerComponent,S.PaginationComponent,f.ModalBackdropComponent,f.ModalDirective,y.TabDirective,y.TabsetComponent,y.TabHeadingDirective,y.NgTranscludeDirective,x.TypeaheadContainerComponent,x.TypeaheadDirective,u.NgClass,u.NgComponentOutlet,u.NgForOf,u.NgIf,u.NgTemplateOutlet,u.NgStyle,u.NgSwitch,u.NgSwitchCase,u.NgSwitchDefault,u.NgPlural,u.NgPluralCase,g.ɵangular_packages_forms_forms_y,g.NgSelectOption,g.ɵangular_packages_forms_forms_x,g.DefaultValueAccessor,g.NumberValueAccessor,g.RangeValueAccessor,g.CheckboxControlValueAccessor,g.SelectControlValueAccessor,g.SelectMultipleControlValueAccessor,g.RadioControlValueAccessor,g.NgControlStatus,g.NgControlStatusGroup,g.RequiredValidator,g.MinLengthValidator,g.MaxLengthValidator,g.PatternValidator,g.CheckboxRequiredValidator,g.EmailValidator,g.NgModel,g.NgModelGroup,g.NgForm,oe,cn,ge,oi,ar,or,Cn,Zt,Tt,wr,Ne,pe,an,$n,Yn,gn,Ke,wt,Ue,Te,Oe,De,Xr,vr,br,Se,Ur,ln,Pn,He,Ar,Or,ft],[u.AsyncPipe,u.UpperCasePipe,u.LowerCasePipe,u.JsonPipe,u.SlicePipe,u.DecimalPipe,u.PercentPipe,u.TitleCasePipe,u.CurrencyPipe,u.DatePipe,u.I18nPluralPipe,u.I18nSelectPipe,u.KeyValuePipe,Ce,ai,ue,xe,yr,cr,mt,sr,de,Ge,Yr,Je,qe]),t.ɵɵsetComponentScope(Ue,[v.TooltipDirective,P.CollapseDirective,w.PopoverDirective,m.BsDropdownMenuDirective,m.BsDropdownToggleDirective,m.BsDropdownDirective,S.PagerComponent,S.PaginationComponent,f.ModalBackdropComponent,f.ModalDirective,y.TabDirective,y.TabsetComponent,y.TabHeadingDirective,y.NgTranscludeDirective,x.TypeaheadContainerComponent,x.TypeaheadDirective,u.NgClass,u.NgComponentOutlet,u.NgForOf,u.NgIf,u.NgTemplateOutlet,u.NgStyle,u.NgSwitch,u.NgSwitchCase,u.NgSwitchDefault,u.NgPlural,u.NgPluralCase,g.ɵangular_packages_forms_forms_y,g.NgSelectOption,g.ɵangular_packages_forms_forms_x,g.DefaultValueAccessor,g.NumberValueAccessor,g.RangeValueAccessor,g.CheckboxControlValueAccessor,g.SelectControlValueAccessor,g.SelectMultipleControlValueAccessor,g.RadioControlValueAccessor,g.NgControlStatus,g.NgControlStatusGroup,g.RequiredValidator,g.MinLengthValidator,g.MaxLengthValidator,g.PatternValidator,g.CheckboxRequiredValidator,g.EmailValidator,g.NgModel,g.NgModelGroup,g.NgForm,oe,cn,ge,oi,ar,or,Cn,Zt,Tt,wr,Ne,pe,an,$n,Yn,gn,Ke,wt,Ue,Te,Oe,De,Xr,vr,br,Se,Ur,ln,Pn,He,Ar,Or,ft],[u.AsyncPipe,u.UpperCasePipe,u.LowerCasePipe,u.JsonPipe,u.SlicePipe,u.DecimalPipe,u.PercentPipe,u.TitleCasePipe,u.CurrencyPipe,u.DatePipe,u.I18nPluralPipe,u.I18nSelectPipe,u.KeyValuePipe,Ce,ai,ue,xe,yr,cr,mt,sr,de,Ge,Yr,Je,qe]),e.AddFieldDropdownComponent=ge,e.AddNestedFieldDropdownComponent=oi,e.AddNewElementButtonComponent=ar,e.AddOrReplacePatchComponent=ft,e.AnyTypeFieldComponent=or,e.AutocompleteInputComponent=Cn,e.BottomConsoleBadgesComponent=Se,e.BottomConsoleComponent=Ur,e.ComplexListFieldComponent=Zt,e.EditorPreviewerComponent=wr,e.FindReplaceComponent=Ne,e.HtmlViewComponent=br,e.JsonEditorComponent=Xr,e.JsonEditorModule=ci,e.ListActionGroupComponent=Ke,e.ModalViewComponent=pe,e.ObjectFieldComponent=Tt,e.PatchActionsComponent=He,e.PatchesConsoleTabComponent=Ar,e.PrimitiveFieldComponent=$n,e.PrimitiveListFieldComponent=an,e.ProblemsConsoleTabComponent=Or,e.RefFieldComponent=Yn,e.SearchableDropdownComponent=gn,e.StringInputComponent=ln,e.SubRecordComponent=vr,e.TableItemFieldComponent=Ue,e.TableListFieldComponent=wt,e.TextDiffComponent=Pn,e.TitleDropdownComponent=Te,e.TreeMenuComponent=De,e.TreeMenuItemComponent=Oe,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=json-editor.umd.min.js.map